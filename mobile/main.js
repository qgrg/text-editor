!function(t){function e(e){for(var r,a,c=e[0],u=e[1],l=e[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(s&&s(e);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={1:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var s=u;i.push([13,0]),n()}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(8).default,o=n(15);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(14);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";var r=n(29);Object.defineProperty(e,"__esModule",{value:!0}),e.symbol=function(t){return i?Symbol(t):t},e.isSymbol=function(t){if(!i)return!1;var e=Object.prototype.toString;return e.call(t)===e.call(a)},e.isDefined=c,e.isObject=function(t){var e={};return e.toString.call(t)===e.toString()},e.ensureArray=function(t){if(c(t))return[].concat(t);return[]},e.asFunc=function(t,e){if(!u(t))return function(){return t};return c(t)?t:e},e.isFunction=u,e.safeExecute=function(t,e,n){if(u(t))try{return t.apply(e,n)}catch(t){console.error(t)}return t},e.safeApply=function(t,e,n){if("function"==typeof t)try{return t.apply(n,e)}catch(t){console.error(t)}},e.findUniqueKey=function(t){if(i)return Symbol(t);return"__random__".concat(t,"_").concat(Math.random(),"__")},e.scaleObject=function(t){if(t&&"object"===(0,o.default)(t))return{x:t.x||1,y:t.y||1};return{x:t||1,y:t||1}},e.getBlnValue=e.hasSymbol=void 0;var o=r(n(30)),i="function"==typeof Symbol;e.hasSymbol=i;var a=i?Symbol("_symbol"):null;function c(t){return null!=t}function u(t){return"function"==typeof t}e.getBlnValue=function(t,e,n){return"function"==typeof t?t.apply(n,e||[]):!!t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(16);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=o=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),o(e,n,i||e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=n(23)},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(19),o=n(20),i=n(21),a=n(22);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=n(47)},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},,,function(t,e,n){var r=n(10);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(10);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function f(){}function p(){}function h(){}var v={};v[o]=function(){return this};var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&n.call(y,o)&&(v=y);var m=h.prototype=f.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m.constructor=h,h.constructor=p,p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(x.prototype),x.prototype[i]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},,,,,,function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},,function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"editor.","data":{"table.insertRowBefore":"向上增加一行","table.insertRowAfter":"向下增加一行","table.insertColBefore":"向左增加一列","table.insertColAfter":"向右增加一列","table.deleteCurrentRow":"删除当前行","table.deleteCurrentCol":"删除所在列","table.mergeCells":"合并单元格","table.deleteTable":"删除表格","table.otherSettings":"其他设置","table.borderSize":"边框尺寸","table.borderColor":"边框颜色","table.bgColor":"背景色"}}')},function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"component.","data":{"dropdown.emptyText":"暂无内容","dropdown.placeholder":"请选择","colorPicker.baseColor":"基本颜色","colorPicker.customColor":"自定义颜色","colorPicker.emptyItem":"暂无","colorPicker.moreColor":"更多选择","imageSetting.imageTitle":"图片标题","imageSetting.src":"图片地址","imageSetting.ok":"确定","linkSetting.text":"文字","linkSetting.link":"链接","linkSetting.ok":"确定"}}')},function(t){t.exports=JSON.parse('{"lang":"zh-CN","prefix":"toolbar.","data":{"textType.normal":"正文","textType.h1":"标题1","textType.h2":"标题2","textType.h3":"标题3","textType.h4":"标题4"}}')},,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getCursorStyle",(function(){return ce})),n.d(r,"testEventPointToLineDistance",(function(){return se})),n.d(r,"distanceOf",(function(){return ue})),n.d(r,"distanceToLine",(function(){return le})),n.d(r,"observeViewport",(function(){return fe})),n.d(r,"getCTM",(function(){return Zt})),n.d(r,"namespaces",(function(){return ve})),n.d(r,"inRect",(function(){return ge})),n.d(r,"requestAnimationFrame",(function(){return xe})),n.d(r,"cancelAnimationFrame",(function(){return Ee})),n.d(r,"isNativeElement",(function(){return Ce})),n.d(r,"getElementScale",(function(){return _e})),n.d(r,"getScreenCTM",(function(){return Se})),n.d(r,"getClientInfo",(function(){return Re})),n.d(r,"getScreenPositionByClientInfo",(function(){return Ae})),n.d(r,"getScreenInfo",(function(){return Me})),n.d(r,"getTransformMatrix",(function(){return Te})),n.d(r,"QRDeCompositionMatrix",(function(){return Pe})),n.d(r,"createPoint",(function(){return je})),n.d(r,"matrixTransform",(function(){return Ne})),n.d(r,"Selection",(function(){return Ie})),n.d(r,"select",(function(){return Le})),n.d(r,"selectAll",(function(){return De})),n.d(r,"create",(function(){return Ve})),n.d(r,"getPosition",(function(){return He})),n.d(r,"getScreenOffsetRect",(function(){return We})),n.d(r,"getScreenOffsetPoints",(function(){return Fe})),n.d(r,"getViewPoints",(function(){return qe})),n.d(r,"remove",(function(){return Ke})),n.d(r,"empty",(function(){return Xe})),n.d(r,"findUpUtil",(function(){return Ge}));var o={};n.r(o),n.d(o,"simulateMouseDownEvent",(function(){return Je}));var i={};n.r(i),n.d(i,"simulateMouseDownEvent",(function(){return fc}));var a={};n.r(a),n.d(a,"getEditorState",(function(){return op}));var c=n(6),u=n.n(c),l=n(1),s=n.n(l),f=n(3),p=n.n(f),h=function(){function t(){s()(this,t),this.tagName="ky-element"}return p()(t,[{key:"create",value:function(t){return document.createElement(this.tagName)}}]),t}();h.tagName="ky-element";var v=n(4),d=n.n(v),y=n(2),m=n.n(y),g=n(0),x=n.n(g);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var E=function(t){d()(n,t);var e=b(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-container",t))}return n}(h);E.tagName="ky-container";var w=Object.create(null),C=new function t(){s()(this,t),this.tagName="unknown"},O=function(){function t(){s()(this,t)}return p()(t,null,[{key:"createContainer",value:function(){return t.createElement(E)}},{key:"createElement",value:function(e,n){var r=t.getElementType(e);return r?r.create(n):(new e).create(n)}},{key:"getElementType",value:function(t){var e=t.tagName;return w[e]}},{key:"register",value:function(t){w[t.tagName]=t}},{key:"isType",value:function(t,e){return!(!t||1!==t.nodeType)&&t.tagName.toLowerCase()===e.tagName}},{key:"getByTagName",value:function(t){return t=t?t.toLowerCase():t,w[t]||C}},{key:"isHelpElement",value:function(e){return!(!e||1!==e.nodeType)&&t.getByTagName(e.tagName).help}},{key:"isOutputDisabled",value:function(e){return!(!e||1!==e.nodeType)&&t.isTagNameOutputDisabled(e.tagName)}},{key:"isTagNameOutputDisabled",value:function(e){return t.getByTagName(e).outputDisabled}},{key:"isWrapperElement",value:function(e){return!(!e||1!==e.nodeType)&&!!t.getByTagName(e.tagName).isWrapper}},{key:"isTagNameInstanceOf",value:function(e,n){var r=t.getByTagName(e),o=t.getByTagName(n);return r!==C&&o!==C&&r instanceof o.constructor}},{key:"isValidElement",value:function(e){return!(!e||1!==e.nodeType)&&t.getByTagName(e.tagName)!==C}},{key:"isElementInstanceOf",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n||!e||1!==e.nodeType)return!1;var o=t.getByTagName(e.tagName);return r?o.constructor===n:o instanceof n}}]),t}(),k=n(7),_=n.n(k);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var R=function(t){d()(n,t);var e=S(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-box",t))}return n}(h);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}R.tagName="ky-box";var M=function(t){d()(n,t);var e=A(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-box-wrapper",r.isWrapper=!0,t))}return n}(R);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}M.tagName="ky-box-wrapper";var P=function(t){d()(n,t);var e=T(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-behavior",t))}return p()(n,[{key:"create",value:function(t){var e=_()(x()(n.prototype),"create",this).call(this),r=t||{},o=r.rotate,i=r.resizeModes;return!1===o&&e.setAttribute("rotate","false"),null!=i&&i.length&&e.setAttribute("resize-modes",i.join(",")),e}}]),n}(M);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}P.tagName="ky-behavior";var N=function(t){d()(n,t);var e=j(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-text",r.canFocus=!0,t))}return n}(h);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}N.tagName="ky-text";var B=function(t){d()(n,t);var e=z(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-block-text",t))}return n}(h);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}B.tagName="ky-block-text";var L=function(t){d()(n,t);var e=I(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-link",t))}return n}(B);function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}L.tagName="ky-link";var V=function(t){d()(n,t);var e=D(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-block",t))}return n}(h);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}V.tagName="ky-block";var W=function(t){d()(n,t);var e=H(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.isWrapper=!0,r.tagName="ky-wrapper",t))}return n}(V);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}W.tagName="ky-wrapper";var q=function(t){d()(n,t);var e=F(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-p",t))}return n}(W);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}q.tagName="ky-p";var Z=function(t){d()(n,t);var e=U(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-li",t))}return n}(W);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}Z.tagName="ky-li";var Y=function(t){d()(n,t);var e=K(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-marker",r.canFocus=!1,r.help=!0,t))}return n}(N);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}Y.tagName="ky-marker";var G=function(t){d()(n,t);var e=X(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-h",t))}return n}(q);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}G.tagName="ky-h";var $=function(t){d()(n,t);var e=J(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-hr",t))}return n}(R);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}$.tagName="ky-hr";var tt=function(t){d()(n,t);var e=Q(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-checkbox",t))}return p()(n,[{key:"create",value:function(){var t=_()(x()(n.prototype),"create",this).call(this),e=O.createElement(et);return t.appendChild(e),t}}]),n}(R);tt.tagName="ky-checkbox";var et=function(t){d()(n,t);var e=Q(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-checkbox-content",t))}return n}(h);function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}et.tagName="ky-checkbox-content";var rt=function(t){d()(n,t);var e=nt(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-quote",t))}return n}(q);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}rt.tagName="ky-quote";var it=function(t){d()(n,t);var e=ot(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-custom",t))}return p()(n,[{key:"create",value:function(t){var e=_()(x()(n.prototype),"create",this).call(this);return null!=t&&t.innerHTML&&("string"==typeof t.innerHTML&&(e.innerHTML=t.innerHTML),e.setAttribute(n.InnerHTMLAttr,"")),null!=t&&t.type&&e.setAttribute("type",t.type),e}}]),n}(R);it.InnerHTMLAttr="ky-inner-html",it.tagName="ky-custom";n(17);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var ct=function(t){d()(n,t);var e=at(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-select-active",r.outputDisabled=!0,t))}return p()(n,[{key:"create",value:function(){for(var t=_()(x()(n.prototype),"create",this).call(this),e=0;e<4;e++){var r=document.createElement("i");r.setAttribute("index",String(e)),t.appendChild(r)}var o=document.createElement("ky-center");return t.appendChild(o),t}}]),n}(h);function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}ct.tagName="ky-select-active";var lt=function(t){d()(n,t);var e=ut(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-placement",r.outputDisabled=!0,t))}return n}(h);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}lt.tagName="ky-placement";var ft=function(t){d()(n,t);var e=st(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-center",t))}return n}(h);ft.tagName="ky-center",O.register(new E),O.register(new h),O.register(new P),O.register(new N),O.register(new L),O.register(new V),O.register(new W),O.register(new q),O.register(new Z),O.register(new Y),O.register(new R),O.register(new G),O.register(new $),O.register(new tt),O.register(new et),O.register(new rt),O.register(new it),O.register(new M),O.register(new ct),O.register(new lt),O.register(new ft);var pt="1",ht="0",vt="Attribute",dt="Style",yt="None",mt="Global",gt=function(){function t(e){s()(this,t),this._model=null,this.commandType=yt,this.commandManager=e}return p()(t,[{key:"getRange",value:function(){return this.getEditor().getNormalizedRange()}},{key:"getEditor",value:function(){return this.commandManager.editor}},{key:"getContainer",value:function(){return this.getEditor().getContainer()}},{key:"initModel",value:function(){return{}}},{key:"createState",value:function(){return{data:null}}},{key:"getState",value:function(t){return this.createState()}},{key:"getModel",value:function(){return this._model?this._model:this._model=this.initModel()}},{key:"createElement",value:function(){var t;return null===(t=this.elementType)||void 0===t?void 0:t.create()}},{key:"isElementMatched",value:function(t,e){return!!e&&O.isType(t,this.elementType)}},{key:"findNearest",value:function(t,e){var n=this;return this.findNearestMatch(t,(function(t){return n.isElementMatched(t,e)}))}},{key:"findNearestMatch",value:function(t,e){for(var n=this.getContainer();t&&t!==n;){if(e(t))return t;t=t.parentElement}return null}},{key:"createBehaviorElement",value:function(t){return O.createElement(P,t)}},{key:"execute",value:function(t){}}],[{key:"isElement",value:function(e){return!t.isTextNode(e)}},{key:"isTextNode",value:function(t){return t&&3===t.nodeType}}]),t}(),xt=function(){function t(){s()(this,t),this.element=null,this.range=null}return p()(t,[{key:"clear",value:function(){this.element=null,this.range=null}},{key:"isEnabled",value:function(){return!(!this.element||!this.range)}}]),t}(),bt=Object.create(null);function Et(t){var e=t.editor.getContainer();if(!e)return!1;var n=t.startElement,r=t.endElement;return!(!!n&&e.contains(n))||!r||e.contains(r)}var wt=function(){function t(e){s()(this,t),this.pendingCommands=new xt,this.commands=Object.create(null),this.editor=e}return p()(t,[{key:"getCommand",value:function(t){var e=this.commands[t];if(!e){var n=bt[t];n&&(e=this.commands[t]=new n(this))}return e}},{key:"getCommandByType",value:function(t){return Object.values(this.commands).find((function(e){return e.constructor===t}))}},{key:"getCommandState",value:function(t){var e=this.getCommand(t);return e?e.getState():null}},{key:"execCommand",value:function(t,e){var n=this.getCommand(t);if(n){if(n.commandType!==mt){var r=this.editor.getNormalizedRange();if(!r)return;Et(r)&&r.select()}var o=Array.prototype.slice.call(arguments);return o.shift(),n.execute.apply(n,o)}}}],[{key:"install",value:function(t,e){bt[t]=e}}]),t}(),Ct=n(8),Ot=n.n(Ct),kt="function"==typeof Symbol;kt&&Symbol("_symbol");function _t(t){return null!=t}function St(t){var e={};return e.toString.call(t)===e.toString()}function Rt(t){return _t(t)?[].concat(t):[]}function At(t,e){return Mt(t)?_t(t)?t:e:function(){return t}}function Mt(t){return"function"==typeof t}function Tt(t,e,n){if(Mt(t))try{return t.apply(e,n)}catch(t){console.error(t)}return t}function Pt(t,e,n){if("function"==typeof t)try{return t.apply(n,e)}catch(t){console.error(t)}}function jt(t){return kt?Symbol(t):"__random__".concat(t,"_").concat(Math.random(),"__")}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bt=/\s+|\s*,\s*/;function It(t){return t}var Lt={passive:!0},Dt=function(){function t(e){s()(this,t),this._options=Object.assign({},Lt,e||{}),this.mountKey=jt("eventManagerId"),this._proxyElement=null,this._eventListeners={},this._events={},this._bindEventTypes={},this._attributes={},this._nativeEventItems=[]}return p()(t,[{key:"onNative",value:function(t,e,n){var r=this._nativeEventItems;if(r.find((function(n){return n.name===t&&n.handler===e})))return this;r.push({name:t,handler:e,options:n});var o=this._proxyElement,i=this.mountKey;return o&&o[i]&&o.addEventListener(t,e,n),this}},{key:"offNative",value:function(t,e){var n=this._nativeEventItems,r=-1;if(n.some((function(n,o){if(n.name===t&&n.handler===e)return r=o,!0})),-1!==r){n.splice(r,1);var o=this._proxyElement,i=this.mountKey;o&&o[i]&&o.removeEventListener(t,e)}return this}},{key:"attr",value:function(t,e){var n=this._attributes;return 1===arguments.length?n[t]:2===arguments.length?(n[t]=e,this):Object.assign({},n)}},{key:"option",value:function(t,e){var n=this._options;return 1===arguments.length?n[t]:(2===arguments.length&&(n[t]=e),this)}},{key:"removeAttr",value:function(t){return delete this._attributes[t]}},{key:"getProxyElement",value:function(){return this._proxyElement}},{key:"_parseEventType",value:function(t){return t?t.trim().split(Bt):[]}},{key:"_executeHandlers",value:function(t){var e=t.handlers;e&&e.forEach((function(e){var n=Object.create(t.event);Tt(e,t.eventTarget,[t.eventBuilder(n)])}))}},{key:"on",value:function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];r||(r=n[t]=[]),-1===r.indexOf(e)&&r.push(e)})),this}},{key:"once",value:function(t,e){var n,r=this,o=function(){r.off(t,n)};n=function(){e.apply(this,arguments),o()},this.on(t,n)}},{key:"off",value:function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];if(r){var o=r.indexOf(e);-1!==o&&r.splice(o,1),0===r.length&&delete n[t]}})),this}},{key:"emit",value:function(t,e,n){var r=this._eventListeners;return this._parseEventType(t).forEach((function(t){var o=r[t];o&&o.forEach((function(t){Tt(t,e,n)}))})),this}},{key:"_register",value:function(t,e,n){var r=t.split(":"),o=r[0],i=r.length>1?r[1]:r[0],a=this._events[o];return a||(a=this._events[o]={}),e?(a[i]={eventTarget:At(e),eventBuilder:Mt(n)?n:It},this._registerBindEventType(o)):(delete a[i],0===Object.keys(a).length&&this._logoutBindEventType(o)),this}},{key:"register",value:function(t,e,n){var r=this;return t.split(Bt).forEach((function(t){t&&r._register(t,e,n)})),this}},{key:"_createEvent",value:function(t){var e=this,n={};for(var r in t)n[r]=t[r];var o=t,i=!1;return Object.assign(n,{native:o,stopPropagation:function(){i=!0},isStopPropagation:function(){return i},preventDefault:function(){var n,r=e._options;!1===zt({passive:r.passive},null===(n=r.eventOptions)||void 0===n?void 0:n[t.type]).passive&&t.preventDefault()}})}},{key:"createEvent",value:function(t){return this._createEvent(t)}},{key:"_logoutBindEventType",value:function(t){var e=this._bindEventTypes,n=e[t];if(n){delete e[t];var r=this._proxyElement;r&&r.removeEventListener(t,n)}}},{key:"_registerBindEventType",value:function(t){var e=this,n=this._bindEventTypes;if(!n[t]){var r=function(n){var r=e._events[t];if(r){var o=Object.keys(r);if(0!==o.length){var i=e._eventListeners,a=[];o.forEach((function(t){var o=r[t],c=o.eventTarget;if(c=Tt(c,null,[n])){var u=e._createEvent(n);u.target=c;var l=i[t];a.push({handlers:l,eventTarget:c,eventBuilder:o.eventBuilder,event:u})}}));for(var c=n.target,u=!1;c;){var l=!1;if(a=a.filter((function(t){return t.eventTarget!==c||(u||(e._executeHandlers(t),t.event.isStopPropagation()&&(l=t.event.isStopPropagation())),!1)})),l&&(u=l),c===e._proxyElement||0===a.length)break;c=c.parentElement}a.forEach((function(t){e._executeHandlers(t)}))}}};if(n[t]=r,this._proxyElement){var o,i=this._options;this._proxyElement.addEventListener(t,r,zt({passive:i.passive},null===(o=i.eventOptions)||void 0===o?void 0:o[t]))}return this}}},{key:"_unmount",value:function(){this.stop(),this._proxyElement=null}},{key:"stop",value:function(){var t=this._proxyElement;if(t){var e=this._bindEventTypes;Object.keys(e).forEach((function(n){var r=e[n];null==t||t.removeEventListener(n,r)})),this._nativeEventItems.forEach((function(e){null==t||t.removeEventListener(e.name,e.handler)}));var n=this.mountKey;t[n]=!1}}},{key:"resume",value:function(){var t=this._proxyElement;if(t){var e=this._options,n=this.mountKey;if(!t[n]){var r=this._bindEventTypes;Object.keys(r).forEach((function(n){var o,i=r[n];null==t||t.addEventListener(n,i,zt({passive:e.passive},null===(o=e.eventOptions)||void 0===o?void 0:o[n]))})),this._nativeEventItems.forEach((function(e){e.options?null==t||t.addEventListener(e.name,e.handler,e.options):null==t||t.addEventListener(e.name,e.handler)})),t[n]=!0}}}},{key:"unMount",value:function(){return this._unmount()}},{key:"unmount",value:function(){return this._unmount()}},{key:"mount",value:function(t){var e=t;"string"==typeof e&&(e=document.querySelector(e)),this._proxyElement&&this._proxyElement!==e&&this.unmount(),this._proxyElement=e,this.resume()}}]),t}(),Vt=DOMMatrix,Ht=DOMPoint,Wt=-1!==navigator.userAgent.indexOf("Chrome"),Ft=function(t,e,n){var r;if(function(t){return"svg"===String(t.tagName).toLowerCase()}(t))return t.getScreenCTM();if(r=t.ownerSVGElement)return r.getScreenCTM().multiply(t.getScreenCTM());var o=t.offsetParent,i=window.getComputedStyle(t),a=o&&o!==document.body?window.getComputedStyle(o):{},c=t.offsetTop,u=t.offsetLeft,l=parseFloat(a.borderLeftWidth)||0,s=parseFloat(a.borderTopWidth)||0,f=(null==o?void 0:o.scrollTop)||0,p=(null==o?void 0:o.scrollLeft)||0,h=function(t,e){var n=0,r=0;if(!t)return{scrollTop:r,scrollLeft:n};for(var o=t.parentElement;o&&o!==e;)n+=o.scrollLeft||0,r+=o.scrollTop||0,o=o.parentElement;return{scrollTop:r,scrollLeft:n}}(t,o),v=new DOMMatrix;n||(v.e=l+u-p-h.scrollLeft||0,v.f=s+c-f-h.scrollTop||0);var d=i.transform,y=d&&"none"!==d?v.multiply(new DOMMatrix(d)):v;if(e){var m=new DOMMatrix([1,0,0,1,t.offsetWidth/2||0,t.offsetHeight/2||0]);return y.multiply(m)}return y},qt=function(t){var e=t.ownerSVGElement;return e||t.offsetParent},Ut=function(t){return function t(e,n){var r=qt(e);return r?t(r,e).multiply(Ft(e,e===n)):Ft(e)}(t,t)},Zt=function(t,e){for(var n=t,r=null;n&&(r=r?Ft(n,n===t,n===e).multiply(r):Ft(n,n===t),n!==e);)n=qt(n);return r||new DOMMatrix};const Kt="function"==typeof btoa,Yt="function"==typeof Buffer,Xt=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),Gt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Jt=((t=>{let e={};t.forEach((t,n)=>e[t]=n)})(Gt),String.fromCharCode.bind(String)),$t=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_")),Qt=t=>{let e,n,r,o,i="";const a=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=Gt[e>>18&63]+Gt[e>>12&63]+Gt[e>>6&63]+Gt[63&e]}return a?i.slice(0,a-3)+"===".substring(a):i},te=Kt?t=>btoa(t):Yt?t=>Buffer.from(t,"binary").toString("base64"):Qt,ee=Yt?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(Jt.apply(null,t.subarray(n,n+4096)));return te(e.join(""))},ne=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Jt(192|e>>>6)+Jt(128|63&e):Jt(224|e>>>12&15)+Jt(128|e>>>6&63)+Jt(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Jt(240|e>>>18&7)+Jt(128|e>>>12&63)+Jt(128|e>>>6&63)+Jt(128|63&e)},re=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,oe=t=>t.replace(re,ne),ie=Yt?t=>Buffer.from(t,"utf8").toString("base64"):Xt?t=>ee(Xt.encode(t)):t=>te(oe(t)),ae=(t,e=!1)=>e?$t(ie(t)):ie(t);function ce(t){var e=t.pointA,n=t.pointB,r=t.rotate,o=void 0===r?90:r,i=t.size||16,a=t.color||"#000",c=[n.x-e.x,n.y-e.y],u=c[0]/Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=180*Math.acos(u)/Math.PI;c[1]<0&&(l=180-l),l+=o;var s=i,f=i,p=new Vt([1,0,0,1,512,512]),h=new Vt([1,0,0,1,-512,-512]),v=(new Vt).rotate(l);v=p.multiply(v).multiply(h);var d='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(s,'" height="').concat(f,'">\n    <path transform="matrix(').concat(v.a," ").concat(v.b," ").concat(v.c," ").concat(v.d," ").concat(v.e," ").concat(v.f,')" d="M768 341.333333l170.666667 170.666667-170.666667 170.666667v-128H256v128l-170.666667-170.666667 170.666667-170.666667v128h512V341.333333z" fill="').concat(a,'"></path>\n</svg>'),y=ae(d);return"url(data:image/svg+xml;base64,".concat(y,") ").concat(s/2," ").concat(f/2,",move")}function ue(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function le(t,e){var n=e.pointA,r=e.pointB,o=[r.x-n.x,r.y-n.y],i=[t.x-n.x,t.y-n.y],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=(o[0]*i[0]+o[1]*i[1])/(a*c);return Math.sin(Math.acos(u))*c}function se(t,e,n){var r=e.pointA,o=e.pointB,i=[o.x-r.x,o.y-r.y],a=[t.x-r.x,t.y-r.y],c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=(i[0]*a[0]+i[1]*a[1])/(c*u);return l<0?ue(r,t)<=n:u*l>c?ue(o,t)<=n:Math.sin(Math.acos(l))*u<=n}var fe=function(t,e,n){var r,o=(n||{}).throttle,i=void 0===o?100:o,a=function(){clearTimeout(r),"function"==typeof e&&(r=setTimeout((function(){e({target:t})}),i))},c=new MutationObserver(a);t.addEventListener("scroll",a,!0),c.observe(t,{attributes:!0,childList:!0,subtree:!0});var u=new ResizeObserver(a);return u.observe(t),function(){t.removeEventListener("scroll",a),c.disconnect(),u.disconnect()}};function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var he="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:he,html:he,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var de=window.Symbol?window.Symbol("_data"):"_data",ye=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},me=Object.create(null),ge=function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height};function xe(t,e){if(!e)return ye.apply(window,arguments);var n=me[e];if(!n){n=me[e]=[t];var r=function(){n.forEach((function(t){Tt(t)})),delete me[e]};return ye.call(window,r)}n.push(t)}var be=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){return clearTimeout(t)};function Ee(){return be.apply(window,arguments)}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r in t)return t[r]}}function Ce(t){if(!t)return!1;var e=t.tagName,n=t.namespaceURI;if(!e||!n)return!1;return(n===he?document.createElement(e):document.createElementNS(n,e.toLowerCase())).constructor===t.constructor}function Oe(t){return String(t.getAttribute("class")||"").split(/\s+/)}function ke(t,e){t.setAttribute("class",[].concat(e).join(" "))}function _e(t){return t instanceof Ie&&(t=t.node()),Pe((Wt&&t.getScreenCTM?t.getScreenCTM():Se(t))||new Vt).scale||{x:1,y:1}}function Se(t){if(t instanceof Ie&&(t=t.node()),!Wt)return Ut(t);return"function"==typeof t.getScreenCTM?t.getScreenCTM():Ut(t)}var Re=function(t,e){var n=Se(t),r=new Vt(n.toString()),o=r.e,i=r.f,a={x:1,y:1};if(e){var c=Pe(r).scale;c&&(a.x=c.x,a.y=c.y)}r.e=r.f=0;var l=t.offsetWidth,s=t.offsetHeight,f=[{x:o-l/2,y:i-s/2},{x:o+l/2,y:i-s/2},{x:o+l/2,y:i+s/2},{x:o-l/2,y:i+s/2}],p=f.map((function(t){return(t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)).x-=o,t.y-=i,(t=Ne(t,r)).x+=o,t.y+=i,t}));return{originPoints:f,points:p,ctm:r}},Ae=function(t,e,n){var r=e.points,o=e.ctm,i={x:1,y:1};if(n){var a=Pe(o).scale;a&&(i.x=a.x,i.y=a.y)}var c={pointA:r[3],pointB:r[0]},u={pointA:r[0],pointB:r[1]},l=(t.x-c.pointA.x)*(c.pointB.y-c.pointA.y)-(t.y-c.pointA.y)*(c.pointB.x-c.pointA.x),s=(t.x-u.pointA.x)*(u.pointB.y-u.pointA.y)-(t.y-u.pointA.y)*(u.pointB.x-u.pointA.x),f=le(t,c)*(l>0?-1:1),p=le(t,u)*(s>0?-1:1);return{x:f/i.x,y:p/i.y}},Me=function(t,e,n){var r=Re(e),o=r.originPoints,i=r.ctm,a=r.points;return{ctm:i,position:Ae(t,r,n),points:a,originPoints:o}};function Te(t){t instanceof Ie&&(t=t.node());var e=window.getComputedStyle(t).transform;return new Vt(e)}function Pe(t){var e=t.a,n=t.b,r=t.c,o=t.d,i=e*o-n*r,a={rotate:0,scale:{x:1,y:1},skewX:0,skewY:0};if(0!=e||0!=n){var c=Math.sqrt(e*e+n*n);a.rotate=n>0?Math.acos(e/c):-Math.acos(e/c),a.scale={x:c,y:i/c},a.skewX=Math.atan((e*r+n*o)/(c*c))}else if(0!=r||0!=o){var u=Math.sqrt(r*r+o*o);a.rotate=Math.PI/2-(o>0?Math.acos(-r/u):-Math.acos(r/u)),a.scale={x:i/u,y:u},a.skewY=Math.atan((e*r+n*o)/(u*u))}return a}function je(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("object"===Ot()(t)){var o=t;t=o.x||0,e=o.y||0,n=o.z||0,r=o.w||1}return new Ht(t,e,n,r)}function Ne(t,e){return je(t).matrixTransform(e)}function ze(t,e){e=Rt(e);var n=Oe(t);return 0===arguments.length?n:(e.forEach((function(t){t.split(/\s+/).forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))})),ke(t,e),t)}function Be(t,e){e=Rt(e);var n=Oe(t);return n.filter((function(t){return-1===e.indexOf(t)})),ke(t,n),t}var Ie=function(){function t(e){if(s()(this,t),!(this instanceof t))return new t(e);this.nodes=[].concat(e)}return p()(t,[{key:"node",value:function(){return this.nodes[0]||null}},{key:"prop",value:function(t,e){var n=this;if(St(t)){var r=t;return Object.keys(r).forEach((function(t){n.prop(t,r[t])})),this}var o=t,i=this.node();if(1===arguments.length)return i&&i[o];var a=At(e);return this.nodes.forEach((function(t,e){t[o]=a.call(t,e)})),this}},{key:"memo",value:function(t,e){var n="_dom_memo_";if(St(t)){var r={},o=t;return Object.keys(o).forEach((function(e){var i="".concat(n).concat(t);r[i]=o[e]})),this.prop(r)}var i="".concat(n).concat(t),a=[].slice.call(arguments);return a[0]=i,this.prop.apply(this,a)}},{key:"size",value:function(){return this.nodes.length}},{key:"data",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this.node();if(e){if(0===arguments.length)return e[de];var n=At(t);return this.nodes.forEach((function(t,e){t[de]=n.call(t,e)})),this}}))},{key:"offsetWidth",value:function(){var t=this.node();return t?t.offsetWidth:0}},{key:"offsetHeight",value:function(){var t=this.node();return t?t.offsetHeight:0}},{key:"position",value:function(){var t=this.bounds();return{x:t.x,y:t.y}}},{key:"bounds",value:function(){var t=this.node();if(!t)return null;var e=t.getBoundingClientRect();return{x:e.left||e.x,y:e.top||e.y,width:e.width,height:e.height}}},{key:"relativePosition",value:function(e){var n=e;n instanceof t||(n=Le(e));var r=this.position(),o=n.position();return{x:r.x-o.x,y:r.y-o.y}}},{key:"text",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this.node();return e?0===arguments.length?e.textContent:(this.nodes.forEach((function(e,n){e.textContent=At(t).call(e,n)})),this):""}))},{key:"html",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this.node();return e?0===arguments.length?e.innerHTML:(this.nodes.forEach((function(e,n){e.innerHTML=At(t).call(e,n)})),this):""}))},{key:"call",value:function(t){return Mt(t)?(this.nodes.forEach((function(e,n){t.call(e,n)})),this):this}},{key:"reAppend",value:function(){return this.nodes.forEach((function(t){var e=t.parentElement;e&&e.appendChild(t)})),this}},{key:"attr",value:function(t,e){var n=this;if(St(t)){var r=t;return Object.keys(r).forEach((function(t){n.attr(t,r[t])})),this}var o=this.nodes,i=this.node(),a=t;if(1===arguments.length)return i?i.getAttribute(a):null;if(2===arguments.length){var c=At(e);return o.forEach((function(t,e){var n=c.call(t,e);null!==n?t.setAttribute(a,n):t.removeAttribute(a)})),this}return i?i.getAttributeNames().map((function(t){return{name:t,value:i.getAttribute(t)}})):null}},{key:"css",value:function(t,e){var n=this;if(St(t)){var r=t;return Object.keys(r).forEach((function(t){n.css(t,r[t])})),this}var o=this.nodes,i=o[0],a=t;return 1===arguments.length?i?i.style[a]:null:2===arguments.length?(o.forEach((function(t,n){var r=At(e,n);t.style[a]=r.call(t)})),this):i?Object.assign({},i.style):{}}},{key:"_clazz",value:function(t,e){var n=At(e),r=this.nodes;return 0===arguments.length?ze(r[0]):(r.forEach((function(e,r){n.call(e,r)?Be(e,t):ze(e,t)})),this)}},{key:"clazz",value:function(t,e){if(0===arguments.length)return this._clazz();if(1===arguments.length){if(!t)return!1;t=[].concat(t);var n=this._clazz();return t.length===n.length&&t.every((function(t){return n.indexOf(t)>=0}))}return this._clazz(t,!e)}},{key:"createElement",value:function(e,n){"svg"===String(e).toLowerCase()&&(n=ve.svg),n=n&&ve[n]||n;var r=this.nodes[0];return new t(document.createElementNS(n||r&&r.namespaceURI||ve.html,e))}},{key:"append",value:function(e,n){var r=this.node();if(e instanceof t)return e.nodes.forEach((function(t){r.appendChild(t)})),e;if(Ce(e))return this.append(new t(e));var o=this.createElement(e,n);return this.append(o)}},{key:"select",value:function(e){var n=this.nodes,r=[];return n.some((function(t){var n=Le(e,t);if(n.size()>0)return r=r.concat(n.nodes),!0})),new t(r)}},{key:"selectAll",value:function(e){var n=this.nodes,r=[];return n.forEach((function(t){var n=De(e,t);r=r.concat(n.nodes)})),new t(r)}},{key:"remove",value:function(){this.nodes.forEach((function(t){Ze(t)}))}},{key:"empty",value:function(){this.nodes.forEach((function(t){Ye(t)}))}}]),t}();function Le(t,e){return t instanceof Ie?t:("string"==typeof t&&(t=(e||document).querySelector(t)),new Ie(Rt(t)[0]))}function De(t,e){return t instanceof Ie?t:("string"==typeof t&&(t=[].slice.call((e||document).querySelectorAll(t))),new Ie(t))}var Ve=function(t,e){if(Ce(t))return new Ie(t);var n=(e=ve[t]||e)?document.createElementNS(e,t):document.createElement(t);return new Ie(n)};function He(t,e){var n=e,r={x:we(t,["clientX","x"])||0,y:we(t,["clientY","y"])||0};if(n instanceof Ie&&(n=n.node()),!Ce(n))return r;var o=n.getBoundingClientRect();return r.x=r.x-(we(o,["left","x"])||0),r.y=r.y-(we(o,["top","y"])||0),r}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n=t.offsetTop,r=t.offsetLeft,o=t.offsetWidth,i=t.offsetHeight,a=t;(a=a.offsetParent)&&a!==e;){var c=a.offsetParent,u=c&&c!==document.body?window.getComputedStyle(c):{},l=parseFloat(u.borderLeft)||0,s=parseFloat(u.borderTop)||0;n+=s+a.offsetTop-a.scrollTop,r+=l+a.offsetLeft-a.scrollLeft}return{x:r,y:n,width:o,height:i,top:n,left:r}}function Fe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n=We(t,e);return[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}]}function qe(t,e){var n=Se(e);n.e=0,n.f=0;var r=Se(t);r.e=0,r.f=0;var o=We(e),i=Fe(t).map((function(t){return Ne(t,r)})),a=Ne({x:o.x,y:o.y},n);return i.forEach((function(t){t.x=t.x-a.x,t.y=t.y-a.y})),i}function Ue(t){if(!t)return[];return t instanceof Ie?t.nodes:[].concat(t)}function Ze(t){if(t instanceof Ie)return t.remove();Mt(t.remove)?t.remove():t.parentElement&&t.parentElement.removeChild(t)}function Ke(t){Ue(t).forEach(Ze)}function Ye(t){if(t instanceof Ie)return t.empty();for(;t.firstChild;)Ze(t.firstChild)}function Xe(t){Ue(t).forEach(Ye)}function Ge(t,e,n){var r=Ue(t),o=null,i=n;return i&&i instanceof Ie&&(i=i.node()),r.some((function(t){var n=function(t,e,n){for(var r=At(e);t;){if(r.call(null,t))return t;if(t=t.parentElement,n&&("function"==typeof n?Tt(n,null,[t]):n===t))return null}return null}(t,e,i);if(n)return o=n,!0})),o}function Je(t){var e=(t.touches||[])[0];return e&&(t.clientX=t.pageX=e.clientX||e.pageX,t.clientY=t.pageY=e.clientY||e.pageY),t.tourchEvent=!0,t}n(18);var $e=function(t){function e(e){return"".concat(t,"-").concat(e)}return{prefixName:e,prefixClassName:function(t,n){return 1===arguments.length&&(n=t,t=""),n?n.split(/\s+/).map((function(n){return e("".concat(t?t+"-":"").concat(n))})).join(" "):n||""}}},Qe=$e("ky-dom"),tn=(Qe.prefixName,Qe.prefixClassName);function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rn,on=jt("ResizeDataKey");!function(t){t.Top="Top",t.Right="Right",t.Bottom="Bottom",t.Left="Left"}(rn||(rn={}));var an="Vertical",cn="Horizontal",un={enabled:!0,resizing:!1},ln={isResizing:function(){return un.resizing},enable:function(t){return 0===arguments.length?un.enabled:un.enabled=!!t},create:function(){return null}};function sn(t){return t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:document.body}var fn=jt("ResizeElements");function pn(t){if(!t)return null;var e=t.attr(fn);return e||(e=new hn,t.attr(fn,e)),e}var hn=function(){function t(){s()(this,t),this._data={},this._values=[]}return p()(t,[{key:"has",value:function(t){return this._data.hasOwnProperty(t)}},{key:"remove",value:function(t){delete this._data[t],this._resetValues()}},{key:"_resetValues",value:function(){this._values=Object.values(this._data).sort((function(t,e){var n=t&&t[on],r=e&&e[on],o=n&&n.index,i=r&&r.index;return o*=1,i*=1,Number.isNaN(o)&&(o=-99999),Number.isNaN(i)&&(i=-99999),i-o}))}},{key:"get",value:function(t){return this.has(t)?this._data[t]:null}},{key:"put",value:function(t,e){var n=this._data;null!=e?(n[t]=e,this._resetValues()):this.remove(t)}},{key:"values",value:function(){return[].concat(this._values)}},{key:"size",value:function(){return this._values.length}}]),t}();var vn={points:[0,1],getLine:function(t){return{pointA:t._points[this.points[0]],pointB:t._points[this.points[1]]}},getCursorStyle:function(t,e){return ce(this.getCursorOptions(t,e))},getCursorOptions:function(t,e){var n,r;return nn(nn({},this.getLine(t)),{},{color:null===(n=t.resizeOptions)||void 0===n?void 0:n.cursorColor,size:null===(r=t.resizeOptions)||void 0===r?void 0:r.cursorSize},e)},test:function(t){var e=function(t){return(null==t?void 0:t.hitSize)||5}(t.resizeOptions);return se({x:t.clientX,y:t.clientY},this.getLine(t),e)}};function dn(t){return Object.assign(Object.create(vn),t)}var yn=[dn({type:rn.Bottom,group:an,pos:{x:0,y:1},points:[3,2],compute:function(t){return{height:t.my}}}),dn({type:rn.Top,group:an,pos:{x:0,y:-1},points:[0,1],compute:function(t){return{y:t.my}}}),dn({type:rn.Right,group:cn,pos:{x:1,y:0},points:[1,2],compute:function(t){return{width:t.mx}}}),dn({type:rn.Left,group:cn,pos:{x:-1,y:0},points:[0,3],compute:function(t){return{x:t.mx}}})];function mn(t,e){var n={},r={};if(!t)return r;if(t.tx&&(n.tx=t.tx,r.width="".concat(t.width,"px")),t.ty&&(n.ty=t.ty,r.height="".concat(t.height,"px")),t.tw&&(r.width="".concat(t.width,"px")),t.th&&(r.height="".concat(t.height,"px")),t.tx||t.ty)if(e){var o=Te(e);o.e+=t.tx||0,o.f+=t.ty||0,r.transform="".concat(o)}else r.transform="translate3d(".concat(t.tx||0,"px,").concat(t.ty||0,"px,0)");return r}var gn,xn,bn,En,wn,Cn,On,kn,_n,Sn,Rn,An,Mn=(kn=tn("global-resize-render"),_n={showVertex:!1,showBorder:!0},Sn={x:0,y:0},{config:function(t){t&&(_n.showVertex=!!t.showVertex,_n.showBorder=!!t.showBorder)},mount:function(t){!function(){if(!gn){gn=Ve("div").clazz(kn,!0);var t=(xn=gn.append("svg")).append("g");bn=t.append("path"),wn=t.append("rect"),En=t.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle"),Cn=xn.createElement("g");for(var e=0;e<4;e++)Cn.append("circle").attr("r",5)}_n.showVertex&&xn.append(Cn)}(),(t=t||document.body).appendChild(gn.node()),On=function t(e){var n=window.getComputedStyle(e);if(["relative","absolute","fixed"].indexOf(n.position)>=0)return e;var r=e.parentElement;return r?t(r):e}(t);var e=document.documentElement,n=On.getBoundingClientRect(),r=_e(On),o=r.x,i=r.y;Sn.x=(On===e?0:On.scrollLeft)-n.x/(o||1),Sn.y=(On===e?0:On.scrollTop)-n.y/(i||1)},unmount:function(){var t=gn.node();t.parentNode&&t.parentNode.removeChild(t),gn.css({display:"none"}),On=null,_n.showVertex=!1,_n.showBorder=!0,Cn.remove()},apply:function(t){var e=t||{},n=e.className,r=e.style,o=e.points;n&&gn.clazz(n,!0),gn.css(r);var i=0,a=0,c=0,u=0,l=_e(xn.node()),s=l.x,f=l.y,p=Sn.x,h=Sn.y,v="M"+(o=o.map((function(t){return nn(nn({},t),{},{x:t.x/(s||1),y:t.y/(f||1)})}))).map((function(t,e){var n=t.x,r=t.y;0===e?(i=a=n,c=u=r):(i=Math.min(i,n),a=Math.max(a,n),c=Math.min(c,r),u=Math.max(u,r));var o=r+h;return"".concat(n+p," ").concat(o)})).join("L")+"Z";xn.attr("width",a+p+5).attr("height",u+h+5),bn.attr("d",v).css({stroke:_n.showBorder?"":"transparent"});var d=0|ue(o[0],o[1]),y=0|ue(o[1],o[2]),m=p+(i+a)/2|0,g=h+(c+u)/2|0;En.attr("x",m).attr("y",.5+(0|g)).text("".concat(d," * ").concat(y));var x=En.node().getBBox(),b=x.height,E=x.width+6,w=b+2;wn.attr("width",E).attr("height",w).attr("x",m-E/2).attr("y",.5+(g-w/2|0)).attr("rx",w/2).attr("ry",w/2),_n.showVertex?Cn.selectAll("circle").attr("cx",(function(t){return o[t].x+p})).attr("cy",(function(t){return o[t].y+h})).attr("opacity","1"):Cn.selectAll("circle").attr("opacity","0")}}),Tn=(Rn=null,An=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!Rn&&t&&((Rn=document.createElement("div")).className=tn("overlay"),Object.assign(Rn.style,{position:"fixed",zIndex:9999999,left:"0px",top:"0px",right:"0px",bottom:"0px"})),Rn},function(){return{show:function(t){var e=An(),n=t||document.body;e.parentElement!==n&&n.appendChild(e)},hide:function(){var t=An(!1);null!=t&&t.parentElement&&t.parentElement.removeChild(t)}}}),Pn=jt("ResizeEventManager"),jn=tn("resizing-active"),Nn=tn("resize-cursor");function zn(t){var e=(t=t||document.body)[Pn];if(e)return e;e=new Dt({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}}),t[Pn]=e;var n=pn(e),r=function(){return e.getProxyElement()},o=function(t){var n;un.resizing=!1;var o=f.pendingResize,i=r();if(null==i||i.removeAttribute(jn),null===(n=l)||void 0===n||n.hide(),o){var a=o.resizeTarget,c=o.resizeData,u=a.element,s=a.options;if(t.resizeElement=u,Pt(s.onResizeEnd,[t,c]),s.overlay&&s.syncElementResize&&c){var p=mn(c,u);Object.assign(u.style,p)}}!function(t){t.register("touchend:resizeEnd",null),t.register("mouseup:resizeEnd,mouseleave:resizeEnd",null)}(e),f.reset(),Mn.unmount()},i=null,a=function(){var t=new Set,e=r();e.removeAttribute(Nn),t.add(e),n.values().forEach((function(e){var n=e[on],r=s(n);r&&!t.has(r)&&(r.removeAttribute(Nn),t.add(r))}))},c=function(e,n){var o,c,u="";if(i||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("rel","stylesheet")),e.length){var l=r();i.parentElement!==l&&l.appendChild(i)}e.length>1?(e[0].group===an?(o=e[0],c=e[1]):(o=e[1],c=e[0]),u=o.getCursorStyle(n,{rotate:o.pos.y*c.pos.x*45})):e.length>0&&(u=e[0].getCursorStyle(n));if(u){t.setAttribute(Nn,"");var f=s(null==n?void 0:n.resizeOptions);null==f||f.setAttribute(Nn,"")}else a();i.textContent=u?"[".concat(Nn,"]{cursor:").concat(u,";"):""},u=function(t){var e=null,o=[],i=null;return ln.enable()&&n.values().some((function(n){var a=function(t,e){var n={items:[]};if(!ln.enable())return n;var r,o,i,a=He(t),c=e[on];if(!c)return n;if(!(r=c.enabled,o=[t],"function"==typeof r?r.apply(i,o||[]):!!r))return n;var u=c.modes,l=function(t){var e="function"==typeof t?t():t;return e?[].concat(e):[]}(e);if(!l.length)return n;return l.some((function(r){var o=Le(r).bounds();if(!ge(a,{x:o.x-20,y:o.y-20,width:o.width+40,height:o.height+40}))return!1;var i=Re(r),l=i.points,s=i.originPoints,f={clientX:a.x,clientY:a.y,points:s,_points:l,resizeOptions:c},p={},h=yn.filter((function(n){return!!(null==u?void 0:u.some((function(r){return"function"==typeof r?r({e:t,resizeItem:e,type:n.type}):r===n.type})))&&(!(p[n.group]||!n.test(f))&&(p[n.group]=n,!0))}));return h.length>0?(n.items=h,n.options=f,n.resizeTarget={element:r,options:c},!0):void 0})),n}(t,n),c=a.items,u=a.options,l=a.resizeTarget;if(c.length>0){e=l;var s=l.options;return s.selfTrigger?(o=function(t,e){var n=e.element;return Ge(t.native?t.native.target:t.target,(function(t){if(t[on])return!!t}),(function(t){return t===r()}))===n}(t,l)?c:[],i=u,!0):(s.through||function(t,e){var n=Ge(t.native?t.native.target:t.target,(function(t){if(t[on])return!!t}),(function(t){return t===r()}));if(!n)return!0;var o=n[on].index||0;return(e.options.index||0)>=o||!!Ge(e.element,(function(t){if(t===n)return!!t}),(function(t){return t===r()}))}(t,l)?(o=c,i=u):o=[],!0)}})),{resizeTarget:o.length>0?e:null,hitItems:o,options:i}};!function(t){var e=function(){return t.getProxyElement()};t.register("mousedown:resizeStart",e),t.register("touchstart:resizeStart",(function(){return e}),Je)}(e),function(t){var e=function(){return t.getProxyElement()};t.register("mousemove:resize",e),t.register("touchmove:resize",e,Je)}(e);var l=null,s=function(t){return null!=t&&t.cursorElement?"function"==typeof t.cursorElement?t.cursorElement():t.cursorElement:null},f={pendingResize:null,reset:function(){f.pendingResize=null}};return e.on("resizeStart",(function(t){if(ln.enable()){var n=u(t),o=n.resizeTarget;if(o){t.preventDefault(),t.stopPropagation();var i=n.hitItems,a=n.options,s=o.options,p=o.element;if(0!==i.length){if(t.resizeElement=p,s.cursorOverlay&&(l=l||(l=Tn())).show(e.getProxyElement()),Pt(s.onResizeStart,[t]),!t.cancel){var h=Me(He(t),p),v=Pe(h.ctm).scale,d=He(t);f.pendingResize={resizeTarget:o,hitItems:i,clientInfo:h,originWidth:p.offsetWidth,originHeight:p.offsetHeight,startEventPosition:d,lastEventPosition:d,scale:v||{x:1,y:1}},c(i,a),function(t){var e=function(){return t.getProxyElement()};t.register("mouseleave:resizeEnd,mouseup:resizeEnd",e),t.register("touchend:resizeEnd",e,Je)}(e),Mn.config({showVertex:s.overlayVertex,showBorder:!1!==s.overlayBorder}),Mn.mount(r());var y=r();null==y||y.setAttribute(jn,""),un.resizing=!0}}else f.reset()}}})),e.on("resize",(function(t){if(ln.enable()){var e=He(t),n=f.pendingResize;if(n){t.preventDefault();var r=n.resizeTarget,i=r.element,l=r.options;if(t.resizeElement=i,Pt(l.onBeforeResize,[t,[e]]),t.cancel)o(t);else{var s=n.lastEventPosition,p=0,h=0;if(s&&(p=e.x-s.x,h=e.y-s.y),n.lastEventPosition=e,0!==p||0!==h){var v=n.originWidth,d=n.originHeight,y=n.scale,m=n.hitItems,g=n.clientInfo,x=g.points,b=g.position,E=g.ctm,w=Ae(He(t),g),C={tx:0,ty:0,tw:0,th:0,x:x[0].x,y:x[0].y,dx:p,dy:h,width:0,height:0,originWidth:v,originHeight:d,modes:{}},O={mx:w.x-b.x,my:w.y-b.y},k={},_={},S=new Set,R=new Set;m.forEach((function(t){var e=t.compute(O),n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o,a=e.width,c=void 0===a?0:a,u=e.height,l=void 0===u?0:u;C.tx+=r/y.x,C.ty+=i/y.y,C.tw+=c/y.x,C.th+=l/y.y,k[t.group]=!0,_[t.type]=!0,t.points.forEach((function(e){t.group===cn?S.add(e):R.add(e)}))})),C.width=v+C.tw-C.tx,C.height=d+C.th-C.ty,C.modes=_,Pt(l.onResize,[t,C]),t.cancel&&o(t),n.resizeData=C,E.e=E.f=0;var A;if((l.overlay||l.showResizeInfo)&&(A=x.map((function(t,e){var n={x:t.x,y:t.y};if(!S.has(e)&&!R.has(e))return n;var r=Ne({x:S.has(e)?O.mx/y.x:0,y:R.has(e)?O.my/y.y:0},E),o=r.x,i=r.y;return n.x+=o,n.y+=i,n})),Mn.apply({className:l.overlayClassName,points:A,style:{display:"block"}})),!l.overlay&&l.syncElementResize){var M=mn(C,i);Object.assign(i.style,M)}}}}else{var T=u(t),P=T.hitItems,j=T.options;c(P,j)}}else a()})),e.on("resizeEnd",(function(t){o(t)})),e.mount(t),e}function Bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ln={index:0,hitSize:5,selfTrigger:!1,through:!1,enabled:!0,onResizeStart:null,onResize:null,onResizeEnd:null,syncElementResize:!1,overlay:!0,overlayClassName:"",overlayVertex:!1,modes:[rn.Top,rn.Bottom,rn.Left,rn.Right],autoDestroyEventManager:!0},Dn=1;ln.create=function(){var t,e,n=null,r=Dn++,o=In({},Ln);function i(){if(n){var e=pn(n);if(e.get(r)===t)return;t&&e.put(r,t)}}return{apply:function(t,e){this.updateOptions(e),this.updateResizeItem(t)},updateResizeItem:function(e){e!==t&&(t&&delete t[on],(t=e)[on]=o,i())},updateOptions:function(t){if(!n||t&&t!==e){e=t,Object.assign(o,t);var a=sn(o.container);if(o.container=a,o.overlayContainer=sn(o.overlayContainer||a),n){if(n.getProxyElement()!==a)pn(n).remove(r),n=zn(a),i()}else n=zn(a)}},destroy:function(){if(n){var i=pn(n);t=null,e=null,o=In({},Ln),i.remove(r),o.autoDestroyEventManager&&0===i.size()&&function(t){var e=t.getProxyElement();t.unmount(),e&&delete e[Pn]}(n),n=null}}}},Object.freeze(ln);var Vn=ln,Hn=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},Wn=jt("EventManager"),Fn=jt("RotationTargetOpt"),qn=function(t,e){var n=t.attr(Fn);if(n||t.attr(Fn,n=[]),1===arguments.length)return n;if("function"!=typeof e)throw new TypeError("invalid param type!");return-1===n.indexOf(e)&&n.push(e),n};function Un(t){var e,n=("string"==typeof(e=t.container)?document.querySelector(e):"function"==typeof e?e():e)||document.body,r=n[Wn];if(!r){var i={options:null,startPos:null,lastPos:null,center:null,reset:function(){i.options=null,i.startPos=null,i.lastPos=null,i.center=null}};r=n[Wn]=new Dt({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}});var a=null;return function(t){t.register("mousedown:rotateStart",(function(t){return t.target})),t.register("touchstart:rotateStart",(function(t){return t.target}),o.simulateMouseDownEvent)}(r),r.on("rotateStart",(function(t){var e=qn(r),c=null;if(Ge(t.target,(function(n){return e.some((function(e){var r=e(t,n);if(r)return c={options:r,node:n},!0}))}),(function(t){return t===n})),c){t.preventDefault();var u=c,l=u.options,s=u.node;i.options=l,i.startPos=He(t),i.lastPos=i.startPos,i.center="function"==typeof l.center?l.center(t,s):l.center,function(t){var e=function(){return t.getProxyElement()};t.register("mousemove:rotating",e),t.register("touchmove:rotating",e,o.simulateMouseDownEvent),t.register("mouseup:rotateEnd,mouseleave:rotateEnd",e),t.register("touchend:rotateEnd",e,o.simulateMouseDownEvent)}(r),l.cursorOverlay&&(a=a||(a=Tn())).show(r.getProxyElement()),Pt(l.onRotateStart,[t,s])}})),r.on("rotating",(function(t){t.preventDefault();var e=He(t),n=i.options,r=i.lastPos,o=i.center,a=function(t,e){var n=Hn(t)||1,r=Hn(e)||1;t[0]=t[0]/n,t[1]=t[1]/n,e[0]=e[0]/r,e[1]=e[1]/r;var o=Math.min(1,t[0]*e[0]+t[1]*e[1]),i=180*Math.acos(o)/Math.PI;return i>90&&(i=180-i),(e[1]>0?1:-1)*(e[0]>t[0]?-1:1)*i}([r.x-o.x,r.y-o.y],[e.x-o.x,e.y-o.y]);i.lastPos=e,Pt(n.onRotate,[t,{angle:a}]),t.cancel&&c(t)})),r.on("rotateEnd",(function(t){c(t)})),r.mount(n),r}function c(t){var e;!function(t){t.register("mousemove:rotating",null),t.register("touchmove:rotating",null),t.register("mouseup:rotateEnd,mouseleave:rotateEnd",null),t.register("touchend:rotateEnd",null)}(r);var n=i.options;null===(e=a)||void 0===e||e.hide(),n&&Pt(n.onRotateEnd,[t])}}var Zn={mount:function(t){var e=t.container,n=t.getOptions,r=Un({container:e});qn(r,n);var o=r.getProxyElement();return function(){var t=qn(r),e=t.indexOf(n);e>=0&&t.splice(e,1),0===t.length&&function(t){var e=t[Wn];e&&(e.unmount(),delete t[Wn])}(o)}}},Kn=n(11),Yn=n.n(Kn);function Xn(t,e){return"string"==typeof t?(e||document).querySelector(t):"function"==typeof t?t():t}function Gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $n={scaleEnabled:!0,dragEnabled:!0},Qn={dragEnabled:!0,scaleEnabled:!0,maxZoom:10,minZoom:.01,contextZoom:void 0};function tr(t,e){var n=t.canvasElement,r=t.zoomElement,o=t.zoomObj,i=t.scale,a=t.zoomPoint;e=Object.assign({},Qn,e);var c=He(a,r),u=n.position(),l=r.relativePosition(n);o.scale*i>e.maxZoom?i=e.maxZoom/o.scale:o.scale*i<e.minZoom&&(i=e.minZoom/o.scale);var s=e.contextZoom||_e(r.node().parentNode),f=function(t){return t&&"object"===Ot()(t)?{x:t.x||1,y:t.y||1}:{x:t||1,y:t||1}}(s="function"==typeof s?s():s),p=f.x,h=f.y,v=l.x-o.tx*p,d=l.y-o.ty*h,y=i,m=a.x-c.x*y-v*y-u.x,g=a.y-c.y*y-d*y-u.y;return o.tx=m/p,o.ty=g/h,o.scale*=i,o}function er(t,e,n){var r=n.zoomElement,o=e.getProxyElement();return r?Xn(r):o}var nr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"function"==typeof t?t.apply(void 0,Yn()(e)):!!t},rr=function(){function t(e){s()(this,t),this.zoomState={tx:0,ty:0,scale:1},this.options=Jn(Jn({},Qn),{},{passive:!1}),Object.assign(this.options,e),this.eventManager=new Dt(this.options),this.initEvents()}return p()(t,[{key:"syncZoomState",value:function(t){if(0===arguments.length)return Jn({},this.zoomState);Object.assign(this.zoomState,t)}},{key:"syncOptions",value:function(t){if(0===arguments.length)return Jn({},this.options);Object.assign(this.options,t)}},{key:"mount",value:function(t){this.eventManager.mount(Xn(t))}},{key:"initEvents",value:function(){var t=this.eventManager,e=function(){return t.getProxyElement()},n=this.options,r=this.zoomState,o={startPos:null,moved:!1,zoomElement:null,reset:function(){o.startPos=null,o.moved=!1,o.zoomElement=null}},i=function(e,n){return Ge(e.target,(function(t){if(t){var e,r=null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"data-zoom-ignore");if(!r)return;return!!(r=+r&n)}}),(function(e){return e===t.getProxyElement()}))},a=function(e,n){if(e){var r=[].concat(e);return!!Ge(n.target,(function(t){return r.some((function(e){return n=t,"function"==typeof(r=e)?!!r(n):"string"==typeof r?n.matches(r):!!r&&r===n;var n,r}))}),(function(e){return e===t.getProxyElement()}))}return!1};t.register("mousedown:dragStart",(function(e){if(2!==e.button&&!i(e,1)&&!a(n.dragExcludes,e)&&$n.dragEnabled&&nr(n.dragEnabled,[e]))return t.getProxyElement()})),t.register("mousemove:dragMove mouseup:dragEnd mouseleave:dragEnd",(function(){return t.getProxyElement()})),t.on("dragStart",(function(r){if(Pt(n.onZoomDragStart,[r]),r.cancel)Pt(n.onZoomDragEnd,[r]);else{var i=er(e(),t,n);o.startPos=He(r,i),o.zoomElement=i}})),t.on("dragMove",(function(t){if(o.startPos)if($n.dragEnabled){o.moved=!0;var e=o.zoomElement,i=o.startPos,a=He(t),c=Le(e).position(),u=a.x-i.x,l=a.y-i.y,s=r.tx||0,f=r.ty||0;s+=u-c.x,f+=l-c.y;var p=Jn({},r);p.tx=s,p.ty=f,Pt(n.onZoomDragMove,[t,Jn(Jn({},p),{},{scale:p.scale||1})]),Pt(n.onZoomChange,[t,Jn(Jn({},p),{},{scale:p.scale||1})]),t.cancel?(o.reset(),Pt(n.onZoomDragEnd,[t])):Object.assign(r,p)}else o.reset()})),t.on("dragEnd",(function(t){o.reset(),Pt(n.onZoomDragEnd,[t])})),t.register("wheel:scale",(function(e){if(!i(e,2)&&!a(n.scaleExcludes,e)&&$n.scaleEnabled&&nr(n.scaleEnabled,[e]))return t.getProxyElement()})),t.on("scale",(function(o){Pt(n.onZoomScaleStart,[o,Jn({},r)]);var i=Le(er(e(),t,n)),a=Le(function(){var r=n.canvasElement,o=t.getProxyElement();return r?"function"==typeof r?r():"string"==typeof r?e().querySelector(r):o:o}()),c=function(t){var e=-t.deltaY;return 1===t.deltaMode?.05*e:e*(t.deltaMode?1:.01)}(o),u=Math.pow(2,c),l=tr({canvasElement:a,zoomElement:i,zoomObj:{tx:r.tx||0,ty:r.ty||0,scale:r.scale||1},scale:u,zoomPoint:o},n);o.cancel||Object.assign(r,l),o.cancel||(Pt(n.onZoomScale,[o,Jn({},r)]),Pt(n.onZoomChange,[o,Jn({},r)])),o.cancel||t.getProxyElement()===document.body&&n.passive||o.preventDefault()}))}},{key:"destroy",value:function(){this.eventManager.unmount()}}]),t}(),or={create:function(t){return new rr(t)},dragEnable:function(t){return 0===arguments.length?$n.dragEnabled:$n.dragEnabled=!!t},scaleEnable:function(t){return 0===arguments.length?$n.scaleEnabled:$n.scaleEnabled=!!t}},ir={ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",shift:"shiftKey"};var ar={assKeys:Object.values(ir),matchKey:function(t,e){return!!e.key&&(e.assKeys.every((function(e){return t[e]}))&&String(e.key).toLowerCase()===String(t.key).toLowerCase())},parseKeyString:function(t){var e=[];return t?((t=String(t).trim()).split(/\s*\|\s*/).forEach((function(t){var n={assKeys:[],key:void 0};t.split(/\s*\+\s*/).forEach((function(t){var e=ir[t.toLowerCase()];e?-1===n.assKeys.indexOf(e)&&n.assKeys.push(e):n.key=t})),e.push(n)})),e):e}};function cr(){return O.createElement(q)}function ur(t){var e=O.createElement(N);return t&&(e.textContent=t),e}var lr=new(function(){function t(){s()(this,t)}return p()(t,[{key:"emptyNode",value:function(t){for(;t.firstChild;)this.removeNode(t.firstChild)}},{key:"removeNode",value:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"appendNode",value:function(t,e){e&&t.appendChild(e)}},{key:"unshiftNode",value:function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}},{key:"replaceNode",value:function(t,e){var n=null==e?void 0:e.parentNode;n&&n.replaceChild(t,e)}},{key:"insertNodeBefore",value:function(t,e){var n=null==e?void 0:e.parentNode;n&&n.insertBefore(t,e)}},{key:"insertNodeAfter",value:function(t,e){var n=null==e?void 0:e.parentNode;if(e&&n){var r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)}}}]),t}());function sr(t){return t&&t.nextElementSibling}function fr(t){lr.removeNode(t)}function pr(t){lr.emptyNode(t)}function hr(t,e){lr.insertNodeAfter(t,e)}function vr(t){return!("string"==typeof t?t:t.textContent||"")}function dr(t,e,n){for(var r=t.firstChild,o=e||document.createDocumentFragment();r;){var i=r.nextSibling;if(n&&n(r))r=i;else{if(3===r.nodeType){var a=r.textContent;if(a){var c=ur();c.textContent=a,o.appendChild(c)}}else 1===r.nodeType&&o.appendChild(r);r=i}}return o}function yr(t){_r(t.startElement.parentElement,{range:t,match:Wr})}function mr(t,e){var n=e||{},r=n.style,o=n.attrs;if(r){var i=xr(r);t.setAttribute("style",i)}o&&Object.keys(o).forEach((function(e){var n=o[e];t.setAttribute(e,n)}))}var gr={toString:function(){var t=this,e=[];return Object.keys(t).sort().forEach((function(n){var r=t[n];r&&e.push("".concat(n,":").concat(r))})),e.join(";")}};function xr(t){var e=Object.create(gr);return t&&Object.assign(e,t),e}function br(t){return t?Object.keys(t).reduce((function(e,n){var r=t[n];return e[n=n.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))]=r,e}),{}):t}function Er(t,e){return t.getAttributeNames().forEach((function(n){var r=t.getAttribute(n)||"";e.setAttribute(n,r)}))}function wr(t,e){var n=Object.create(gr);return t?("string"!=typeof t&&t.getAttribute&&(t=t.getAttribute("style")),t?t.split(/\s*;\s*/).reduce((function(t,n){var r=n.split(/\s*:\s*/),o=r[0];return/\/\*/.test(o)||e&&!e.hasOwnProperty(o)||(t[o]=r[1]),t}),n):n):n}var Cr={style:function(t,e){return e=e||"",!(!(t=t||"")&&e||!e&&t)&&function(t,e){if(t&&!e||!t&&e)return!1;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}(t=wr(t),e=wr(e))}};function Or(t,e){var n=t.getAttributeNames(),r=e.getAttributeNames();return t.tagName===e.tagName&&(["style","class"].forEach((function(t){-1===n.indexOf(t)&&n.push(t),-1===r.indexOf(t)&&r.push(t)})),n.sort(),r.sort(),n.length===r.length&&n.every((function(n,o){if(n!==r[o])return!1;var i=t.getAttribute(n),a=e.getAttribute(n);return Cr.hasOwnProperty(n)?Cr[n](i,a):i===a})))}function kr(t,e){if(t){var n=Array.prototype.slice.call(t.children),r=e.match,o=e.range,i=void 0===o?{}:o,a=function(t){return r(t)&&!O.isElementInstanceOf(t,Y)};n.forEach((function(t){if(a(t)){var e=t.previousElementSibling,n=t.nextElementSibling,r=a(e),o=a(n);vr(t)&&(r||o)&&(fr(t),i.startElement===t&&(i.startElement=r?e:n,i.startOffset=r?e.textContent.length:0),i.endElement===t&&(i.endElement=r?e:n,i.endOffset=r?e.textContent.length:0))}}))}}function _r(t,e){if(t)for(var n=e.match,r=e.range,o=void 0===r?{}:r,i=Array.prototype.slice.call(t.children),a=null,c=i.length,u=0;u<c;u++){var l=i[u];if(n(l))if(a)if(Or(a,l)||vr(l)&&(Wr(l.previousElementSibling)||Wr(l.nextElementSibling))){var s=a.textContent||"",f=l.textContent;a.textContent=s+f,fr(l),o.startElement===l&&(o.startElement=a,o.startOffset+=s.length),o.endElement===l&&(o.endElement=a,o.endOffset=s.length+f.length)}else a=l;else a=l;else a=null}}function Sr(t,e){for(var n=e.previousElementSibling;n;){if(Wr(n))return!1;n=n.previousElementSibling}return!0}function Rr(t){if(O.isElementInstanceOf(t,V)&&0===t.childElementCount){var e=ur();return t.appendChild(e),t}}function Ar(t){if(t||(t=O.createContainer()),0===t.childElementCount){var e=O.createElement(q);Rr(e),t.appendChild(e)}return t}function Mr(t,e){if(!t||3===t.nodeType)return null;if(e(t))return t;if(Kr(t))return null;for(var n=t.lastElementChild,r=Mr(n,e);n&&!r;)r=Mr(n=n.previousElementSibling,e);return r}function Tr(t,e){if(!t||3===t.nodeType)return null;if(e(t))return t;if(Kr(t))return null;for(var n=t.firstElementChild,r=Tr(n,e);n&&!r;)r=Tr(n=n.nextElementSibling,e);return r}function Pr(t){return Tr(t,(function(t){return Wr(t)}))}function jr(t,e,n,r){for(var o,i="function"==typeof(o=n)?o:function(t){return o===t},a=t,c=-1===r?"previousElementSibling":"nextElementSibling";a&&!a[c];){if(i(a))return null;a=a.parentElement}for(a=a&&a[c];a&&!i(a);){var u=-1===r?Mr(a,e):Tr(a,e);if(u)return u;var l=a.parentElement;if(!(a=a[c])){for(;l&&!i(l)&&!l[c];)l=l.parentElement;a=l&&l[c]}}}function Nr(t,e,n){return jr(t,e,n,1)}function zr(t,e,n){return jr(t,e,n,-1)}function Br(t){return Mr(t,(function(t){return Wr(t)}))}function Ir(t,e){return Dr(t,e,(function(t){return O.isElementInstanceOf(t,V)}))}function Lr(t,e){return Dr(t,e,(function(t){return O.isElementInstanceOf(t,q)}))}function Dr(t,e,n){for(;t&&t!==e&&!n(t);)t=t.parentNode;if(n(t))return t}function Vr(t){var e=function(t){t&&0===t.childElementCount&&fr(t)},n=t.start,r=t.end,o=t.containStart,i=t.containEnd,a=t.container;if(n)if(r){var c="function"==typeof r?r:function(t){return t===r},u=a?function(t){return t===a}:function(){return!1},l=n,s=l.parentNode,f=l.previousSibling;if(o){var p=n.contains(r);if(fr(n),p)return}if(!f){for(;l&&!l.previousSibling&&!u(l);){var h=l===n?s:l.parentNode;l!==n&&e(l),l=h}f=l&&l.previousSibling,e(l)}if(!c(n))for(var v=function t(n){if(c(n))return i&&fr(n),!0;if(1===n.nodeType&&!Kr(n)){for(var r,o=n.lastChild;o;){var a=o.previousSibling;if(!0===(r=t(o)))break;o=a}return e(n),r}fr(n)};f&&!u(f);){if(c(f)){i&&fr(f);break}var d=f.parentNode,y=f.previousSibling;if(!0===v(f))break;if(!(f=y)){for(;d&&!d.previousSibling&&!u(d);){var m=d.parentNode;e(m),d=d.parentNode}f=d&&d.previousSibling,e(d)}}}else o&&fr(n)}function Hr(t){return O.isElementInstanceOf(t,N)&&!t.hasAttribute("disabled")}function Wr(t){return Hr(t)&&!O.isHelpElement(t)}function Fr(t){return O.isElementInstanceOf(t,R)||Wr(t)}var qr=function(t,e){if(!t||t.collapsed)return!0;var n=t.startElement,r=t.endElement;return function(t,e,n){return Dr(t,n,(function(t){return O.isElementInstanceOf(t,E)}))===Dr(e,n,(function(t){return O.isElementInstanceOf(t,E)}))}(n,r,e)&&!function(t,e,n){return Dr(t,n,(function(t){return O.isElementInstanceOf(t,it)}))!==Dr(e,n,(function(t){return O.isElementInstanceOf(t,it)}))}(n,r,e)};function Ur(t){for(var e=t.firstElementChild;e;){var n=e.nextElementSibling;if(O.isHelpElement(e))e=n;else{if(!Fr(e))return!1;if(!Wr(e))return!1;if(e.textContent)return!1;e=n}}return!0}function Zr(t){return!!function(t){return O.isElementInstanceOf(t,it)}(t)&&!t.hasAttribute(it.InnerHTMLAttr)}function Kr(t){return(!t||1===t.nodeType)&&(Zr(t)||O.isHelpElement(t))}function Yr(t,e){var n=t.target,o="true"===n.contentEditable,i=!!r.findUpUtil(t.target.parentElement,(function(t){return"true"===t.contentEditable&&(o=!0),Zr(t)}),(function(t){return t===e}));return i=i&&(o||["input","textarea"].indexOf(String(n.tagName).toLowerCase())>=0)}function Xr(t){for(var e=t.firstChild,n=null;e;){if(3===e.nodeType&&(n=e).textContent)return n;e=e.nextSibling}return n}function Gr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parentElement;if(r){var o=[].slice.call(r.childNodes),i=o.indexOf(e);i>=0&&(n?t.setEnd(r,i):t.setStart(r,i))}}function Jr(t){var e=document.createRange(),n=t.startElement,r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,c=t.endElement;return Hr(n)&&(r=n.textContent?Xr(n):null),r?(3===r.nodeType&&(i=Math.min(r.textContent.length,i)),e.setStart(r,i)):n&&Gr(e,n),Hr(c)&&(o=c.textContent?Xr(c):null),o?(3===o.nodeType&&(a=Math.min(o.textContent.length,a)),e.setEnd(o,a)):c&&Gr(e,c,!0),e}var $r=function(){function t(e,n){s()(this,t),this.startOffset=-1,this.endOffset=-1,this.isTextEmpty=!1,this.editor=e,n&&this.init(n)}return p()(t,[{key:"init",value:function(t){var e,n,r=t.startContainer,o=t.startOffset,i=t.endContainer,a=t.endOffset;if(r)if(3===r.nodeType)e=r.parentElement;else if(1===r.nodeType){var c=r.childNodes[o];if(Wr(c)){if(c.firstChild)r=c.firstChild;else{var u=document.createTextNode("");c.appendChild(u),r=u}e=c,o=0}else e=r}if(i)if(3===i.nodeType)n=i.parentElement;else if(1===i.nodeType){var l=i.childNodes[a];if(Wr(l)){if(l.firstChild)i=l.firstChild;else{var s=document.createTextNode("");l.appendChild(s),i=s}a=(n=l).textContent.length}else n=i}this.startContainer=r,this.startOffset=o,this.endContainer=i,this.endOffset=a,this.startElement=e,this.endElement=n}},{key:"new",value:function(e){return new t(this.editor,e)}},{key:"collapsed",get:function(){return!this.startElement&&!this.startContainer||!this.endElement&&!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},{key:"extractContents",value:function(){return Jr(this).extractContents()}},{key:"cloneContents",value:function(){return Jr(this).cloneContents()}},{key:"equals",value:function(t){var e=this;return!!t&&["startContainer","startOffset","endContainer","endOffset","startElement","endElement"].every((function(n){return e[n]===t[n]}))}},{key:"getNativeRange",value:function(){return Jr(this)}},{key:"select",value:function(){if(this.collapsed)return this.editor.cursor.update(this.getNativeRange()),void this.editor.events.emit("internalSelectionchange");this.editor.cursor.update(null),function(t){t instanceof $r&&(t=Jr(t));var e=document.getSelection();e.removeAllRanges(),e.addRange(t)}(this.getNativeRange())}}],[{key:"removeAllRanges",value:function(t){var e;t.cursor.isActive()?t.cursor.update(null):null===(e=document.getSelection())||void 0===e||e.removeAllRanges()}},{key:"current",value:function(e){var n=document.getSelection();if(e.cursor.isActive()){var r=e.cursor.getRange();return new t(e,{startContainer:null==r?void 0:r.startContainer,startOffset:null==r?void 0:r.startOffset})}if(n.rangeCount>0){var o=n.getRangeAt(0);if(!o.collapsed)return new t(e,o=function(t){var e=t.startContainer,n=t.endContainer,r=t.startOffset,o=t.endOffset;if(-1===t.compareBoundaryPoints(Range.START_TO_END,t)){var i=e;e=n,n=i,i=r,r=o,o=i,(t=document.createRange()).setStart(e,r),t.setEnd(n,o)}return t}(o))}return null}}]),t}(),Qr=function(){function t(e,n){s()(this,t),this.index=0,this.actions=e,this.callback=n}return p()(t,[{key:"isFinished",value:function(){var t=this.actions||[];return this.index>=t.length}},{key:"execute",value:function(t){var e=this,n=this.actions||[];if(this.isFinished())this.callback&&this.callback();else{var r={next:function(t){e.index++,e.execute(t)}};n[this.index].execute(r,t)}}}],[{key:"newAction",value:function(t,e){var n={execute:t};return"number"==typeof e&&(n.priority=e),n}}]),t}();var to=function(){function t(){s()(this,t),this._data=Object.create(null)}return p()(t,[{key:"add",value:function(t,e){var n=this._data[t]||(this._data[t]=[]);-1===n.indexOf(e)&&(n.push(e),function(t){t.sort((function(t,e){return(t.priority||0)-(e.priority||0)}))}(n))}},{key:"remove",value:function(t,e){var n=this._data[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},{key:"execute",value:function(t,e,n){var r=this._data[t],o=n?function(t){try{n(t)}catch(t){console.error(t)}}:null,i=new Qr(r,o);try{i.execute(e)}catch(t){o&&o(t),console.error(t)}}}]),t}(),eo=n(12),no=n.n(eo),ro=n(9),oo=n.n(ro);function io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var ao=O.getElementType(V),co=function(t){d()(n,t);var e=io(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=ao,r}return p()(n,[{key:"isElementMatched",value:function(t,e){return e?_()(x()(n.prototype),"isElementMatched",this).call(this,t,e):n.isElementType(t)}}],[{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,V)}},{key:"createElement",value:function(){return ao.create()}}]),n}(gt);function uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var lo=new W,so=function(t){d()(n,t);var e=uo(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=lo,r}return p()(n,[{key:"isElementMatched",value:function(t,e){return e?_()(x()(n.prototype),"isElementMatched",this).call(this,t,e):n.isElementType(t)}},{key:"extractContentNodes",value:function(t,e){return dr(t,e)}},{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,W)}}],[{key:"createElement",value:function(){return lo.create()}},{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,W)}}]),n}(co);function fo(t){return Promise.resolve().then(t)}var po=function(t){var e=t-1+97,n=0;return e>122&&(n=e-122,e=122),String.fromCharCode(e)+(n>0?String(n):"")},ho=[function(t){return"".concat(t,".")},function(t){return"(".concat(t,").")},function(t){return"[".concat(t,"].")}],vo=[function(t){return String(t)},function(t){return po(t).toUpperCase()},po],yo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e%(vo.length*ho.length),r=n/ho.length|0,o=n%ho.length,i=vo[r],a=ho[o];return a(i(t))},mo=[function(){return"●"},function(){return"○"},function(){return"■"},function(){return"□"},function(){return"◆"},function(){return"◇"},function(){return"▶"},function(){return"▷"},function(){return"★"},function(){return"☆"},function(){return"☀"},function(){return"☼"}],go=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e%mo.length,r=n%mo.length,o=mo[r];return o()};function xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var bo=Array.prototype.slice,Eo=O.getElementType(Z),wo=new Y,Co=O.getElementType(tt),Oo=null,ko=new Set,_o=function(t){for(var e=null==t?void 0:t.firstElementChild,n=[];e;)if(O.isElementInstanceOf(e,Z))if(e.hasAttribute("block"))e=e.nextElementSibling;else{var r=e.getAttribute("type")||"ul",o=+(e.getAttribute("level")||0);n.length=o+1;var i=n[+o]||(n[+o]={index:1,type:"ul"});r!==i.type&&(i.index=1),i.type=r;var a=e.children[0];if(!O.isElementInstanceOf(a,Y)){var c=wo.create();Wr(a)&&Er(a,c),e.insertBefore(c,a),a=c}if("option"===r?a.setAttribute("disabled",""):a.removeAttribute("disabled"),"ol"===r)a.textContent=yo(i.index,o);else if("option"===r){if(0===a.children.length){var u=Co.create();u.setAttribute("ky-editor-checked",""),a.appendChild(u)}}else a.textContent=go(i.index,o);i.index++,e=e.nextElementSibling}else e=e.nextElementSibling,n.length=0},So=function(){var t=no()(oo.a.mark((function t(e){return oo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:if(ko.add(e),!Oo){t.next=5;break}return t.abrupt("return",Oo);case 5:return t.abrupt("return",Oo=fo((function(){Oo=null;var t=Array.from(ko);ko.clear(),t.forEach((function(t){_o(t)}))})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ro=function(t){d()(n,t);var e=xo(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=Eo,r}return p()(n,[{key:"getState",value:function(){var t=this.getRange(),e=this.createState();if(!t.collapsed)return e;var n=t.startElement,r=this.findNearest(n).getAttribute("type");return r&&(e.data={type:r}),e}},{key:"execute",value:function(t){var e,n=this,r=t||{},o=r.type,i=void 0===o?"ul":o,a=r.indent,c=null==t?void 0:t.enabled;"boolean"!=typeof c&&(c=(null===(e=this.getState().data)||void 0===e?void 0:e.type)!==i);var u=this.getRange();if(u.collapsed){var l=u.startContainer,s=u.startOffset,f=Lr(l,this.getContainer());if(f&&So(f).then((function(){var t;null===(t=n.getRange())||void 0===t||t.select()})),c){var p=Ir(l,this.getContainer());if(O.isElementInstanceOf(p,Z)){if(a){var h=p.getAttribute("level")||0;p.setAttribute("level",String(+h+1)),u.select()}else{p.getAttribute("type")!==i&&p.setAttribute("type",i)}return}var v=this.createElement();v.setAttribute("type",i);var d,y=O.isElementInstanceOf(p.parentNode,E);if(bo.call(p.childNodes).forEach((function(t){v.appendChild(t)})),y)p.appendChild(v);else null===(d=p.parentNode)||void 0===d||d.replaceChild(v,p)}else{var m,g=Ir(l,this.getContainer());if(!O.isElementInstanceOf(g,Z))return void u.select();var x=bo.call(g.children),b=co.createElement();x.forEach((function(t){O.isElementInstanceOf(t,Y)||b.appendChild(t)})),null===(m=g.parentNode)||void 0===m||m.replaceChild(b,g)}(u=u.new()).startContainer=l,u.startOffset=s,u.select()}else u.select()}}]),n}(so);Ro.validateElement=So,Ro.validateRange=function(t){if(t){var e=t.startElement,n=t.endElement,r=e.parentElement,o=null==n?void 0:n.parentElement;O.isElementInstanceOf(r,Z)&&Ro.validateElement(r.parentElement),O.isElementInstanceOf(o,Z)&&Ro.validateElement(null==o?void 0:o.parentElement)}};var Ao={type:"backspace",actions:[{execute:function(t,e){var n=e.event,r=e.editor;n.preventDefault(),r.execCommand("backspace"),t.next(e)}},{execute:function(t,e){var n=e.event,r=e.editor.getNormalizedRange();if(Ro.validateRange(r),!r.collapsed){var o,i,a=r,c=a.startElement,u=a.endElement,l=O.isElementInstanceOf(c,Z),s=O.isElementInstanceOf(u,Z);l&&(o=c.parentElement),s&&(i=u.parentElement);var f=t.next(e),p=null;if(o){var h=o.parentElement;0===o.childElementCount&&(fr(o),p=Rr(h))}if(i){var v=i.parentElement;if(0===i.childElementCount){fr(i);var d=Rr(v);p||(p=d)}}return p&&((r=r.new()).startElement=p,r.startOffset=0,r.select()),f}var y=r.startElement,m=r.startOffset,g=r.startContainer,x=y.parentElement;if(Sr(0,y)&&(0===m||vr(g))&&O.isElementInstanceOf(x,Z)){var b=Number(x.getAttribute("level"))||0;if(!x.getAttribute("block"))return n.preventDefault(),x.setAttribute("block","1"),void r.select();if(b)return x.setAttribute("level",String(b-1)),x.removeAttribute("block"),n.preventDefault(),void r.select()}t.next(e)},priority:-1e3},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if((!o||o.collapsed)&&!r.cursor.isActive()&&r.selectState.executeDelete())return void n.preventDefault();t.next(e)},priority:-9999}]},Mo={type:"enter",actions:[{execute:function(t,e){var n=e.editor;e.event.preventDefault(),n.execCommand("enter")}},{execute:function(t,e){t.next(e)},priority:-1e3},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if(o.collapsed&&Wr(o.startElement)){var i=Lr(o.startElement,r.getContainer()),a=i.parentNode;if(O.isElementInstanceOf(a,rt))if(i===a.lastElementChild&&Ur(i))return n.preventDefault(),1===a.childElementCount?(fr(i),a.parentNode.replaceChild(i,a)):hr(i,i.parentNode),void o.select()}t.next(e)},priority:-500},{execute:function(t,e){var n=e.event,r=e.editor.getNormalizedRange();if(Ro.validateRange(r),!r.collapsed)return t.next(e);var o=r.startElement.parentElement;if(O.isElementInstanceOf(o,Z)&&o.hasAttribute("block")&&Ur(o)){var i;n.preventDefault();var a=O.createElement(V);return dr(o,a,(function(t){return O.isElementInstanceOf(Y)})),null===(i=o.parentNode)||void 0===i||i.replaceChild(a,o),void r.select()}return t.next(e)},priority:-600}]},To={type:"tab",actions:[{execute:function(t,e){var n=e.editor;e.event.preventDefault(),n.execCommand("tab")}},{execute:function(t,e){var n=e.editor,r=e.event,o=n.getNormalizedRange();if(o.collapsed){var i=o.startElement,a=o.startOffset;if(O.isElementInstanceOf(i.parentNode,Z)&&O.isElementInstanceOf(i,N)&&Sr(i.parentElement,i)&&(0===a||vr(i)))return n.execCommand("list",{indent:!0,enabled:!0}),void r.preventDefault()}t.next(e)},priority:-9999}]},Po={type:"textInput",actions:[{execute:function(t,e){var n=e.event,r=e.editor,o=e.text;n.preventDefault(),r.execCommand("textInput",o)}}]},jo={type:"delete",actions:[{execute:function(t,e){var n=e.event,r=e.editor;n.preventDefault(),r.execCommand("delete"),t.next(e)}},{execute:function(t,e){var n=e.event,r=e.editor,o=r.getNormalizedRange();if((!o||o.collapsed)&&!r.cursor.isActive()&&r.selectState.executeDelete())return void n.preventDefault();t.next(e)},priority:-9999}]};function No(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var zo={text:"text/ky-text",element:"text/ky-element"},Bo=function(t){d()(n,t);var e=No(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.commandType=mt,t))}return p()(n,[{key:"executeWhileSelectTarget",value:function(t){var e=this.commandManager,n=this.commandManager.editor.selectState,r=n.getTarget();if(r){var o=(t||{}).type;return"cut"===(void 0===o?"copy":o)&&n.executeDelete(),{type:zo.element,text:"",html:e.editor.parser.stringify(r)}}}},{key:"execute",value:function(t){var e=this.getRange();if(null!=e&&e.collapsed){var n=this.executeWhileSelectTarget(t);if(n)return n}if(e){for(var r=(t||{}).type,o=void 0===r?"copy":r,i=this.commandManager.editor.parser,a="cut"===o?e.extractContents():e.cloneContents(),c=a.firstChild,u=[],l=a.textContent;c;){if(3===c.nodeType){var s=ur();s.textContent=c.textContent||"",u.push(i.stringify(s))}else u.push(i.stringify(c));c=c.nextSibling}return{type:zo.text,text:l,html:u.join("")}}}}]),n}(gt);Bo.InternalClipboardTypes=zo;var Io=Bo.InternalClipboardTypes,Lo=function(t,e){var n,r,o,i={html:e.html},a=JSON.stringify(i);null===(n=t.clipboardData)||void 0===n||n.setData("text/plain",e.text),null===(r=t.clipboardData)||void 0===r||r.setData("text/html",e.text),null===(o=t.clipboardData)||void 0===o||o.setData(e.type,a)},Do=function(t,e){var n=t.target;return!!e.contains(n===document.body?document.activeElement:n)&&!Yr(t,e)},Vo={type:"cut",actions:[{execute:function(t,e){var n=e.event,r=e.editor;if(Do(n,r.getWrapper())){n.preventDefault();var o=r.getNormalizedRange();if(qr(o,r.getContainer())){r.saveLog();var i=r.execCommand("clipboard",{type:"cut"});if(i&&(Lo(n,i),fo((function(){r.checkUnmountCustomElements()}))),o){var a=r.newRange();a.startContainer=o.startContainer,a.startOffset=o.startOffset,a.select()}t.next(e)}}}}]},Ho={type:"copy",actions:[{execute:function(t,e){var n=e.event,r=e.editor;if(Do(n,r.getWrapper())){n.preventDefault();var o=r.getNormalizedRange();if(qr(o,r.getContainer())){var i=r.execCommand("clipboard",{type:"copy"});i&&(Lo(n,i),t.next(e))}}}}]},Wo={color:1,"text-decoration":1,"font-weight":1},Fo={address:1,article:1,aside:1,blockquote:1,details:1,p:1,dialog:1,div:1,fieldset:1,figcaption:1,figure:1,footer:1,header:1,nav:1,pre:1,section:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1};var qo=function(){function t(){s()(this,t),this._elementParsers={}}return p()(t,[{key:"registerParser",value:function(t,e){e.connect(this),this._elementParsers[t]=e}},{key:"visit",value:function(t){var e,n=this,r=document.createDocumentFragment();function o(){e=cr(),r.appendChild(e)}var i=function t(i){if(1===i.nodeType||3===i.nodeType)if(O.isValidElement(i))O.isElementInstanceOf(i,q)?r.appendChild(i):(e||o(),e.appendChild(i));else if(1===i.nodeType){var a=i;if(!function(t){var e=String(t.tagName).toLowerCase(),n=wr(t.getAttribute("style"));return!(!n||"block"!==n.display&&"flex"!==n.display)||(!(!Fo[e]||n.display)||void 0)}(a)){var c=n.extractParagraphElements(a);return e||o(),void e.appendChild(c)}e&&Rr(e),o();var u=wr(a.getAttribute("style")).toString();u&&e.setAttribute("style",u);for(var l=a.firstChild;l;){var s=l.nextSibling;t(l),l=s}}else{e||o();var f=i.textContent;if(f){var p=ur(f);e.appendChild(p)}}};if(1===t.nodeType&&"body"===t.tagName.toLowerCase())for(var a=t.firstChild;a;){var c=a.nextSibling;i(a),a=c}else i(t);return r}},{key:"extractParagraphElements",value:function(t){var e=document.createDocumentFragment(),n=this._elementParsers;return function t(r){if(1!==r.nodeType&&r.textContent){var o=function(t){var e=t.getAttribute("style");if(e)return e=wr(e,Wo)}(r.parentNode),i=ur(r.textContent),a=null==o?void 0:o.toString();return a&&i.setAttribute("style",a),void e.appendChild(i)}var c=r,u=String(c.tagName).toLowerCase(),l=n[u];if(l){var s=l.parse(c);if(s){var f=Wr(s);!f&&Wr(e.lastElementChild)&&e.appendChild(O.createElement(N)),e.appendChild(s),f||e.appendChild(O.createElement(N))}}else for(var p=c.firstChild;p;)t(p),p=p.nextSibling}(t),e}}]),t}(),Uo=function(){function t(){s()(this,t)}return p()(t,[{key:"parse",value:function(t){}},{key:"connect",value:function(t){this.parserVisitor=t}}]),t}(),Zo=$e("ky-editor"),Ko=Zo.prefixName,Yo=Zo.prefixClassName;function Xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Go=function(t){d()(n,t);var e=Xo(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"parse",value:function(t){var e=document.createDocumentFragment();e.appendChild(function(t){var e=t.src,n=t.title,r=O.createElement(it);r.setAttribute("type","ky-image"),r.setAttribute("src",e),r.setAttribute("title",n),r.className=Yo("image");var o=O.createElement(P);return o.appendChild(r),o.style.width="100px",o.style.height="100px",o}(t));var n=ur();return e.appendChild(n),e}}]),n}(Uo);function Jo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var $o=function(t){d()(n,t);var e=Jo(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"parse",value:function(t){for(var e=function(t){var e=O.createElement(L);return["href","_blank","title"].forEach((function(n){var r=t.getAttribute(n);r&&e.setAttribute(n,r)})),e}(t),n=t.firstChild;n;){var r=n.nextSibling;e.appendChild(this.parserVisitor.extractParagraphElements(n)),n=r}return e}}]),n}(Uo);n(24);function Qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var ti=Array.prototype.slice;function ei(){var t=document.createElement("td"),e=Ar(),n=Pr(e);return t.appendChild(e),{element:t,textElement:n}}function ni(t){for(var e=null,n=document.createElement("tr"),r=0;r<t;r++){var o=ei(),i=o.element,a=o.textElement;i.setAttribute("index",String(r)),e||(e=a),n.appendChild(i)}return{tr:n,firstTextElement:e}}var ri=function(t){d()(n,t);var e=Qo(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-table-resize-marker",r.outputDisabled=!0,t))}return p()(n,[{key:"create",value:function(){var t=_()(x()(n.prototype),"create",this).call(this),e=document.createElement("i");return t.appendChild(e),t}}]),n}(h);ri.tagName="ky-table-resize-marker";var oi=function(t){d()(n,t);var e=Qo(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-table",t))}return p()(n,[{key:"create",value:function(t){var e=t||{},r=e.cols,o=void 0===r?5:r,i=e.rows,a=void 0===i?5:i,c=_()(x()(n.prototype),"create",this).call(this),u=document.createElement("table"),l=100/o,s=document.createElement("colgroup");u.appendChild(s);for(var f=0,p=0;p<o;p++){var h=p===o-1?100-f:l;f+=l;var v=document.createElement("col");v.style.width="".concat(h,"%"),s.appendChild(v)}for(var d=document.createElement("tbody"),y=0;y<a;y++){var m=ni(o).tr;m.setAttribute("index",String(y)),d.appendChild(m)}return u.appendChild(d),c.appendChild(u),c}}]),n}(h);function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}oi.tagName="ky-table",oi.getElementModel=function(t){var e=t.firstElementChild,n=e.firstElementChild,r=n.nextElementSibling;return{table:e,colgroup:n,tbody:r,getCols:function(){return ti.call(n.children)},getRows:function(){return ti.call(r.children)}}},oi.getColWidth=function(t,e){var n=String(t.style.width||"");return n.endsWith("%")?parseFloat(n.substring(0,n.length-1))/100*e:parseFloat(n)};var ai=function(t){d()(n,t);var e=ii(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"parse",value:function(t){var e,n=t.querySelector("colgroup"),r=n?n.children:null,o=t.querySelector("tbody");e=o?o.children:t.querySelectorAll("tr");var i=document.createElement("colgroup"),a=0;if(r)for(var c=0;c<r.length;c++){var u=r[c],l=document.createElement("col");i.appendChild(l);var s=u.getAttribute("width"),f=xr();if(s)f.width="".concat(parseInt(s),"px");else{var p=wr(l.getAttribute("style"));f.width=p.width}a+=parseInt(f.width),l.setAttribute("style",f)}else for(var h=e[0].querySelectorAll("td"),v=0;v<h.length;v++){var d=wr(h[v].getAttribute("style")),y=document.createElement("col");i.appendChild(y);var m=xr();d.width?m.width=d.width:m.width="100px",a+=parseInt(m.width),y.setAttribute("style",m)}var g=document.createElement(oi.tagName),x=document.createElement("table");x.appendChild(i);var b=document.createElement("tbody");x.appendChild(b);var E=xr();E.width="".concat(a,"px"),x.setAttribute("style",E);for(var w=0;w<e.length;w++){var C=e[w].children,k=document.createElement("tr");k.setAttribute("index",String(w)),b.appendChild(k);for(var _=0;_<C.length;_++){var S=C[_],R=S.getAttribute("rowspan"),A=S.getAttribute("colspan"),M=document.createElement("td");if(M.setAttribute("index",String(_)),R&&M.setAttribute("rowspan",R),A&&M.setAttribute("colspan",A),S.firstChild){var T=O.createContainer(),P=this.parserVisitor.visit(S);T.appendChild(P),pr(M),M.appendChild(T)}else{var j=O.createContainer(),N=cr(),z=ur();N.appendChild(z),j.appendChild(N),pr(M),M.appendChild(j)}k.appendChild(M)}}g.appendChild(x);var B=O.createElement(it,{type:"table",innerHTML:!0});return B.appendChild(g),B}}]),n}(Uo);function ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var ui=function(t){d()(n,t);var e=ci(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"parse",value:function(t){var e=ur(t.textContent||"");return e.setAttribute("b","1"),e}}]),n}(Uo);function li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var si,fi=function(t){d()(n,t);var e=li(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"parse",value:function(t){return document.createElement("br")}}]),n}(Uo);function pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var hi,vi=new(function(){function t(){s()(this,t),this.parserVisitor=new qo,this.registerParser()}return p()(t,[{key:"registerParser",value:function(){var t=this.parserVisitor;t.registerParser("img",new Go),t.registerParser("a",new $o),t.registerParser("table",new ai),t.registerParser("strong",new ui),t.registerParser("br",new fi)}},{key:"parse",value:function(t){var e=this.parserVisitor,n=(new DOMParser).parseFromString(t,"text/html");return e.visit(n.body)}}]),t}()),di={execute:function(t,e){var n=e;t.editor.execCommand("textInput",n)}},yi=function(t,e){var n,r,o=vi.parse(e),i=t.event,a=t.editor,c=a.getNormalizedRange(),u=o.firstElementChild;if(u){var l=ep.getElementsByElementType(o,it);fo((function(){l.forEach((function(t){a.mountCustomElement(t)}))}));var s=Br(u),f=t.pasteElements=[];if(u){fr(u);for(var p,h=u.firstElementChild;h;){var v=h.nextElementSibling;f.push(h),p?hr(h,p):a.commandManager.execCommand("input",{element:h,offset:c.startOffset,endOffset:c.startOffset}),p=h,h=v}}var d=c.new();d.startElement=s,d.startOffset=null===(n=s)||void 0===n?void 0:n.textContent.length,d.select(),o.firstElementChild&&a.actionManager.execute("enter",{editor:a,event:i});var y=function(t,e){for(;t&&t!==e&&!O.isElementInstanceOf(t,V);)t=t.parentNode;if(O.isElementInstanceOf(t,V))return t}(a.getNormalizedRange().startElement,a.getContainer()),m=o.lastElementChild;if(m)return y.parentNode.insertBefore(o,y),s=Br(m),d.startElement=s,d.startOffset=null===(r=s)||void 0===r?void 0:r.textContent.length,d.select(),f}},mi={execute:function(t,e){var n=JSON.parse(e);return yi(t,n.html)}},gi={execute:function(t,e){var n=t.editor,r=JSON.parse(e);hi||(hi=document.createElement("div")),hi.innerHTML=r.html;var o=Array.prototype.slice.call(hi.children),i=hi.firstElementChild;if(i){pr(hi);var a=n.getNormalizedRange();return n.commandManager.execCommand("input",{element:i,offset:a.startOffset,endOffset:a.startOffset}),n.mountCustomElement(i.firstElementChild),o}}},xi=(si={},u()(si,Io.text,mi),u()(si,Io.element,gi),u()(si,"text/plain",di),si),bi=[Ao,To,Mo,Po,jo,Vo,Ho,{type:"paste",actions:[{execute:function(t,e){var n=e,r=n.event,o=n.editor;if(o.selectionEnabled()){r.preventDefault();var i=r.clipboardData,a=i.types,c=Object.keys(xi).find((function(t){return a.indexOf(t)>=0}))||"text/plain";o.saveLog();var l=i.getData(c);if(l){var s=xi[c]||di;e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e),s.execute(e,l)}o.checkUnmountCustomElements(),t.next(e)}}},{priotity:1,execute:function(t,e){var n=e.pasteElements;null==n||n.forEach((function(t){(O.isElementInstanceOf(t,Z)||ep.getElementsByElementType(t,Z))&&Ro.validateElement(t.parentElement)})),t.next(e)}}]}];var Ei={apply:function(t){t.onNative("focus",(function(t){})),t.onNative("blur",(function(t){}))}};var wi={apply:function(t){var e,n=function(){var n=t.editor.saveRangeContext();if(!n)return t.editor.selectionEnabled(!1),void t.emit("selectionLost");t.editor.selectionEnabled(!0),t.emit("selectionGet");var r,o,i=(o=n,!(!(r=e)&&o||r&&!o)&&(!r&&!o||["startContainer","endContainer"].every((function(t){return r[t]===o[t]}))));i||(e=n,t.emit("selectionElementsChange")),i&&function(t,e){return!(!t&&e||t&&!e)&&(!t&&!e||["startOffset","endOffset"].every((function(n){return t[n]===e[n]})))}(e,n)||t.emit("selectionchange")};t.on("internalSelectionchange",n),document.addEventListener("selectionchange",(function(){t.emit("internalSelectionchange")})),t.on("unmount",(function(){document.removeEventListener("selectionchange",n)}))}},Ci=(n(25),{fullWidth:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M840.5 184.5v656h-656v-656h656m40-72h-736c-17.673 0-32 14.327-32 32v736c0 17.673 14.327 32 32 32h736c17.673 0 32-14.327 32-32v-736c0-17.673-14.327-32-32-32z" fill="#000000" p-id="7741"></path><path d="M798.91 508L666.23 406.32a6.36 6.36 0 0 0-10.23 5.05V474H368v-62.63a6.36 6.36 0 0 0-10.23-5.05L225.09 508a6.37 6.37 0 0 0 0 10.1l132.68 101.58a6.36 6.36 0 0 0 10.23-5V554h288v60.63a6.36 6.36 0 0 0 10.23 5l132.68-101.58a6.37 6.37 0 0 0 0-10.05z"></path></svg>',rotate:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M326.6 256.5A309.4 309.4 0 0 1 447.7 232v78.1a4 4 0 0 0 6.2 3.3l184.3-120.6a3.9 3.9 0 0 0 0-6.6L453.9 65.6a4 4 0 0 0-6.2 3.3V160C235.8 160.1 64 332 64 544h72a312.5 312.5 0 0 1 190.6-287.5zM760 384H264a40 40 0 0 0-40 40v304a40 40 0 0 0 40 40h496a40 40 0 0 0 40-40V424a40 40 0 0 0-40-40z m-32 312H296V456h432z"></path></svg>'});var Oi=function(t){var e,n=Ci[t];return n?(e=n,(new DOMParser).parseFromString(e,"text/html").body.firstElementChild):null},ki=(n(26),jt("rotate"));var _i={apply:function(t){function e(){t.editor.saveLog()}var n=Ko("select-none"),o=Vn.create(),i=null,a=!1,c={container:document.body,cursorElement:t.editor.getWrapper(),overlay:!0,syncElementResize:!0,overlayVertex:!0,autoDestroyEventManager:!0,cursorOverlay:!0,modes:[function(t){var e=t.type,n=l();if(!n)return!1;var r=n.getAttribute("resize-modes");return!r||-1!==r.indexOf(e)}],onResizeStart:function(e){e.stopPropagation(),t.editor.getContainer().setAttribute(n,"")},onBeforeResize:function(t){a||(e(),a=!0)},onResize:function(){u(!1)},onResizeEnd:function(e,r){if(r){var o=r.modes;u(!0),i=e.resizeElement,t.editor.getContainer().removeAttribute(n),a=!1;var c=i.firstElementChild;c&&((o.Top||o.Bottom)&&(c.style.height="100%"),(o.Left||o.Right)&&(c.style.width="100%")),fo((function(){s(i)}))}}};function u(e){t.editor.selectState.setVisible(e)}function l(){return t.editor.selectState.getTarget()}function s(e){if(e){var n=function(t,e){var n,r,o=document.createElement("div");o.className=Ko("behavior-header");var i=e.firstElementChild,a="";O.isElementInstanceOf(i,tt)?a="checkbox":O.isElementInstanceOf(i,$)?a="hr":O.isElementInstanceOf(i,it)&&(a=(null==i?void 0:i.getAttribute("type"))||"");var c=null===(n=t.config.behavior)||void 0===n||null===(r=n.operations)||void 0===r?void 0:r[a];if(!c||c.includes("fullWidth")){var u=Oi("fullWidth");u.addEventListener("click",(function(){e.style.width="100%"})),o.appendChild(u)}if(!c||c.includes("fullHeight")){var l=Oi("fullWidth");Object.assign(l.style,{transform:"rotate(90deg)",transformOrigin:"center center"}),l.addEventListener("click",(function(){e.style.height="auto"})),o.appendChild(l)}if(!c||c.includes("rotate")){var s=Oi("rotate");s.style.marginRight="-2px",s[ki]=!0,o.appendChild(s)}return o.addEventListener("click",(function(t){t.stopPropagation()})),o}(t.editor,e);t.editor.selectState.setActive(e,n),t.emit("selectStateChange",t.editor,[e]),i=null}}t.register("click:behaviorClick",(function(e){var n=r.findUpUtil(e.target,(function(t){if(O.isElementInstanceOf(t,P))return!!t}),(function(e){return e===t.getProxyElement()}));return n||(i||(t.editor.selectState.setActive(null),void t.emit("selectStateChange",t.editor,[null])))})),t.on("behaviorClick",(function(t){s(t.target)})),o.apply((function(){return l()}),c);var f={logged:!1},p={cursorOverlay:!0,onRotateStart:function(t){var e=l();i=e,f.logged=!1,Vn.enable(!1)},onRotateEnd:function(t){Vn.enable(!0)},onRotate:function(t,n){var o=n.angle;f.logged||(e(),f.logged=!0);var i=l(),a=r.getTransformMatrix(i);a=function(t,e,n){var r=n.x,o=n.y,i=new DOMMatrix;i.translateSelf(r,o);var a=new DOMMatrix;a.rotateSelf(e);var c=new DOMMatrix;return c.translateSelf(-r,-o),t.multiplySelf(i.multiplySelf(a.multiplySelf(c)))}(a,o,{x:i.offsetWidth/2,y:i.offsetHeight/2}),i.style.transform="".concat(a)},center:function(t,e){var n,r=(null===(n=e.parentElement)||void 0===n?void 0:n.parentElement.querySelector(ft.tagName)).getBoundingClientRect();return{x:r.x,y:r.y}}};Zn.mount({container:t.editor.getWrapper(),getOptions:function(t,e){if(function(t){return t&&t[ki]}(e))return p}})}};function Si(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ri(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ri(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ai={apply:function(t){var e=null,n=new MutationObserver((function(n){var r,o=!1,i=Si(n);try{for(i.s();!(r=i.n()).done;){if("attributes"!==r.value.type){o=!0;break}}}catch(t){i.e(t)}finally{i.f()}o&&t.emit("nodeChange",null,[t.editor]),e||(e=fo((function(){e=null,t.emit("change",null,[t.editor])})))}));t.on("didMount",(function(){var e=t.editor.getContainer();n.observe(e,{attributes:!0,childList:!0,subtree:!0})})),t.on("willDestroy",(function(){n.disconnect()}))}};var Mi={apply:function(t){t.on("change",(function(t){}))}};var Ti={apply:function(t){t.register("keydown:shortcutKey",(function(t){if(ar.assKeys.some((function(e){return t[e]})))return t.target})),t.on("shortcutKey",(function(e){t.emitShortcutEvent(e)}))}};var Pi={apply:function(t){t.onNative("paste",(function(e){t.editor.actionManager.execute("paste",{event:e,editor:t.editor})}))}};var ji={apply:function(t){var e=function(e){t.editor.actionManager.execute("cut",{editor:t.editor,event:e})};document.body.addEventListener("cut",e),t.on("unmount",(function(){document.body.removeEventListener("cut",e)}))}};var Ni={apply:function(t){var e=function(e){t.editor.actionManager.execute("copy",{editor:t.editor,event:e})};document.body.addEventListener("copy",e),t.on("unmount",(function(){document.body.removeEventListener("copy",e)}))}},zi=function(t){var e=t.events;e.registerShortcutHandler("Ctrl+Z|Meta+Z",(function(){t.execCommand("log","cancel")})),e.registerShortcutHandler("Ctrl+B|Meta+B",(function(){t.execCommand("bold")})),e.registerShortcutHandler("Ctrl+I|Meta+I",(function(){t.execCommand("italic")}))},Bi=Ko("checked");var Ii={apply:function(t){t.register("click:toggleCheckbox",(function(e){return r.findUpUtil(e.target,(function(t){if(O.isElementInstanceOf(t,tt))return!!t}),(function(e){return e===t.getProxyElement()}))})),t.on("toggleCheckbox",(function(t){var e,n=t.target;(e=n).hasAttribute(Bi)?e.removeAttribute(Bi):e.setAttribute(Bi,"")}))}};function Li(t){var e,n=!1;return function(){return n||(e=t(),n=!0),e}}function Di(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function Vi(t,e){return Object.assign(t.style,{position:"absolute",cursor:"pointer",width:"25px",height:"25px",zIndex:2},e||{}),t}var Hi={apply:function(t){var e=null,n=null,o=function(){var e=document.createElement("div");Object.assign(e.style,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.92)",userSelect:"none",cursor:"pointer",zIndex:1e3});var o=document.createElement("div"),i=function(t){o.style.transform="translate3d(".concat(t.tx,"px,").concat(t.ty,"px,0) scale(").concat(t.scale||1,")")},a=function(){var t={tx:0,ty:0,scale:1};v.syncZoomState(t),i(t)},c=function(t){n=t,p.src=t.src,document.body.appendChild(e)},u=Vi(Di('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M546.942134 511.818772l327.456957-326.128977c9.617355-9.577423 9.648071-25.135361 0.070648-34.751692-9.577423-9.617355-25.137409-9.647048-34.750668-0.070648L512.119795 477.137729 184.520518 150.868479c-9.616331-9.577423-25.176316-9.545683-34.751692 0.070648-9.577423 9.616331-9.545683 25.174268 0.070648 34.751692l327.457981 326.127953-327.457981 326.128978c-9.616331 9.577423-9.647048 25.135361-0.070648 34.751692a24.496456 24.496456 0 0 0 17.41117 7.231702 24.500552 24.500552 0 0 0 17.340522-7.162078L512.119795 546.499816l327.599276 326.26925a24.492361 24.492361 0 0 0 17.340522 7.162078 24.5026 24.5026 0 0 0 17.41117-7.231702c9.577423-9.617355 9.545683-25.175292-0.070648-34.751692L546.942134 511.818772z" fill="#ffffff"></path></svg>'),{right:"20px",top:"20px"});e.appendChild(u);var l=Vi(Di('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z" fill="#ffffff"></path></svg>'),{left:"0px",top:"50%",marginTop:"-10px"});l.addEventListener("click",(function(){var e=zr(n,(function(t){return"ky-image"===t.getAttribute("type")}),(function(e){return e===t.editor.getContainer()}));if(e){a();var r=e.querySelector("img");r&&c(r)}})),e.appendChild(l);var s=Vi(Di('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z" fill="#ffffff"></path></svg>'),{right:"0px",top:"50%",marginTop:"-10px"});s.addEventListener("click",(function(){var e=Nr(n,(function(t){return"ky-image"===t.getAttribute("type")}),(function(e){return e===t.editor.getContainer()}));if(e){a();var r=e.querySelector("img");r&&c(r)}})),e.appendChild(s);var f=function(){fr(e)};u.addEventListener("click",f),Object.assign(o.style,{width:"100%",height:"100%",display:"flex",transformOrigin:"0 0",alignItems:"center",justifyContent:"center"});var p=new Image;Object.assign(p.style,{maxWidth:"80%",maxHeight:"80%"}),o.appendChild(p),e.appendChild(o);var h=function(t){return!!r.findUpUtil(t.target,(function(t){return t===p}),(function(t){return t===e}))},v=or.create({maxZoom:100,zoomElement:o,dragEnabled:h,scaleEnabled:h,onZoomDragStart:function(t){t.native.preventDefault()},onZoomScale:function(t,e){i(e)},onZoomDragMove:function(t,e){i(e)}});return v.mount(e),{zoomInstance:v,element:e,show:c,close:f,reset:a}};t.register("click:imageClick",(function(e){return r.findUpUtil(e.target,(function(t){return"ky-image"===t.getAttribute("type")}),(function(e){return e===t.getProxyElement()}))})),t.on("imageClick",(function(n){var r=n.target;if(!t.editor.isEditMode()||r.nextElementSibling){var i=r.querySelector("img");i&&function(t){e||(e=o()),e.reset(),e.show(t)}(i)}})),t.on("willDestroy",(function(){e&&e.close()}))}};n(27);function Wi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Fi=function(t){d()(n,t);var e=Wi(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.tagName="ky-cursor",t))}return n}(h);Fi.tagName="ky-cursor";n(28);function qi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ui=Array.prototype.slice,Zi=function(t,e){var n=t.getBoundingClientRect(),o=r.getScreenPositionByClientInfo({x:n.x,y:n.y},e);return{x:o.x,y:o.y,width:n.width,height:n.height}};function Ki(t,e){var n=document.createRange();return 1===arguments.length?(n.selectNode(t),n):(n.setStart(t,e),n)}function Yi(t,e,n,r,o){for(var i=function t(e,n,r,i){if(r-n<2)return n;var a=(r+n)/2|0,c=Ki(e,a),u=Zi(c,o);return u.y+u.height<i.y?t(e,a,r,i):t(e,n,a,i)}(t,e,n,r),a=null;i>0;){var c=Ki(t,i),u=Zi(c,o);if(a||(a=u),u.x<r.x||u.x>a.x)break;i--}return i}function Xi(t,e,n,r,o){for(var i=function t(e,n,r,i){if(r-n<2)return r;var a=(r+n)/2|0,c=Ki(e,a);return Zi(c,o).y>i.y?t(e,n,a,i):t(e,a,r,i)}(t,e,n,r),a=null;i<n;){var c=Ki(t,i),u=Zi(c,o);if(a||(a=u),u.x>r.x||u.x<a.x)break;i++}return i}function Gi(t,e){if(!e){var n=t.lastChild;if(!t.textContent)return Ki(t);for(;n;){if(3===n.nodeType)return Ki(n,n.textContent.length);n=n.previousSibling}return Ki(t)}if(!function(t,e){return Ji(t.x,e.x,e.x+e.width)&&Ji(t.y,e.y,e.y+e.height)}(e,t.getBoundingClientRect()))return null;console.time("getTextCursorRange");try{return function(t,e){for(var n={last:{bounding:null,range:null},nearest:{bounding:null,range:null,dx:1e4}},o=r.getClientInfo(t),i=r.getScreenPositionByClientInfo(e,o),a=t.firstChild;a;)if(3===a.nodeType){var c=a.textContent.length,u=Zi(Ki(a,0),o),l=Zi(Ki(a,c),o);if(i.y<u.y||i.y>l.y+l.height)a=a.nextSibling;else{for(var s=Yi(a,0,c,i,o),f=Xi(a,s,c,i,o),p=s;p<=f;p++){var h=Ki(a,p),v=Zi(h,o),d=v.x>=i.x,y=Math.abs(v.x-i.x),m=n.nearest;if((!m.range||m.dx>y)&&(m.bounding=v,m.range=h,m.dx=y),d&&Ji(i.y,v.y,v.y+v.height)){var g=n.last.bounding;if(g){var x=g.x;Ji(i.y,g.y,g.y+g.height)||(x=u.x);var b=v.x-x;if(v.x-i.x<.5*b)return h;if(v.y-g.y-v.height>=0){var E=document.createRange();return E.setStart(h.startContainer,Math.max(0,h.startOffset-1)),E.setEnd(h.startContainer,h.startOffset),E}}return n.last.range||h}n.last.bounding=v,n.last.range=h}a=a.nextSibling}}else a=a.nextSibling;if(!n.nearest.range)return n.nearest.range;if(n.nearest.range&&n.last.range){var w=n.last.bounding,C=n.nearest.bounding;return Math.abs(w.y-i.y)>Math.abs(C.y-i.y)&&n.nearest.range||n.last.range}return n.last.range}(t,e)}finally{console.timeEnd("getTextCursorRange")}}function Ji(t,e,n){return t>=e&&t<=n}function $i(t){return t.y+t.height/2}function Qi(t){return t.y+t.height}var ta=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(t.lineIndex>2)){var r=t.last,o=function(e){var n=e.getBoundingClientRect();if(r.range||(r.bounding=n,r.range=e),t.currentRange||(t.currentRange=e,t.currentBounding=n),(n.x<r.bounding.x||n.x===r.bounding.x&&$i(n)>Qi(r.bounding)&&n!==t.currentBounding)&&t.lineIndex++,t.lineIndex>=2)return!0;if(t.lineIndex>0)if(t.range){var o=Math.abs(n.x-t.currentBounding.x);o<=t.dx&&(t.range=e,t.bounding=n,t.dx=o)}else t.range=e,t.bounding=n,t.dx=Math.abs(n.x-t.currentBounding.x);r.bounding=n,r.range=e};if(1!==e.nodeType||e.textContent)for(var i=3===e.nodeType?e:e.firstChild;i;)if(3===i.nodeType){for(var a=i.textContent,c=a.length,u=n;u<=c;u++){var l=Ki(i,u);if(o(l))break}i=i.nextSibling}else i=i.nextSibling;else{var s=Ki(e);o(s)}}},ea=function(t,e,n){if(!(t.lineIndex>2)){var r=t.last,o=function(e){var n=e.getBoundingClientRect();if(r.range||(r.bounding=n,r.range=e),t.currentRange||(t.currentRange=e,t.currentBounding=n),(n.x>r.bounding.x||n.x===r.bounding.x&&$i(n)<r.bounding.y&&n!==t.currentBounding)&&t.lineIndex++,t.lineIndex>=2)return!0;if(t.lineIndex>0)if(t.range){var o=Math.abs(n.x-t.currentBounding.x);o<=t.dx&&(t.range=e,t.bounding=n,t.dx=o)}else t.range=e,t.bounding=n,t.dx=Math.abs(n.x-t.currentBounding.x);r.bounding=n,r.range=e};if(1!==e.nodeType||e.textContent){var i=3===e.nodeType?e:e.lastChild;for(2===arguments.length&&(n=i?i.textContent.length:0);i;)if(3===i.nodeType){for(var a=n||0;a>=0;a--){var c=Ki(i,a);if(o(c))break}i=i.previousSibling}else i=i.previousSibling}else o(Ki(e))}};function na(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o={last:{range:null,bounding:null},lineIndex:0,currentRange:null,currentBounding:null,range:null,bounding:null,dx:1e3,isFinish:function(){return o.lineIndex>=2}},i=1===r?ta:ea;if(i(o,e,n),o.isFinish())return o.range;var a=1===r?Nr:zr;return a(e,(function(t){return!(!Wr(t)||(i(o,t),!o.isFinish()))}),t),o.range||o.currentRange}function ra(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oa(t,e){if(Wr(t))return Gi(t,e);var n=Br(t);if(n){var r,o=n.firstChild;if(r=o&&o.textContent?Ki(o,o.textContent.length).getBoundingClientRect():Ki(n).getBoundingClientRect(),e.x>r.x&&e.y>r.y)return Gi(n)}var i=Number.NaN,a=[],c=null,l=function(){a.length>=3&&a.shift(),c={items:[]},a.push(c)};l();var s=!1,f=!1;!function t(n){if(!s)for(var r=n.firstElementChild;!s&&r;)if(Zr(r))r=r.nextElementSibling;else{if(Wr(r)){var o=r.firstChild;if(o&&o.textContent){var a=Ki(o).getClientRects();if(a.length>1)f&&(s=!0),l();else if(a.length>0){if(a[0].x<i){if(f){s=!0;break}l()}}if(c.items.push({rects:Ui.call(a),element:r}),a.length>0){var u=a[a.length-1];i=u.x+u.width,u.y+u.height>e.y&&(f=!0)}}else{var p=Ki(r).getBoundingClientRect(),h=p;if(p.x<i){if(f){s=!0;break}l()}i=p.x,c.items.push({rects:[p],element:r}),h.y+h.height>e.y&&(f=!0)}}else if(t(r),s)break;r=r.nextElementSibling}}(t);var p=null,h=Number.MAX_VALUE,v={maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE};a.forEach((function(t,n){t.items.forEach((function(t){t.rects.forEach((function(r){var o=function(t,e){var n=t.x,r=t.y;return e.y>r+t.height/2&&(r+=t.height),Ji(e.x,n,n+t.width)?Math.abs(e.y-r):e.x<t.x?ra({x:t.x,y:t.y},e):ra({x:t.x+t.width,y:t.y},e)}(r,e);o<h&&(p={target:t,element:t.element,bounding:r},h=o),n===a.length-1&&(r.y<v.minY&&(v.minY=r.y),r.x+r.width>v.maxX&&(v.maxX=r.x+r.width))}))}))}));var d=null;if(p){var y=p,m=y.bounding,g=y.element;if(0===m.width)d=Gi(g);else{var x=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qi(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e);e.x<m.x?x.x=m.x:e.x>m.x+m.width&&(x.x=m.x+m.width),(e.y<m.y||e.y>m.y+m.height)&&(x.y=m.y+m.height/2),d=Gi(g,x)}}return d||n&&(d=Gi(n)),d}var ia={apply:function(t){var e=t.editor,n=t.editor.events,o=null,i=0,a=!1;n.onNative("mousedown",(function(t){o=r.getPosition(t);var e=(new Date).getTime();a=!!(i&&e-i<300),i=e})),n.onNative("mouseup",(function(i){if(!a){var c=r.getPosition(i);if(o){var u=Math.pow(o.x-c.x,2)+Math.pow(o.y-c.y,2);if((u=Math.sqrt(u))>=3)return t.update(null),void(o=null)}var l=i.target;if(r.findUpUtil(l,(function(t){return Zr(t)}),(function(t){return t===e.getContainer()})))t.update(null);else{console.time("cursor");var s=e.getContainer().querySelector(E.tagName);if(s){var f=s.getBoundingClientRect();c.x<=f.left&&(c.x=f.left+2)}var p=oa(l,c);console.timeEnd("cursor"),p&&(t.update(p),n.emit("internalSelectionchange",null,[])),o=null}}}));var c=function(){t.updatePosition()};n.onNative("scroll",c),n.onNative("wheel",c),n.registerShortcutHandler("Ctrl+A|Meta+A",(function(){if(!e.getNormalizedRange())return!1;var n=e.getContainer(),r=e.newRange();r.startElement=Pr(n),r.startOffset=0;var o=Mr(n,(function(t){return Fr(t)}));if(Hr(o)){var i=o&&o.lastChild;i?(r.endContainer=i,r.endOffset=i.textContent.length):(r.endContainer=o,r.endOffset=0)}else o&&(r.endContainer=o,r.endOffset=0);t.update(null),r.select(),n.focus()}))}},aa={Enter:13,Delete:46,Backspace:8,Tab:9,ArrowLeft:37,ArrowTop:38,ArrowRight:39,ArrowBottom:40},ca="Enter",ua="Delete",la="Backspace",sa="Tab";var fa={apply:function(t){var e,n,r=t.editor.events,o={composition:0,logged:!1},i=r.editor,a=(e={},u()(e,aa.ArrowLeft,!0),u()(e,aa.ArrowRight,!0),u()(e,aa.ArrowTop,!0),u()(e,aa.ArrowBottom,!0),e);function c(){return r.editor.selectionEnabled()}function l(t,e){i.checkUnmountCustomElements();var n=r.createEvent(t);n.optType=e,function(t){r.emit("keyboardInput",null,[t])}(n)}function s(){r.emit("internalSelectionchange",null,[])}function f(t){var e=i.getNormalizedRange();if(!e)return null;if(t){if(!Wr(e.startElement))return null}else if(!Wr(e.endElement))return null;return e}var p=(n={},u()(n,aa.ArrowLeft,(function(e){var n;e.preventDefault();var r=Wr(null===(n=i.getNormalizedRange())||void 0===n?void 0:n.startElement)?null:i.selectState.getTarget();if(r){var o=zr(r,(function(t){return Wr(t)}),(function(t){return t===i.getContainer()||Zr(t)}));if(o){i.selectState.setActive(null);var a=i.newRange();return a.startElement=o,a.startOffset=0,void a.select()}}if(t.isActive())t.moveLeft();else{var c=f();if(!c)return;var u=i.newRange();u.startContainer=c.startContainer,u.startOffset=c.startOffset,u.select()}s()})),u()(n,aa.ArrowTop,(function(e){if(e.preventDefault(),t.isActive())t.moveTop();else{var n=f();if(!n)return;var r=i.newRange();r.startContainer=n.startContainer,r.startOffset=n.startOffset,r.select()}s()})),u()(n,aa.ArrowRight,(function(e){var n;e.preventDefault();var r=Wr(null===(n=i.getNormalizedRange())||void 0===n?void 0:n.startElement)?null:i.selectState.getTarget();if(r){var o=Nr(r,(function(t){return Wr(t)}),(function(t){return t===i.getContainer()||Zr(t)}));if(o){i.selectState.setActive(null);var a=i.newRange();if(!a)return;return a.startElement=o,a.startOffset=0,void a.select()}}if(t.isActive())t.moveRight();else{var c=f(!0);if(!c)return;var u=i.newRange();u.startContainer=c.endContainer,u.startOffset=c.endOffset,u.select()}s()})),u()(n,aa.ArrowBottom,(function(e){if(e.preventDefault(),t.isActive())t.moveBottom();else{var n=f(!0);if(!n)return;var r=i.newRange();r.startContainer=n.endContainer,r.startOffset=n.endOffset,r.select()}s()})),u()(n,aa.Enter,(function(t){i.execute((function(){i.actionManager.execute("enter",{editor:i,event:t})})),l(t,ca)})),u()(n,aa.Delete,(function(t){i.execute((function(){i.actionManager.execute("delete",{editor:i,event:t})})),l(t,ua)})),u()(n,aa.Backspace,(function(t){i.execute((function(){i.actionManager.execute("backspace",{editor:i,event:t})})),l(t,la)})),u()(n,aa.Tab,(function(t){i.execute((function(){i.actionManager.execute("tab",{editor:i,event:t})})),l(t,sa)})),n);function h(t,e){fo((function(){r.emit("textInput",null,[{text:e}])}))}function v(t,e){e&&(i.actionManager.execute("textInput",{editor:i,event:t,text:e}),i.checkUnmountCustomElements())}r.onNative("keydown",(function(t){if(!function(t){return ar.assKeys.some((function(e){return t[e]}))}(t)&&(c()||function(t){return[aa.Backspace,aa.Delete,aa.ArrowLeft,aa.ArrowRight].indexOf(t.keyCode)>=0&&!Yr(t,r.editor.getContainer())}(t))){o.logged||(o.logged=!0,a[t.keyCode]||i.saveLog());var e=p[t.keyCode];e&&e(t)}})),t.input.addEventListener("input",(function(e){if(!o.composition){var n=t.input.value;t.input.value="",v(e,n),h(0,n)}})),r.onNative("keyup",(function(){o.composition||(o.logged=!1)}));var d=null;t.input.addEventListener("compositionstart",(function(){c()&&(o.composition=1)}));var y=function(t){var e=i.getNormalizedRange(),n=t.data;if(e.startElement===d.startElement){var r=e.startContainer,o=d.startOffset,a=e.startOffset,c=r.textContent||"",u=c.slice(0,o)+n;r.textContent=u+c.slice(a),(e=i.newRange()).startContainer=r,e.startOffset=u.length,e.select()}else{var l=e.startElement;l.textContent=n,(e=i.newRange()).startElement=l,e.startOffset=n.length,e.select()}};t.input.addEventListener("compositionupdate",(function(t){if(c()){var e=t.data;if(!d)return vr((d=i.getNormalizedRange()).startContainer.textContent)&&(d.startOffset=0),void v(t,e);y(t)}})),t.input.addEventListener("compositionend",(function(e){var n=e;y(n),h(0,n.data),o.logged=!1,o.composition=0,d=null,c()&&(t.input.value="")}))}};function pa(t){if(t){var e=t.startContainer,n=t.startOffset,r={startContainer:e,startOffset:n,endOffset:t.endOffset};return 1===e.nodeType&&(r.anchorNode=e.childNodes[n]),r}}var ha=window.setTimeout,va=window.clearTimeout,da=function(){function t(e){s()(this,t),this._blinkId=0,this._currentBounding={x:0,y:0,height:0},this.enableInputEventListener=!0,this.editor=e,this.initElements(),this.initEvents()}return p()(t,[{key:"initElements",value:function(){var t=this;this.element||(this.input=document.createElement("textarea"),this.element=O.createElement(Fi),this.element.appendChild(this.input),this.input.addEventListener("blur",(function(){t.enableInputEventListener&&t.update(null)})),this.update())}},{key:"initEvents",value:function(){ia.apply(this),fa.apply(this)}},{key:"syncScroll",value:function(t){t.dy&&this.editor.scrollTop(this.editor.scrollTop()+t.dy)}},{key:"updatePosition",value:function(){if(this.element&&this.element.parentElement){var t=this.getCursorBounds();this._currentBounding=t,Object.assign(this.element.style,{left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:t.transform})}}},{key:"updateBlink",value:function(t){var e=this;this.clearBlink();var n=!0,r=!1,o=function t(){if(e.element&&e.element.parentElement){var o=e.getCursorBounds();r||(r=!0,e.syncScroll(o)),function(){var t=e.getCursorBounds();e._currentBounding=t,Object.assign(e.element.style,{opacity:n?1:0,left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),height:"".concat(t.height,"px"),transform:t.transform})}(),e._blinkId=ha(t,500)}n=!n};t?o():(this.element.style.opacity="1",this._blinkId=ha(o,500))}},{key:"clearBlink",value:function(){va(this._blinkId),this._blinkId=0}},{key:"isActive",value:function(){return!!this.rangeInfo}},{key:"getRange",value:function(){var t=this.rangeInfo;if(!t)return null;var e=document.createRange();return t.anchorNode?(e.selectNode(t.anchorNode),e):(e.setStart(t.startContainer,t.startOffset),"number"==typeof t.endOffset&&t.endOffset!==t.startOffset&&e.setEnd(t.startContainer,t.endOffset),e)}},{key:"getRangeOptions",value:function(){var t=this.getRange();return t?{startContainer:t.startContainer,startOffset:t.startOffset}:null}},{key:"getCurrentBounds",value:function(){return this._currentBounding}},{key:"getCursorBounds",value:function(t){var e=t||this.getRange();if(!e)return{x:0,y:0,height:0};var n=this.editor.getWrapper(),o=e.startContainer,i=1===o.nodeType?o:null==o?void 0:o.parentElement,a=0,c=1,u=1;if(i){var l=r.getCTM(i,n);a=r.QRDeCompositionMatrix(l).rotate||0;var s=r.getElementScale(i);c=s.x,u=s.y}c=c||1,u=u||1;var f=e.getBoundingClientRect(),p=n.getBoundingClientRect(),h=f.x-p.x,v=f.y-p.y,d=window.getComputedStyle(i),y=parseFloat(d.lineHeight),m=(y-parseFloat(d.fontSize))/2||0,g=f.height/u,x=0;return v<0?x=v-10:v+g>p.height&&(x=v+g-p.height+10),{x:h/c,y:v/u-m/Math.cos(a),height:y||Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2))/u,transform:a?"rotate(".concat(180*a/Math.PI,"deg)"):"none",dy:x}}},{key:"update",value:function(t){if(arguments.length>0&&(this.rangeInfo=pa(t)),this.element){var e=this.element.style;if(this.rangeInfo){var n,r=this.getRange(),o=this.getCursorBounds(r);this._currentBounding=o;var i=1===(null===(n=r.startContainer)||void 0===n?void 0:n.nodeType)?r.startContainer:r.startContainer.parentElement,a=window.getComputedStyle(i),c=i?a.color:"",u={opacity:1,left:"".concat(o.x,"px"),top:"".concat(o.y,"px"),height:"".concat(o.height,"px"),transform:o.transform,"background-color":c||"#000"};Object.assign(e,u),this.syncScroll(o),this.updateBlink(!!o.dy),Object.assign(this.input.style,{fontSize:a.fontSize}),this.input.focus()}else this.hide(),this.input.blur()}}},{key:"hide",value:function(){if(this.element){var t=this.element.style;Object.assign(t,{left:"0px",top:"0px",height:"0px"}),this.clearBlink()}}},{key:"moveLeft",value:function(){if(this.isActive()){var t=new $r(this.editor,this.getRangeOptions()),e=t,n=e.startContainer,r=e.startOffset;if(r>0)r--,(t=t.new()).startContainer=n,t.startOffset=r;else{var o=zr(t.startElement,Wr,this.editor.getContainer());o&&((t=t.new()).startElement=o,t.startOffset=o.textContent.length)}this.update(t.getNativeRange())}}},{key:"moveRight",value:function(){if(this.isActive()){var t=new $r(this.editor,this.getRangeOptions()),e=t,n=e.startContainer,r=e.startOffset;if(r===n.textContent.length){var o=Nr(t.startElement,Wr,this.editor.getContainer());o&&((t=t.new()).startElement=o,t.startOffset=0)}else r++,(t=t.new()).startContainer=n,t.startOffset=r;this.update(t.getNativeRange())}}},{key:"moveTop",value:function(){if(this.isActive()){var t=new $r(this.editor,this.getRangeOptions());(t=na(this.editor.getContainer(),t.startElement,t.startOffset,-1))&&this.update(t)}}},{key:"moveBottom",value:function(){if(this.isActive()){var t=new $r(this.editor,this.getRangeOptions());(t=na(this.editor.getContainer(),t.startElement,t.startOffset,1))&&this.update(t)}}},{key:"render",value:function(){return this.element}}]),t}(),ya=function(){function t(){s()(this,t),this._keyMapping=Object.create(null),this._keyMatches=[]}return p()(t,[{key:"put",value:function(t,e){if("string"==typeof t||"number"==typeof t)this._keyMapping[t]=e;else if("function"==typeof t){if(this._keyMatches.find((function(e){return e.match===t})))return;this._keyMatches.push({match:t,transfer:e})}}},{key:"get",value:function(t){var e=String(t.tagName).toLowerCase(),n=this._keyMapping[e];if(n)return n;var r=this._keyMatches.find((function(e){return e.match(t)}));return r?r.transfer:void 0}}]),t}(),ma={};function ga(t,e){return t.getAttributeNames().reduce((function(n,r){if(ma.hasOwnProperty(r)||e&&e.hasOwnProperty(r))return n;var o=t.getAttribute(r);return n+=o?" ".concat(r,'="').concat(o,'"'):" ".concat(r)}),"").trim()}var xa=function(){function t(){s()(this,t),this._content="",this._length=0}return p()(t,[{key:"append",value:function(t){t=String(t),this._content+=t,this._length+=t.length}},{key:"size",value:function(){return this._length}},{key:"toString",value:function(){return this._content}}]),t}(),ba=function(){function t(){s()(this,t),this.transfers=new ya}return p()(t,[{key:"registerTransfer",value:function(t,e){this.transfers.put(t,e)}},{key:"getTransfer",value:function(t){return this.transfers.get(t)}},{key:"stringify",value:function(t){var e=this.transfers;function n(t){try{if(!t)return;if(1!==t.nodeType)return void o.append(t.textContent);var r=t,i=String(r.tagName).toLowerCase(),a=e.get(r);if(a&&a.stringify)return a.stringify.call(o,r);var c=r.firstChild,u=ga(r);for(o.append("<".concat(i).concat(u?" "+u:"",">"));c;){var l=c.nextSibling;n(c),c=l}o.append("</".concat(i,">"))}finally{}}var r=new xa,o={append:function(t){r.append(t)},size:function(){return r.size()},next:n,toString:function(){return r.toString()}};return n(t),o.toString()}},{key:"parseNode",value:function(t){if(!t)return t;if(O.isElementInstanceOf(t,N))return t;if(Zr(t))return pr(t),t;var e=t,n=this.transfers.get(e);if(n&&n.parse)return n.parse(e);for(var r=e.firstElementChild;r;){var o=r.nextElementSibling,i=this.parseNode(r);i||fr(r),i!==r&&r.parentNode===e&&e.replaceChild(i,r),r=o}return e}},{key:"parse",value:function(t){var e=(new DOMParser).parseFromString(t,"text/html");return this.parseNode(e)}}],[{key:"registerIgnoreAttribute",value:function(t){ma[t]=!0}}]),t}();ba.getElementAttrString=ga;var Ea=function t(){s()(this,t)};Ea.START_CURSOR="start-cursor",Ea.END_CURSOR="end-cursor";function wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Ca=function(t){d()(n,t);var e=wa(n);function n(t){var r;return s()(this,n),(r=e.call(this,{passive:!1}))._shortcutItems=[],r.editor=t,r}return p()(n,[{key:"install",value:function(t){t.apply(this)}},{key:"emitShortcutEvent",value:function(t){this._shortcutItems.some((function(e){if(e.keyInfos.some((function(e){return ar.matchKey(t,e)})))return!1!==e.handler(t)&&t.preventDefault(),!0}))}},{key:"registerShortcutHandler",value:function(t,e){if(e){var n=ar.parseKeyString(t);this._shortcutItems.push({keyInfos:n,handler:e})}}}]),n}(Dt);function Oa(t){fr(t),ka(t)}function ka(t){ep.getElementsByElementType(t,it).forEach((function(t){ep.unmountCustomElement(t)}))}function _a(t,e){ep.getElementsByElementType(e,it).forEach((function(e){t.mountCustomElement(e)}))}var Sa=function(){function t(e){s()(this,t),this.render=e}return p()(t,[{key:"_updateItem",value:function(t,e,n){if(e)if(t||!n){if(t.nodeType!==e.nodeType)return t.parentNode.replaceChild(e,t),ka(t),void _a(this.render,e);if(3!==t.nodeType){var r=t,o=e;if(r.tagName!==o.tagName)return r.parentNode.replaceChild(o,r),ka(r),void _a(this.render,o);if(function(t,e){var n=t.getAttributeNames(),r=e.getAttributeNames(),o=n.reduce((function(t,e){return t[e]=!0,t}),{});r.forEach((function(r){var i=e.getAttribute(r);if(!n.hasOwnProperty(r)||i!==t.getAttribute(r))try{t.setAttribute(r,i)}catch(t){}delete o[r]})),Object.keys(o).forEach((function(e){t.removeAttribute(e)}))}(r,o),!Zr(r))for(var i=r.firstChild,a=o.firstChild;i||a;){var c=i&&i.nextSibling,u=a&&a.nextSibling;a?i?this._updateItem(i,a,r):(r.appendChild(a),_a(this.render,a)):Oa(i),i=c,a=u}}else{var l=t.textContent,s=e.textContent;l!==s&&(t.textContent=s)}}else n.appendChild(e);else Oa(t)}},{key:"update",value:function(t){for(var e=this.render.parser.parse(t),n=this.render.getContainer(),r=n.firstChild,o=e.body.firstChild;r||o;){var i=r&&r.nextSibling,a=o&&o.nextSibling;this._updateItem(r,o,n),r=i,o=a}}}]),t}(),Ra=n(5),Aa=function(){return(Aa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ma=/\s+|\s*,\s*/;function Ta(t){return t}var Pa={passive:!0},ja=function(){function t(t){this._options=Object.assign({},Pa,t||{}),this.mountKey=Object(Ra.findUniqueKey)("eventManagerId"),this._proxyElement=null,this._eventListeners={},this._events={},this._bindEventTypes={},this._attributes={},this._nativeEventItems=[]}return t.prototype.onNative=function(t,e,n){var r=this._nativeEventItems;if(r.find((function(n){return n.name===t&&n.handler===e})))return this;r.push({name:t,handler:e,options:n});var o=this._proxyElement,i=this.mountKey;return o&&o[i]&&o.addEventListener(t,e,n),this},t.prototype.offNative=function(t,e){var n=this._nativeEventItems,r=-1;if(n.some((function(n,o){if(n.name===t&&n.handler===e)return r=o,!0})),-1!==r){n.splice(r,1);var o=this._proxyElement,i=this.mountKey;o&&o[i]&&o.removeEventListener(t,e)}return this},t.prototype.attr=function(t,e){var n=this._attributes;return 1===arguments.length?n[t]:2===arguments.length?(n[t]=e,this):Object.assign({},n)},t.prototype.option=function(t,e){var n=this._options;return 1===arguments.length?n[t]:(2===arguments.length&&(n[t]=e),this)},t.prototype.removeAttr=function(t){return delete this._attributes[t]},t.prototype.getProxyElement=function(){return this._proxyElement},t.prototype._parseEventType=function(t){return t?t.trim().split(Ma):[]},t.prototype._executeHandlers=function(t){var e=t.handlers;e&&e.forEach((function(e){var n=Object.create(t.event);Object(Ra.safeExecute)(e,t.eventTarget,[t.eventBuilder(n)])}))},t.prototype.on=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];r||(r=n[t]=[]),-1===r.indexOf(e)&&r.push(e)})),this},t.prototype.once=function(t,e){var n,r=this,o=function(){r.off(t,n)};n=function(){e.apply(this,arguments),o()},this.on(t,n)},t.prototype.off=function(t,e){var n=this._eventListeners;return this._parseEventType(t).forEach((function(t){var r=n[t];if(r){var o=r.indexOf(e);-1!==o&&r.splice(o,1),0===r.length&&delete n[t]}})),this},t.prototype.emit=function(t,e,n){var r=this._eventListeners;return this._parseEventType(t).forEach((function(t){var o=r[t];o&&o.forEach((function(t){Object(Ra.safeExecute)(t,e,n)}))})),this},t.prototype._register=function(t,e,n){var r=t.split(":"),o=r[0],i=r.length>1?r[1]:r[0],a=this._events[o];return a||(a=this._events[o]={}),e?(a[i]={eventTarget:Object(Ra.asFunc)(e),eventBuilder:Object(Ra.isFunction)(n)?n:Ta},this._registerBindEventType(o)):(delete a[i],0===Object.keys(a).length&&this._logoutBindEventType(o)),this},t.prototype.register=function(t,e,n){var r=this;return t.split(Ma).forEach((function(t){t&&r._register(t,e,n)})),this},t.prototype._createEvent=function(t){var e=this,n={};for(var r in t)n[r]=t[r];var o=t,i=!1;return Object.assign(n,{native:o,stopPropagation:function(){i=!0},isStopPropagation:function(){return i},preventDefault:function(){var n,r=e._options;!1===Aa({passive:r.passive},null===(n=r.eventOptions)||void 0===n?void 0:n[t.type]).passive&&t.preventDefault()}})},t.prototype.createEvent=function(t){return this._createEvent(t)},t.prototype._logoutBindEventType=function(t){var e=this._bindEventTypes,n=e[t];if(n){delete e[t];var r=this._proxyElement;r&&r.removeEventListener(t,n)}},t.prototype._registerBindEventType=function(t){var e,n=this,r=this._bindEventTypes;if(!r[t]){var o=function(e){var r=n._events[t];if(r){var o=Object.keys(r);if(0!==o.length){var i=n._eventListeners,a=[];o.forEach((function(t){var o=r[t],c=o.eventTarget;if(c=Object(Ra.safeExecute)(c,null,[e])){var u=n._createEvent(e);u.target=c;var l=i[t];a.push({handlers:l,eventTarget:c,eventBuilder:o.eventBuilder,event:u})}}));for(var c=e.target,u=!1,l=function(){var t=!1;if(a=a.filter((function(e){return e.eventTarget!==c||(u||(n._executeHandlers(e),e.event.isStopPropagation()&&(t=e.event.isStopPropagation())),!1)})),t&&(u=t),c===n._proxyElement||0===a.length)return"break";c=c.parentElement};c;){if("break"===l())break}a.forEach((function(t){n._executeHandlers(t)}))}}};if(r[t]=o,this._proxyElement){var i=this._options;this._proxyElement.addEventListener(t,o,Aa({passive:i.passive},null===(e=i.eventOptions)||void 0===e?void 0:e[t]))}return this}},t.prototype._unmount=function(){this.stop(),this._proxyElement=null},t.prototype.stop=function(){var t=this._proxyElement;if(t){var e=this._bindEventTypes;Object.keys(e).forEach((function(n){var r=e[n];null==t||t.removeEventListener(n,r)})),this._nativeEventItems.forEach((function(e){null==t||t.removeEventListener(e.name,e.handler)}));var n=this.mountKey;t[n]=!1}},t.prototype.resume=function(){var t=this._proxyElement;if(t){var e=this._options,n=this.mountKey;if(!t[n]){var r=this._bindEventTypes;Object.keys(r).forEach((function(n){var o,i=r[n];null==t||t.addEventListener(n,i,Aa({passive:e.passive},null===(o=e.eventOptions)||void 0===o?void 0:o[n]))})),this._nativeEventItems.forEach((function(e){e.options?null==t||t.addEventListener(e.name,e.handler,e.options):null==t||t.addEventListener(e.name,e.handler)})),t[n]=!0}}},t.prototype.unMount=function(){return this._unmount()},t.prototype.unmount=function(){return this._unmount()},t.prototype.mount=function(t){var e=t;"string"==typeof e&&(e=document.querySelector(e)),this._proxyElement&&this._proxyElement!==e&&this.unmount(),this._proxyElement=e,this.resume()},t}(),Na=DOMMatrix,za=DOMPoint,Ba=-1!==navigator.userAgent.indexOf("Chrome"),Ia=function(t,e,n){var r;if(function(t){return"svg"===String(t.tagName).toLowerCase()}(t))return t.getScreenCTM();if(r=t.ownerSVGElement)return r.getScreenCTM().multiply(t.getScreenCTM());var o=t.offsetParent,i=window.getComputedStyle(t),a=o&&o!==document.body?window.getComputedStyle(o):{},c=t.offsetTop,u=t.offsetLeft,l=parseFloat(a.borderLeftWidth)||0,s=parseFloat(a.borderTopWidth)||0,f=(null==o?void 0:o.scrollTop)||0,p=(null==o?void 0:o.scrollLeft)||0,h=function(t,e){var n=0,r=0;if(!t)return{scrollTop:r,scrollLeft:n};for(var o=t.parentElement;o&&o!==e;)n+=o.scrollLeft||0,r+=o.scrollTop||0,o=o.parentElement;return{scrollTop:r,scrollLeft:n}}(t,o),v=new DOMMatrix;n||(v.e=l+u-p-h.scrollLeft||0,v.f=s+c-f-h.scrollTop||0);var d=i.transform,y=d&&"none"!==d?v.multiply(new DOMMatrix(d)):v;if(e){var m=new DOMMatrix([1,0,0,1,t.offsetWidth/2||0,t.offsetHeight/2||0]);return y.multiply(m)}return y},La=function(t){var e=t.ownerSVGElement;return e||t.offsetParent},Da=function(t){return function t(e,n){var r=La(e);return r?t(r,e).multiply(Ia(e,e===n)):Ia(e)}(t,t)};function Va(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ha(t,e){var n=e.pointA,r=e.pointB,o=[r.x-n.x,r.y-n.y],i=[t.x-n.x,t.y-n.y],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=(o[0]*i[0]+o[1]*i[1])/(a*c);return Math.sin(Math.acos(u))*c}var Wa=function(){return(Wa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Fa="http://www.w3.org/1999/xhtml",qa={svg:"http://www.w3.org/2000/svg",xhtml:Fa,html:Fa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var Ua=window.Symbol?window.Symbol("_data"):"_data";window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,Object.create(null);window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame;function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r in t)return t[r]}}function Ka(t){if(!t)return!1;var e=t.tagName,n=t.namespaceURI;if(!e||!n)return!1;return(n===Fa?document.createElement(e):document.createElementNS(n,e.toLowerCase())).constructor===t.constructor}function Ya(t){return String(t.getAttribute("class")||"").split(/\s+/)}function Xa(t,e){t.setAttribute("class",[].concat(e).join(" "))}function Ga(t){return t instanceof oc&&(t=t.node()),tc((Ba&&t.getScreenCTM?t.getScreenCTM():Ja(t))||new Na).scale||{x:1,y:1}}function Ja(t){if(t instanceof oc&&(t=t.node()),!Ba)return Da(t);return"function"==typeof t.getScreenCTM?t.getScreenCTM():Da(t)}var $a=function(t,e){var n=Ja(t),r=new Na(n.toString()),o=r.e,i=r.f,a={x:1,y:1};if(e){var c=tc(r).scale;c&&(a.x=c.x,a.y=c.y)}r.e=r.f=0;var u=t.offsetWidth,l=t.offsetHeight,s=[{x:o-u/2,y:i-l/2},{x:o+u/2,y:i-l/2},{x:o+u/2,y:i+l/2},{x:o-u/2,y:i+l/2}],f=s.map((function(t){return(t=Wa({},t)).x-=o,t.y-=i,(t=ec(t,r)).x+=o,t.y+=i,t}));return{originPoints:s,points:f,ctm:r}},Qa=function(t,e,n){var r=e.points,o=e.ctm,i={x:1,y:1};if(n){var a=tc(o).scale;a&&(i.x=a.x,i.y=a.y)}var c={pointA:r[3],pointB:r[0]},u={pointA:r[0],pointB:r[1]},l=(t.x-c.pointA.x)*(c.pointB.y-c.pointA.y)-(t.y-c.pointA.y)*(c.pointB.x-c.pointA.x),s=(t.x-u.pointA.x)*(u.pointB.y-u.pointA.y)-(t.y-u.pointA.y)*(u.pointB.x-u.pointA.x),f=Ha(t,c)*(l>0?-1:1),p=Ha(t,u)*(s>0?-1:1);return{x:f/i.x,y:p/i.y}};function tc(t){var e=t.a,n=t.b,r=t.c,o=t.d,i=e*o-n*r,a={rotate:0,scale:{x:1,y:1},skewX:0,skewY:0};if(0!=e||0!=n){var c=Math.sqrt(e*e+n*n);a.rotate=n>0?Math.acos(e/c):-Math.acos(e/c),a.scale={x:c,y:i/c},a.skewX=Math.atan((e*r+n*o)/(c*c))}else if(0!=r||0!=o){var u=Math.sqrt(r*r+o*o);a.rotate=Math.PI/2-(o>0?Math.acos(-r/u):-Math.acos(r/u)),a.scale={x:i/u,y:u},a.skewY=Math.atan((e*r+n*o)/(u*u))}return a}function ec(t,e){return function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),"object"===Ot()(t)){var o=t;t=o.x||0,e=o.y||0,n=o.z||0,r=o.w||1}return new za(t,e,n,r)}(t).matrixTransform(e)}function nc(t,e){e=Object(Ra.ensureArray)(e);var n=Ya(t);return 0===arguments.length?n:(e.forEach((function(t){t.split(/\s+/).forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))})),Xa(t,e),t)}function rc(t,e){e=Object(Ra.ensureArray)(e);var n=Ya(t);return n.filter((function(t){return-1===e.indexOf(t)})),Xa(t,n),t}var oc=function(){function t(e){if(!(this instanceof t))return new t(e);this.nodes=[].concat(e)}return t.prototype.node=function(){return this.nodes[0]||null},t.prototype.prop=function(t,e){var n=this;if(Object(Ra.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.prop(t,r[t])})),this}var o=t,i=this.node();if(1===arguments.length)return i&&i[o];var a=Object(Ra.asFunc)(e);return this.nodes.forEach((function(t,e){t[o]=a.call(t,e)})),this},t.prototype.memo=function(t,e){var n="_dom_memo_";if(Object(Ra.isObject)(t)){var r={},o=t;return Object.keys(o).forEach((function(e){var i="".concat(n).concat(t);r[i]=o[e]})),this.prop(r)}var i="".concat(n).concat(t),a=[].slice.call(arguments);return a[0]=i,this.prop.apply(this,a)},t.prototype.size=function(){return this.nodes.length},t.prototype.data=function(t){var e=this.node();if(e){if(0===arguments.length)return e[Ua];var n=Object(Ra.asFunc)(t);return this.nodes.forEach((function(t,e){t[Ua]=n.call(t,e)})),this}},t.prototype.offsetWidth=function(){var t=this.node();return t?t.offsetWidth:0},t.prototype.offsetHeight=function(){var t=this.node();return t?t.offsetHeight:0},t.prototype.position=function(){var t=this.bounds();return{x:t.x,y:t.y}},t.prototype.bounds=function(){var t=this.node();if(!t)return null;var e=t.getBoundingClientRect();return{x:e.left||e.x,y:e.top||e.y,width:e.width,height:e.height}},t.prototype.relativePosition=function(e){var n=e;n instanceof t||(n=ic(e));var r=this.position(),o=n.position();return{x:r.x-o.x,y:r.y-o.y}},t.prototype.text=function(t){var e=this.node();return e?0===arguments.length?e.textContent:(this.nodes.forEach((function(e,n){e.textContent=Object(Ra.asFunc)(t).call(e,n)})),this):""},t.prototype.html=function(t){var e=this.node();return e?0===arguments.length?e.innerHTML:(this.nodes.forEach((function(e,n){e.innerHTML=Object(Ra.asFunc)(t).call(e,n)})),this):""},t.prototype.call=function(t){return Object(Ra.isFunction)(t)?(this.nodes.forEach((function(e,n){t.call(e,n)})),this):this},t.prototype.reAppend=function(){return this.nodes.forEach((function(t){var e=t.parentElement;e&&e.appendChild(t)})),this},t.prototype.attr=function(t,e){var n=this;if(Object(Ra.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.attr(t,r[t])})),this}var o=this.nodes,i=this.node(),a=t;if(1===arguments.length)return i?i.getAttribute(a):null;if(2===arguments.length){var c=Object(Ra.asFunc)(e);return o.forEach((function(t,e){var n=c.call(t,e);null!==n?t.setAttribute(a,n):t.removeAttribute(a)})),this}return i?i.getAttributeNames().map((function(t){return{name:t,value:i.getAttribute(t)}})):null},t.prototype.css=function(t,e){var n=this;if(Object(Ra.isObject)(t)){var r=t;return Object.keys(r).forEach((function(t){n.css(t,r[t])})),this}var o=this.nodes,i=o[0],a=t;return 1===arguments.length?i?i.style[a]:null:2===arguments.length?(o.forEach((function(t,n){var r=Object(Ra.asFunc)(e,n);t.style[a]=r.call(t)})),this):i?Object.assign({},i.style):{}},t.prototype._clazz=function(t,e){var n=Object(Ra.asFunc)(e),r=this.nodes;return 0===arguments.length?nc(r[0]):(r.forEach((function(e,r){n.call(e,r)?rc(e,t):nc(e,t)})),this)},t.prototype.clazz=function(t,e){if(0===arguments.length)return this._clazz();if(1===arguments.length){if(!t)return!1;t=[].concat(t);var n=this._clazz();return t.length===n.length&&t.every((function(t){return n.indexOf(t)>=0}))}return this._clazz(t,!e)},t.prototype.createElement=function(e,n){"svg"===String(e).toLowerCase()&&(n=qa.svg),n=n&&qa[n]||n;var r=this.nodes[0];return new t(document.createElementNS(n||r&&r.namespaceURI||qa.html,e))},t.prototype.append=function(e,n){var r=this.node();if(e instanceof t)return e.nodes.forEach((function(t){r.appendChild(t)})),e;if(Ka(e))return this.append(new t(e));var o=this.createElement(e,n);return this.append(o)},t.prototype.select=function(e){var n=this.nodes,r=[];return n.some((function(t){var n=ic(e,t);if(n.size()>0)return r=r.concat(n.nodes),!0})),new t(r)},t.prototype.selectAll=function(e){var n=this.nodes,r=[];return n.forEach((function(t){var n=function(t,e){if(t instanceof oc)return t;"string"==typeof t&&(t=[].slice.call((e||document).querySelectorAll(t)));return new oc(t)}(e,t);r=r.concat(n.nodes)})),new t(r)},t.prototype.remove=function(){this.nodes.forEach((function(t){uc(t)}))},t.prototype.empty=function(){this.nodes.forEach((function(t){lc(t)}))},t}();function ic(t,e){return t instanceof oc?t:("string"==typeof t&&(t=(e||document).querySelector(t)),new oc(Object(Ra.ensureArray)(t)[0]))}function ac(t,e){var n=e,r={x:Za(t,["clientX","x"])||0,y:Za(t,["clientY","y"])||0};if(n instanceof oc&&(n=n.node()),!Ka(n))return r;var o=n.getBoundingClientRect();return r.x=r.x-(Za(o,["left","x"])||0),r.y=r.y-(Za(o,["top","y"])||0),r}function cc(t){if(!t)return[];return t instanceof oc?t.nodes:[].concat(t)}function uc(t){if(t instanceof oc)return t.remove();Object(Ra.isFunction)(t.remove)?t.remove():t.parentElement&&t.parentElement.removeChild(t)}function lc(t){if(t instanceof oc)return t.empty();for(;t.firstChild;)uc(t.firstChild)}function sc(t,e,n){var r=cc(t),o=null,i=n;return i&&i instanceof oc&&(i=i.node()),r.some((function(t){var n=function(t,e,n){for(var r=Object(Ra.asFunc)(e);t;){if(r.call(null,t))return t;if(t=t.parentElement,n&&("function"==typeof n?Object(Ra.safeExecute)(n,null,[t]):n===t))return null}return null}(t,e,i);if(n)return o=n,!0})),o}function fc(t){var e=(t.touches||[])[0];return e&&(t.clientX=t.pageX=e.clientX||e.pageX,t.clientY=t.pageY=e.clientY||e.pageY),t.tourchEvent=!0,t}n(31);var pc,hc=function(t){function e(e){return"".concat(t,"-").concat(e)}return{prefixName:e,prefixClassName:function(t,n){return 1===arguments.length&&(n=t,t=""),n?n.split(/\s+/).map((function(n){return e("".concat(t?t+"-":"").concat(n))})).join(" "):n||""}}}("ky-dom"),vc=(hc.prefixName,hc.prefixClassName),dc=function(){return(dc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yc=Object(Ra.findUniqueKey)("ResizeDataKey");!function(t){t.Top="Top",t.Right="Right",t.Bottom="Bottom",t.Left="Left"}(pc||(pc={}));var mc="Vertical",gc="Horizontal",xc={enabled:!0,resizing:!1},bc={isResizing:function(){return xc.resizing},enable:function(t){return 0===arguments.length?xc.enabled:xc.enabled=!!t},create:function(){return null}};function Ec(t){return t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:document.body}var wc=Object(Ra.findUniqueKey)("ResizeElements");function Cc(t){if(!t)return null;var e=t.attr(wc);return e||(e=new Oc,t.attr(wc,e)),e}var Oc=function(){function t(){this._data={},this._values=[]}return t.prototype.has=function(t){return this._data.hasOwnProperty(t)},t.prototype.remove=function(t){delete this._data[t],this._resetValues()},t.prototype._resetValues=function(){this._values=Object.values(this._data).sort((function(t,e){var n=t&&t[yc],r=e&&e[yc],o=n&&n.index,i=r&&r.index;return o*=1,i*=1,Number.isNaN(o)&&(o=-99999),Number.isNaN(i)&&(i=-99999),i-o}))},t.prototype.get=function(t){return this.has(t)?this._data[t]:null},t.prototype.put=function(t,e){var n=this._data;null!=e?(n[t]=e,this._resetValues()):this.remove(t)},t.prototype.values=function(){return[].concat(this._values)},t.prototype.size=function(){return this._values.length},t}();var kc={points:[0,1],getLine:function(t){return{pointA:t._points[this.points[0]],pointB:t._points[this.points[1]]}},getCursorStyle:function(t,e){return function(t){var e=t.pointA,n=t.pointB,r=t.rotate,o=void 0===r?90:r,i=t.size||16,a=t.color||"#000",c=[n.x-e.x,n.y-e.y],u=c[0]/Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=180*Math.acos(u)/Math.PI;c[1]<0&&(l=180-l),l+=o;var s=i,f=i,p=new Na([1,0,0,1,512,512]),h=new Na([1,0,0,1,-512,-512]),v=(new Na).rotate(l);v=p.multiply(v).multiply(h);var d='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(s,'" height="').concat(f,'">\n    <path transform="matrix(').concat(v.a," ").concat(v.b," ").concat(v.c," ").concat(v.d," ").concat(v.e," ").concat(v.f,')" d="M768 341.333333l170.666667 170.666667-170.666667 170.666667v-128H256v128l-170.666667-170.666667 170.666667-170.666667v128h512V341.333333z" fill="').concat(a,'"></path>\n</svg>'),y=ae(d);return"url(data:image/svg+xml;base64,".concat(y,") ").concat(s/2," ").concat(f/2,",move")}(this.getCursorOptions(t,e))},getCursorOptions:function(t,e){var n,r,o=this.getLine(t);return dc(dc(dc({},o),{color:null===(n=t.resizeOptions)||void 0===n?void 0:n.cursorColor,size:null===(r=t.resizeOptions)||void 0===r?void 0:r.cursorSize}),e)},test:function(t){var e=function(t){return(null==t?void 0:t.hitSize)||5}(t.resizeOptions);return function(t,e,n){var r=e.pointA,o=e.pointB,i=[o.x-r.x,o.y-r.y],a=[t.x-r.x,t.y-r.y],c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=(i[0]*a[0]+i[1]*a[1])/(c*u);return l<0?Va(r,t)<=n:u*l>c?Va(o,t)<=n:Math.sin(Math.acos(l))*u<=n}({x:t.clientX,y:t.clientY},this.getLine(t),e)}};function _c(t){return Object.assign(Object.create(kc),t)}var Sc=[_c({type:pc.Bottom,group:mc,pos:{x:0,y:1},points:[3,2],compute:function(t){return{height:t.my}}}),_c({type:pc.Top,group:mc,pos:{x:0,y:-1},points:[0,1],compute:function(t){return{y:t.my}}}),_c({type:pc.Right,group:gc,pos:{x:1,y:0},points:[1,2],compute:function(t){return{width:t.mx}}}),_c({type:pc.Left,group:gc,pos:{x:-1,y:0},points:[0,3],compute:function(t){return{x:t.mx}}})];function Rc(t,e){var n={},r={};if(!t)return r;if(t.tx&&(n.tx=t.tx,r.width="".concat(t.width,"px")),t.ty&&(n.ty=t.ty,r.height="".concat(t.height,"px")),t.tw&&(r.width="".concat(t.width,"px")),t.th&&(r.height="".concat(t.height,"px")),t.tx||t.ty)if(e){var o=function(t){t instanceof oc&&(t=t.node());var e=window.getComputedStyle(t).transform;return new Na(e)}(e);o.e+=t.tx||0,o.f+=t.ty||0,r.transform="".concat(o)}else r.transform="translate3d(".concat(t.tx||0,"px,").concat(t.ty||0,"px,0)");return r}var Ac=function(){var t,e,n,r,o,i,a,c=vc("global-resize-render"),u={showVertex:!1,showBorder:!0},l={x:0,y:0};function s(){if(!t){t=function(t,e){if(Ka(t))return new oc(t);var n=(e=qa[t]||e)?document.createElementNS(e,t):document.createElement(t);return new oc(n)}("div").clazz(c,!0);var a=(e=t.append("svg")).append("g");n=a.append("path"),o=a.append("rect"),r=a.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle"),i=e.createElement("g");for(var l=0;l<4;l++)i.append("circle").attr("r",5)}u.showVertex&&e.append(i)}return{config:function(t){t&&(u.showVertex=!!t.showVertex,u.showBorder=!!t.showBorder)},mount:function(e){s(),(e=e||document.body).appendChild(t.node()),a=function t(e){var n=window.getComputedStyle(e);if(["relative","absolute","fixed"].indexOf(n.position)>=0)return e;var r=e.parentElement;return r?t(r):e}(e);var n=document.documentElement,r=a.getBoundingClientRect(),o=Ga(a),i=o.x,c=o.y;l.x=(a===n?0:a.scrollLeft)-r.x/(i||1),l.y=(a===n?0:a.scrollTop)-r.y/(c||1)},unmount:function(){var e=t.node();e.parentNode&&e.parentNode.removeChild(e),t.css({display:"none"}),a=null,u.showVertex=!1,u.showBorder=!0,i.remove()},apply:function(a){var c=a||{},s=c.className,f=c.style,p=c.points;s&&t.clazz(s,!0),t.css(f);var h=0,v=0,d=0,y=0,m=Ga(e.node()),g=m.x,x=m.y,b=l.x,E=l.y,w="M"+(p=p.map((function(t){return dc(dc({},t),{x:t.x/(g||1),y:t.y/(x||1)})}))).map((function(t,e){var n=t.x,r=t.y;0===e?(h=v=n,d=y=r):(h=Math.min(h,n),v=Math.max(v,n),d=Math.min(d,r),y=Math.max(y,r));var o=r+E;return"".concat(n+b," ").concat(o)})).join("L")+"Z";e.attr("width",v+b+5).attr("height",y+E+5),n.attr("d",w).css({stroke:u.showBorder?"":"transparent"});var C=0|Va(p[0],p[1]),O=0|Va(p[1],p[2]),k=b+(h+v)/2|0,_=E+(d+y)/2|0;r.attr("x",k).attr("y",.5+(0|_)).text("".concat(C," * ").concat(O));var S=r.node().getBBox(),R=S.height,A=S.width+6,M=R+2;o.attr("width",A).attr("height",M).attr("x",k-A/2).attr("y",.5+(_-M/2|0)).attr("rx",M/2).attr("ry",M/2),u.showVertex?i.selectAll("circle").attr("cx",(function(t){return p[t].x+b})).attr("cy",(function(t){return p[t].y+E})).attr("opacity","1"):i.selectAll("circle").attr("opacity","0")}}}(),Mc=function(){var t=null,e=function(e){return void 0===e&&(e=!0),!t&&e&&((t=document.createElement("div")).className=vc("overlay"),Object.assign(t.style,{position:"fixed",zIndex:9999999,left:"0px",top:"0px",right:"0px",bottom:"0px"})),t};return function(){return{show:function(t){var n=e(),r=t||document.body;n.parentElement!==r&&r.appendChild(n)},hide:function(){var t=e(!1);(null==t?void 0:t.parentElement)&&t.parentElement.removeChild(t)}}}}(),Tc=Object(Ra.findUniqueKey)("ResizeEventManager"),Pc=vc("resizing-active"),jc=vc("resize-cursor");function Nc(t){var e=(t=t||document.body)[Tc];if(e)return e;e=new ja({eventOptions:{touchmove:{passive:!1},touchstart:{passive:!1}}}),t[Tc]=e;var n=Cc(e),r=function(){return e.getProxyElement()},o=function(t){xc.resizing=!1;var n=f.pendingResize,o=r();if(null==o||o.removeAttribute(Pc),null==l||l.hide(),n){var i=n.resizeTarget,a=n.resizeData,c=i.element,u=i.options;if(t.resizeElement=c,Object(Ra.safeApply)(u.onResizeEnd,[t,a]),u.overlay&&u.syncElementResize&&a){var s=Rc(a,c);Object.assign(c.style,s)}}!function(t){t.register("touchend:resizeEnd",null),t.register("mouseup:resizeEnd,mouseleave:resizeEnd",null)}(e),f.reset(),Ac.unmount()},i=null,a=function(){var t=new Set,e=r();e.removeAttribute(jc),t.add(e),n.values().forEach((function(e){var n=e[yc],r=s(n);r&&!t.has(r)&&(r.removeAttribute(jc),t.add(r))}))},c=function(e,n){var o="";if(i||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("rel","stylesheet")),e.length){var c=r();i.parentElement!==c&&c.appendChild(i)}if(e.length>1){var u=void 0,l=void 0;e[0].group===mc?(u=e[0],l=e[1]):(u=e[1],l=e[0]),o=u.getCursorStyle(n,{rotate:u.pos.y*l.pos.x*45})}else e.length>0&&(o=e[0].getCursorStyle(n));if(o){t.setAttribute(jc,"");var f=s(null==n?void 0:n.resizeOptions);null==f||f.setAttribute(jc,"")}else a();i.textContent=o?"[".concat(jc,"]{cursor:").concat(o,";"):""},u=function(t){var e=null,o=[],i=null;return bc.enable()&&n.values().some((function(n){var a=function(t,e){var n={items:[]};if(!bc.enable())return n;var r=ac(t),o=e[yc];if(!o)return n;if(!Object(Ra.getBlnValue)(o.enabled,[t]))return n;var i=o.modes,a=function(t){var e="function"==typeof t?t():t;return e?[].concat(e):[]}(e);if(!a.length)return n;return a.some((function(a){var c,u,l=ic(a).bounds();if(c=r,u={x:l.x-20,y:l.y-20,width:l.width+40,height:l.height+40},!(c.x>=u.x&&c.x<=u.x+u.width&&c.y>=u.y&&c.y<=u.y+u.height))return!1;var s=$a(a),f=s.points,p=s.originPoints,h={clientX:r.x,clientY:r.y,points:p,_points:f,resizeOptions:o},v={},d=Sc.filter((function(n){return!!(null==i?void 0:i.some((function(r){return"function"==typeof r?r({e:t,resizeItem:e,type:n.type}):r===n.type})))&&(!(v[n.group]||!n.test(h))&&(v[n.group]=n,!0))}));return d.length>0?(n.items=d,n.options=h,n.resizeTarget={element:a,options:o},!0):void 0})),n}(t,n),c=a.items,u=a.options,l=a.resizeTarget;if(c.length>0){e=l;var s=l.options;return s.selfTrigger?(o=function(t,e){var n=e.element;return sc(t.native?t.native.target:t.target,(function(t){if(t[yc])return!!t}),(function(t){return t===r()}))===n}(t,l)?c:[],i=u,!0):(s.through||function(t,e){var n=sc(t.native?t.native.target:t.target,(function(t){if(t[yc])return!!t}),(function(t){return t===r()}));if(!n)return!0;var o=n[yc].index||0;return(e.options.index||0)>=o||!!sc(e.element,(function(t){if(t===n)return!!t}),(function(t){return t===r()}))}(t,l)?(o=c,i=u):o=[],!0)}})),{resizeTarget:o.length>0?e:null,hitItems:o,options:i}};!function(t){var e=function(){return t.getProxyElement()};t.register("mousedown:resizeStart",e),t.register("touchstart:resizeStart",(function(){return e}),fc)}(e),function(t){var e=function(){return t.getProxyElement()};t.register("mousemove:resize",e),t.register("touchmove:resize",e,fc)}(e);var l=null,s=function(t){return(null==t?void 0:t.cursorElement)?"function"==typeof t.cursorElement?t.cursorElement():t.cursorElement:null},f={pendingResize:null,reset:function(){f.pendingResize=null}};return e.on("resizeStart",(function(t){if(bc.enable()){var n=u(t),o=n.resizeTarget;if(o){t.preventDefault(),t.stopPropagation();var i=n.hitItems,a=n.options,s=o.options,p=o.element;if(0!==i.length){if(t.resizeElement=p,s.cursorOverlay&&(l=l||(l=Mc())).show(e.getProxyElement()),Object(Ra.safeApply)(s.onResizeStart,[t]),!t.cancel){var h=function(t,e,n){var r=$a(e),o=r.originPoints,i=r.ctm,a=r.points;return{ctm:i,position:Qa(t,r,n),points:a,originPoints:o}}(ac(t),p),v=tc(h.ctm).scale,d=ac(t);f.pendingResize={resizeTarget:o,hitItems:i,clientInfo:h,originWidth:p.offsetWidth,originHeight:p.offsetHeight,startEventPosition:d,lastEventPosition:d,scale:v||{x:1,y:1}},c(i,a),function(t){var e=function(){return t.getProxyElement()};t.register("mouseleave:resizeEnd,mouseup:resizeEnd",e),t.register("touchend:resizeEnd",e,fc)}(e),Ac.config({showVertex:s.overlayVertex,showBorder:!1!==s.overlayBorder}),Ac.mount(r());var y=r();null==y||y.setAttribute(Pc,""),xc.resizing=!0}}else f.reset()}}})),e.on("resize",(function(t){if(bc.enable()){var e=ac(t),n=f.pendingResize;if(n){t.preventDefault();var r=n.resizeTarget,i=r.element,l=r.options;if(t.resizeElement=i,Object(Ra.safeApply)(l.onBeforeResize,[t,[e]]),t.cancel)o(t);else{var s=n.lastEventPosition,p=0,h=0;if(s&&(p=e.x-s.x,h=e.y-s.y),n.lastEventPosition=e,0!==p||0!==h){var v=n.originWidth,d=n.originHeight,y=n.scale,m=n.hitItems,g=n.clientInfo,x=g.points,b=g.position,E=g.ctm,w=Qa(ac(t),g),C={tx:0,ty:0,tw:0,th:0,x:x[0].x,y:x[0].y,dx:p,dy:h,width:0,height:0,originWidth:v,originHeight:d,modes:{}},O={mx:w.x-b.x,my:w.y-b.y},k={},_={},S=new Set,R=new Set;m.forEach((function(t){var e=t.compute(O),n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o,a=e.width,c=void 0===a?0:a,u=e.height,l=void 0===u?0:u;C.tx+=r/y.x,C.ty+=i/y.y,C.tw+=c/y.x,C.th+=l/y.y,k[t.group]=!0,_[t.type]=!0,t.points.forEach((function(e){t.group===gc?S.add(e):R.add(e)}))})),C.width=v+C.tw-C.tx,C.height=d+C.th-C.ty,C.modes=_,Object(Ra.safeApply)(l.onResize,[t,C]),t.cancel&&o(t),n.resizeData=C,E.e=E.f=0;var A;if((l.overlay||l.showResizeInfo)&&(A=x.map((function(t,e){var n={x:t.x,y:t.y};if(!S.has(e)&&!R.has(e))return n;var r=ec({x:S.has(e)?O.mx/y.x:0,y:R.has(e)?O.my/y.y:0},E),o=r.x,i=r.y;return n.x+=o,n.y+=i,n})),Ac.apply({className:l.overlayClassName,points:A,style:{display:"block"}})),!l.overlay&&l.syncElementResize){var M=Rc(C,i);Object.assign(i.style,M)}}}}else{var T=u(t),P=T.hitItems,j=T.options;c(P,j)}}else a()})),e.on("resizeEnd",(function(t){o(t)})),e.mount(t),e}var zc=function(){return(zc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bc={index:0,hitSize:5,selfTrigger:!1,through:!1,enabled:!0,onResizeStart:null,onResize:null,onResizeEnd:null,syncElementResize:!1,overlay:!0,overlayClassName:"",overlayVertex:!1,modes:[pc.Top,pc.Bottom,pc.Left,pc.Right],autoDestroyEventManager:!0},Ic=1;bc.create=function(){var t,e,n=null,r=Ic++,o=zc({},Bc);function i(){if(n){var e=Cc(n);if(e.get(r)===t)return;t&&e.put(r,t)}}return{apply:function(t,e){this.updateOptions(e),this.updateResizeItem(t)},updateResizeItem:function(e){e!==t&&(t&&delete t[yc],(t=e)[yc]=o,i())},updateOptions:function(t){if(!n||t&&t!==e){e=t,Object.assign(o,t);var a=Ec(o.container);if(o.container=a,o.overlayContainer=Ec(o.overlayContainer||a),n){if(n.getProxyElement()!==a)Cc(n).remove(r),n=Nc(a),i()}else n=Nc(a)}},destroy:function(){if(n){var i=Cc(n);t=null,e=null,o=zc({},Bc),i.remove(r),o.autoDestroyEventManager&&0===i.size()&&function(t){var e=t.getProxyElement();t.unmount(),e&&delete e[Tc]}(n),n=null}}}},Object.freeze(bc);Object(Ra.findUniqueKey)("EventManager"),Object(Ra.findUniqueKey)("RotationTargetOpt");function Lc(t,e){return"string"==typeof t?(e||document).querySelector(t):"function"==typeof t?t():t}var Dc=function(){return(Dc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var Vc={scaleEnabled:!0,dragEnabled:!0},Hc={dragEnabled:!0,scaleEnabled:!0,maxZoom:10,minZoom:.01,contextZoom:void 0};function Wc(t,e,n){var r=n.zoomElement,o=e.getProxyElement();return r?Lc(r):o}var Fc=function(t,e){return void 0===e&&(e=[]),"function"==typeof t?t.apply(void 0,e):!!t},qc=(function(){function t(t){this.zoomState={tx:0,ty:0,scale:1},this.options=Dc(Dc({},Hc),{passive:!1}),Object.assign(this.options,t),this.eventManager=new ja(this.options),this.initEvents()}t.prototype.syncZoomState=function(t){if(0===arguments.length)return Dc({},this.zoomState);Object.assign(this.zoomState,t)},t.prototype.syncOptions=function(t){if(0===arguments.length)return Dc({},this.options);Object.assign(this.options,t)},t.prototype.mount=function(t){this.eventManager.mount(Lc(t))},t.prototype.initEvents=function(){var t=this.eventManager,e=function(){return t.getProxyElement()},n=this.options,r=this.zoomState,o={startPos:null,moved:!1,zoomElement:null,reset:function(){o.startPos=null,o.moved=!1,o.zoomElement=null}},i=function(e,n){return sc(e.target,(function(t){var e;if(t){var r=null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"data-zoom-ignore");if(!r)return;return!!(r=+r&n)}}),(function(e){return e===t.getProxyElement()}))},a=function(e,n){if(e){var r=[].concat(e);return!!sc(n.target,(function(t){return r.some((function(e){return n=t,"function"==typeof(r=e)?!!r(n):"string"==typeof r?n.matches(r):!!r&&r===n;var n,r}))}),(function(e){return e===t.getProxyElement()}))}return!1};t.register("mousedown:dragStart",(function(e){if(2!==e.button&&!i(e,1)&&!a(n.dragExcludes,e)&&Vc.dragEnabled&&Fc(n.dragEnabled,[e]))return t.getProxyElement()})),t.register("mousemove:dragMove mouseup:dragEnd mouseleave:dragEnd",(function(){return t.getProxyElement()})),t.on("dragStart",(function(r){if(Object(Ra.safeApply)(n.onZoomDragStart,[r]),r.cancel)Object(Ra.safeApply)(n.onZoomDragEnd,[r]);else{var i=Wc(e(),t,n);o.startPos=ac(r,i),o.zoomElement=i}})),t.on("dragMove",(function(t){if(o.startPos)if(Vc.dragEnabled){o.moved=!0;var e=o.zoomElement,i=o.startPos,a=ac(t),c=ic(e).position(),u=a.x-i.x,l=a.y-i.y,s=r.tx||0,f=r.ty||0;s+=u-c.x,f+=l-c.y;var p=Dc({},r);p.tx=s,p.ty=f,Object(Ra.safeApply)(n.onZoomDragMove,[t,Dc(Dc({},p),{scale:p.scale||1})]),Object(Ra.safeApply)(n.onZoomChange,[t,Dc(Dc({},p),{scale:p.scale||1})]),t.cancel?(o.reset(),Object(Ra.safeApply)(n.onZoomDragEnd,[t])):Object.assign(r,p)}else o.reset()})),t.on("dragEnd",(function(t){o.reset(),Object(Ra.safeApply)(n.onZoomDragEnd,[t])})),t.register("wheel:scale",(function(e){if(!i(e,2)&&!a(n.scaleExcludes,e)&&Vc.scaleEnabled&&Fc(n.scaleEnabled,[e]))return t.getProxyElement()})),t.on("scale",(function(o){Object(Ra.safeApply)(n.onZoomScaleStart,[o,Dc({},r)]);var i=ic(Wc(e(),t,n)),a=ic(function(){var r=n.canvasElement,o=t.getProxyElement();return r?"function"==typeof r?r():"string"==typeof r?e().querySelector(r):o:o}()),c=function(t){var e=-t.deltaY;return 1===t.deltaMode?.05*e:e*(t.deltaMode?1:.01)}(o),u=Math.pow(2,c),l=function(t,e){var n=t.canvasElement,r=t.zoomElement,o=t.zoomObj,i=t.scale,a=t.zoomPoint;e=Object.assign({},Hc,e);var c=ac(a,r),u=n.position(),l=r.relativePosition(n);o.scale*i>e.maxZoom?i=e.maxZoom/o.scale:o.scale*i<e.minZoom&&(i=e.minZoom/o.scale);var s=e.contextZoom||Ga(r.node().parentNode);s="function"==typeof s?s():s;var f=Object(Ra.scaleObject)(s),p=f.x,h=f.y,v=l.x-o.tx*p,d=l.y-o.ty*h,y=i,m=a.x-c.x*y-v*y-u.x,g=a.y-c.y*y-d*y-u.y;return o.tx=m/p,o.ty=g/h,o.scale*=i,o}({canvasElement:a,zoomElement:i,zoomObj:{tx:r.tx||0,ty:r.ty||0,scale:r.scale||1},scale:u,zoomPoint:o},n);o.cancel||Object.assign(r,l),o.cancel||(Object(Ra.safeApply)(n.onZoomScale,[o,Dc({},r)]),Object(Ra.safeApply)(n.onZoomChange,[o,Dc({},r)])),o.cancel||t.getProxyElement()===document.body&&n.passive||o.preventDefault()}))},t.prototype.destroy=function(){this.eventManager.unmount()}}(),{ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",shift:"shiftKey"});Object.values(qc);var Uc=function(){function t(e){s()(this,t),this.editor=e}return p()(t,[{key:"destroy",value:function(){var t=this._container;null!=t&&t.parentNode&&t.parentNode.removeChild(t),this._deconnect&&(this._deconnect(),this._deconnect=null),this._container=null,this._target=null}},{key:"setVisible",value:function(t){this._container&&Object.assign(this._container.style,{opacity:t?"1":"0"})}},{key:"executeDelete",value:function(){if(this.isActive()){var t=this._target;if(this.destroy(),!t)return null;var e=t.previousElementSibling,n=t.nextElementSibling,r=n,o=0;if(fr(t),Wr(e)&&Wr(n)&&(e.textContent?n.textContent||(r=e,o=e.textContent.length,fr(n)):fr(e)),Wr(r))try{var i=this.editor.commandManager.editor.newRange();i.startElement=r,i.startOffset=o,i.select()}catch(t){console.warn("range losing !")}return t}}},{key:"getTarget",value:function(){return this._target}},{key:"getContainer",value:function(){return this._container}},{key:"isActive",value:function(){return!!this._container}},{key:"setActive",value:function(t,e){var n=this;if(t!==this._target)if(t){this.destroy();var o=r.create(O.createElement(ct)).css({"will-change":"transform,left,top,width,height"});e&&o.append(e),this._container=o.node(),this._target=t;var i=this.editor.getWrapper(),a=function(){if(n._container){var e=r.getCTM(t,i),a=t.offsetWidth,c=t.offsetHeight;o.css({left:-a/2+"px",top:-c/2+"px",width:a+"px",height:c+"px",transform:e})}};a(),i.appendChild(this._container),this._deconnect=r.observeViewport(this.editor.getContainer(),(function(){a()}),{throttle:0})}else this.destroy()}}]),t}();function Zc(t){var e=$r.current(t);if(e)return Kc(t.getContainer(),e.startContainer,e.endContainer)?e:null}function Kc(t,e,n){for(var r=e;r&&r!==t;){if(Kr(r))return!1;if(O.isValidElement(r))break;r=r.parentNode}if(e&&(!r||r!==t&&!t.contains(r)))return!1;for(r=n;r&&r!==t;){if(Kr(r))return!1;if(O.isValidElement(r))break;r=r.parentNode}return!(n&&(!r||r!==t&&!t.contains(r)))}var Yc=Object(Ra.findUniqueKey)("unmount"),Xc=Object.create(null),Gc=function(){function t(e){s()(this,t),this._data={},this._container=null,this._wrapper=null,this.parser=new ba,this.selectState=new Uc(this),this._customUnmountElements=[],this.customElementMounts=Object.create(null),this.editMode=!1,this.loggedCommands={bold:!0,italic:!0,link:!0,style:!0,list:!0,insertBox:!0,insertImage:!0,insertTable:!0,tableSelection:!0,blockStyle:!0,sup:!0,sub:!0,stroke:!0,underline:!0,overline:!0,header:!0,paragraph:!0,insertHr:!0,insertCheckbox:!0,quote:!0,resetText:!0,keydown:!0,insertCustom:!0},this._selectionEnabled=!1,this.commandFilter=new to,this.config={behavior:{operations:{checkbox:["rotate"],hr:["fullWidth","rotate"]}}};var n=e||{},r=n.log,o=void 0===r||r,i=n.editMode,a=void 0===i||i;this.updater=new Sa(this),this.createUI(),this.initParser(),this.baseEvents=new Ca(this),this.events=new Ca(this),this.editMode=!!a,this._log=o,this.actionManager=new to,this.commandManager=new wt(this),this.cursor=new da(this),this.init()}return p()(t,[{key:"init",value:function(){var t,e,n,r;t=this.actionManager,bi.forEach((function(e){var n=e.type;e.actions.forEach((function(e){t.add(n,e)}))})),n=(e=this).events,(r=e.baseEvents).install(Ii),r.install(Hi),n.install(Ei),n.install(wi),n.install(_i),n.install(Ai),n.install(Mi),n.install(Ti),n.install(Pi),n.install(ji),n.install(Ni),zi(e)}},{key:"selectionEnabled",value:function(t){if(0===arguments.length)return this._selectionEnabled;this._selectionEnabled=!!t}},{key:"saveRangeContext",value:function(){var t=Zc(this);if(t)return this._range=t}},{key:"newRange",value:function(t){return new $r(this,t)}},{key:"getNormalizedRange",value:function(){return Zc(this)||this._currentRange}},{key:"removeRanges",value:function(){return $r.removeAllRanges(this)}},{key:"saveLog",value:function(){this._log&&this.commandManager.execCommand("log","push")}},{key:"blur",value:function(){this.cursor.update(null),this.selectState.setActive(null)}},{key:"execCommand",value:function(t,e,n){var r=this,o=this.commandFilter,i=Array.prototype.slice.call(arguments),a=null;return o.execute(t,{editor:this,params:e},(function(e){a=r.execute((function(){return r.loggedCommands[t]&&r.saveLog(),r.commandManager.execCommand.apply(r.commandManager,i)})),n&&n(e)})),a}},{key:"execute",value:function(t){if("function"!=typeof t)return t;var e=this.getNormalizedRange();e||(e=this._range);try{return this._currentRange=e,t()}finally{this._currentRange=null}}},{key:"checkUnmountCustomElements",value:function(){var e=this;this._pendingCheckUnmount||(this._pendingCheckUnmount=fo((function(){e._pendingCheckUnmount=null;var n=e._customUnmountElements,r=e.getContainer();r&&(e._customUnmountElements=n.filter((function(e){return!!r.contains(e)||(t.unmountCustomElement(e),!1)})))})))}},{key:"mountEvents",value:function(){var t=this.getWrapper();this.isEditMode()?this.events.mount(t):this.events.unmount()}},{key:"render",value:function(t){var e=this.getWrapper();this.cursor&&e.appendChild(this.cursor.render()),this._render(t);var n,r,o=this.getContainer();O.isElementInstanceOf(o.firstElementChild,E)||(n=o,r=Ar(),lr.unshiftNode(n,r)),o.setAttribute("tabindex","-1"),this.baseEvents.mount(e),this.mountEvents(),this.events.emit("didMount")}},{key:"defineCustomMount",value:function(t,e){if("function"!=typeof e)throw new TypeError("mount is not a function type!");this.customElementMounts[t]=e}},{key:"createUI",value:function(){var t=this._wrapper=document.createElement("div");t.className=Yo("render");var e=this._container=document.createElement("div");e.className=Yo("content"),e.spellcheck=!1,t.appendChild(e)}},{key:"initParser",value:function(){var t;t=this,ba.registerIgnoreAttribute("ky-active"),t.parser.registerTransfer("div",{stringify:function(e){if(e===t.getContainer())for(var n=e.firstElementChild;n;){var r=n.nextElementSibling;this.next(n),n=r}}}),t.parser.registerTransfer(N.tagName,{stringify:function(e){var n,r=this.range;r||(r=this.range=t.getNormalizedRange());var o=N.tagName,i=ba.getElementAttrString(e,(n={},u()(n,Ea.START_CURSOR,!0),u()(n,Ea.END_CURSOR,!0),n));r&&(r.startElement===e&&(i&&(i+=" "),i+="".concat(Ea.START_CURSOR,'="').concat(r.startOffset,'"')),r.endElement===e&&(i&&(i+=" "),i+="".concat(Ea.END_CURSOR,'="').concat(r.endOffset,'"'))),this.append("<".concat(o).concat(i?" "+i:"",">")),this.append(e.innerHTML),this.append("</".concat(o,">"))}}),t.parser.registerTransfer("br",{stringify:function(t){this.append("<br/>")}}),t.parser.registerTransfer((function(t){return Zr(t)}),{stringify:function(t){var e=it.tagName,n=ba.getElementAttrString(t);this.append("<".concat(e).concat(n?" "+n:"",">")),this.append("</".concat(e,">"))},parse:function(t){return pr(t),t}}),t.parser.registerTransfer((function(t){var e=String(t.tagName).toLowerCase();return"style"===e&&!t.hasAttribute("style-setting")||O.isTagNameOutputDisabled(e)}),{stringify:function(t){}})}},{key:"getContainer",value:function(){return this._container}},{key:"getWrapper",value:function(){return this._wrapper}},{key:"put",value:function(t,e){this._data[t]=e}},{key:"get",value:function(t){return this._data[t]}},{key:"remove",value:function(t){delete this._data[t]}},{key:"_render",value:function(t){var e=this,n=this.getContainer();!function(t){for(;t.firstChild;)fr(t.firstChild)}(n);for(var r=t.el,o=t.content,i=this.parser.parse(o||"").body.firstElementChild;i;){var a=i.nextElementSibling;n.appendChild(i),i=a}var c=this.getElementsByElementType(it);r.appendChild(this.getWrapper()),c.forEach((function(t){e.mountCustomElement(t)}))}},{key:"mountCustomElement",value:function(t){try{if(O.isElementInstanceOf(t,it)){var e=t.getAttribute("type")||"",n=this.customElementMounts[e]||Xc[e],r=t[Yc];if(r&&r.mount)return;if(r=t[Yc]={context:this,mount:!0},n){var o=n(t,this);if("function"==typeof o){r.unmount=o;var i=this._customUnmountElements;-1===i.indexOf(t)&&i.push(t)}}}}catch(t){}}},{key:"getElementsByTagName",value:function(t,e){return this.getElementsByElementType(O.getByTagName(t).constructor,e)}},{key:"getElementsByElementType",value:function(e,n){var r=this.getContainer();return t.getElementsByElementType(r,e,n)}},{key:"setEditMode",value:function(t){var e=!!t;this.editMode!==e&&(this.editMode=e,this.mountEvents(),e||this.blur(),this.events.emit("editModeChange",this,[e]))}},{key:"isEditMode",value:function(){return this.editMode}},{key:"destroy",value:function(){this.events.emit("willDestroy"),this.events.unmount()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"stringify",value:function(){return this.parser.stringify(this.getContainer())}},{key:"parse",value:function(t){return this.parser.parse(t)}},{key:"scrollTop",value:function(t){var e=this.getContainer();if(0===arguments.length)return e.scrollTop;e.scrollTop=t}},{key:"scrollLeft",value:function(t){var e=this.getContainer();if(0===arguments.length)return e.scrollLeft;e.scrollLeft=t}}],[{key:"defineCustomMount",value:function(t,e){if("function"!=typeof e)throw new TypeError("mount is not a function type!");Xc[t]=e}},{key:"unmountCustomElement",value:function(t){try{if(O.isElementInstanceOf(t,it)){var e=t[Yc];if(delete t[Yc],e){var n=e.unmount,r=e.context,o=[].concat(r._customUnmountElements),i=o.indexOf(t);-1!==i&&(o.splice(i,1),r._customUnmountElements=o),"function"==typeof n&&n(t)}}}catch(t){console.error(t)}}},{key:"getElementsByElementType",value:function(t,e,n){var r=[];return function o(i){if(i&&!(n&&r.length>=n)&&(O.isElementInstanceOf(i,e)&&r.push(i),!(n&&r.length>=n)&&i&&(t===i||!Zr(i))))for(var a=i.firstElementChild;a;)o(a),a=a.nextElementSibling}(t),r}}]),t}();function Jc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}Gc.isRangeElementValid=Kc,Gc.defineCustomMount("ky-image",(function(t){var e=t.getAttribute("src")||"",n=new Image;n.src=e,pr(t),t.appendChild(n)}));var $c=O.getElementType(N),Qc=function(t){d()(n,t);var e=Jc(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).currentRange={},r.elementType=$c,r}return p()(n,[{key:"syncElementState",value:function(t){return t}},{key:"visitRangeTextElement",value:function(t,e){var n=this.getContainer(),r=t.startElement,o=t.endElement;if(r!==o){var i=!1;!function t(r){if(!i&&gt.isElement(r))if(Hr(r)){var c=sr(r),u=r.parentElement;if(e(r,{stop:a}),r===o&&(i=!0),!i){for(;!i&&c;)t(c),c=sr(c);if(!i&&u!==n){for(;u&&u!==n;){if(sr(u))break;u=u.parentElement}var l=sr(u);l&&t(l)}}}else for(var s=Array.prototype.slice.call(r.children),f=s.length,p=0;!i&&p<f;p++)t(s[p])}(r)}else e(r);function a(){i=!0}}},{key:"isActive",value:function(t){return n.isElementType(t)}},{key:"isRangeActive",value:function(t){var e=this,n=t.startElement;if(n===t.endElement)return this.isActive(n);var r=!0,o=Date.now();return this.visitRangeTextElement(t,(function(t,n){(Date.now()-o>=1500||!e.isActive(t))&&(r=!1,n.cancel())})),r}},{key:"isEnabled",value:function(){return!0}},{key:"isNeedSyncState",value:function(t){var e=this.isActive(t);return this.isEnabled()!==e}},{key:"execCommandAtElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=t.textContent,o=this.currentRange;if(this.isNeedSyncState(t))if(r&&1!==arguments.length){var i=this;arguments.length<3&&(n=r.length);var a=r.slice(0,e),c=r.slice(e,n),u=r.slice(n),l=document.createDocumentFragment();[a,c,u].forEach((function(e,n){if(e){var r=t.cloneNode(),a=1===n?i.syncElementState(r):r;e=a.textContent||e,a.textContent=e,1===n&&(o.startElement===t&&(o.startElement=a,o.startOffset=0),o.endElement===t&&(o.endElement=a,o.endOffset=e.length)),l.appendChild(a)}})),t.parentElement.replaceChild(l,t)}else this.syncElementState(t)}},{key:"execCommandAtRange",value:function(){var t=this.currentRange=this.getRange();this._execCommandAtRange(),t.select()}},{key:"_execCommandAtRange",value:function(){var t=this,e=this.currentRange,n=e.startElement,r=e.endElement,o=e.startOffset,i=e.endOffset;if(n!==r)this.visitRangeTextElement(e,(function(a){var c=a.parentElement,u=c.lastElementChild===a;n===a?t.execCommandAtElement(a,o):r===a?t.execCommandAtElement(a,0,i):t.execCommandAtElement(a),u&&_r(c,{range:e,match:Hr})}));else{if(!this.isNeedSyncState(n))return;Hr(n)&&t.execCommandAtElement(n,o,i)}}},{key:"executeWhileCollapse",value:function(){var t=this.commandManager,e=this.getRange(),n=t.pendingCommands,r=e.startElement,o=this.isEnabled();if(n.isEnabled()&&!n.range.equals(e)&&n.clear(),n.isEnabled()){var i=n.element;o!==this.isActive(i)&&(i=this.syncElementState(i)),Or(r,i)&&n.clear()}else{if(o!==this.isActive(r)){var a=r.cloneNode();a=this.syncElementState(a),n.element=a}vr(r)&&(e.startOffset=0,e.isTextEmpty=!0),n.range=e}e.select()}}],[{key:"createElement",value:function(){return $c.create()}},{key:"isElementType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O.isElementInstanceOf(t,N,e)}}]),n}(gt);function tu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}function eu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=wr(t,n);return Object.keys(n).some((function(t){var n=r[t];if(e.hasOwnProperty(t)){var o=e[t];if(-1===o.indexOf(n))return o.push(n),!0}else e[t]=[n]})),e}var nu=function(t){d()(n,t);var e=tu(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).attrName="style",r.commandType=dt,r}return p()(n,[{key:"initModel",value:function(){return{value:null}}},{key:"getRangeStyle",value:function(t,e){var n={},r=Date.now();return this.visitRangeTextElement(t,(function(t,o){if(o&&(Date.now()-r>=1500||Object.keys(e).every((function(t){var e=n[t];return e&&e.length>1}))))return void o.stop();eu(t,n,e)})),n}},{key:"getStyle",value:function(t){var e=t.type,n=t.styleNames,r=this.commandManager.editor,o=[].concat(n).reduce((function(t,e){return t[e]=!0,t}),{}),i=this.getRange(),a={};return"block"===e?(eu(Ir(i.startElement,r.getContainer()),a,o),a):i.collapsed?(eu(i.startElement,a,o),a):this.getRangeStyle(i,o)}},{key:"getState",value:function(t){var e=this.createState();return e.data=this.getStyle.apply(this,arguments),e}},{key:"isActive",value:function(t){if(1!==t.nodeType)return!1;var e=this.getModel(),n=wr(t.getAttribute("style")||""),r=e.value||{};return Object.keys(r).every((function(t){if(!n)return!1;var e=r[t];return n[t]===e}))}},{key:"isEnabled",value:function(){return!0}},{key:"syncElementState",value:function(t){var e=this.getModel(),n=wr(t.getAttribute("style")||""),r=e.value;r&&Object.assign(n,r);var o=n.toString();return o?t.setAttribute("style",o):t.removeAttribute("style"),t}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=br(t),e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(Qc);nu.fillStyleValues=eu;var ru=function(){function t(e){s()(this,t),this.values={},e&&(this.values=String(e).split(/\s+/).reduce((function(t,e){return t[e]=!0,t}),{}))}return p()(t,[{key:"addValue",value:function(t){if(t){var e=String(t).split(/\s+/),n=this.values;e.forEach((function(t){t&&!n.hasOwnProperty(t)&&(n[t]=!0)}))}}},{key:"removeValue",value:function(t){if(t){var e=String(t).split(/\s+/),n=this.values;e.forEach((function(t){delete n[t]}))}}},{key:"contains",value:function(e){if(!e)return!1;e instanceof t||(e=new t(e));var n=this.values;return Object.keys(e.values).every((function(t){return n.hasOwnProperty(t)}))}},{key:"toString",value:function(){return Object.keys(this.values).join(" ")}}]),t}();function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var iu={"text-decoration":1},au=function(t){d()(n,t);var e=ou(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[]}}},{key:"getStyleItems",value:function(){return this.getModel().styles||[]}},{key:"isCompositionStyleValue",value:function(t,e){return iu.hasOwnProperty(t)}},{key:"isStyleValueEqual",value:function(t,e,n){return e&&n&&this.isCompositionStyleValue(t,n)?new ru(e).contains(n):e===n}},{key:"syncStyleValue",value:function(t){var e=this,n=this.isEnabled();this.getStyleItems().forEach((function(r){var o=t[r.name];if(n)if(e.isCompositionStyleValue(r.name,r.value)){var i=new ru(o);i.addValue(r.value),t[r.name]=i.toString()}else t[r.name]=r.value;else if(o){var a=new ru(o);a.removeValue(r.value),t[r.name]=a.toString()}}))}},{key:"isActive",value:function(t){var e=this;if(1!==t.nodeType)return!1;var n=wr(t.getAttribute(this.attrName)||"");return this.getStyleItems().every((function(t){return e.isStyleValueEqual(t.name,n[t.name],t.value)}))}},{key:"isEnabled",value:function(){return this.getModel().enabled}},{key:"syncElementState",value:function(t){if(0===this.getStyleItems())return null;var e=this.attrName,n=wr(t.getAttribute(e)||"");this.syncStyleValue(n);var r=n.toString();return r?t.setAttribute(e,r):t.removeAttribute(e),t}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange();return n.collapsed?(e.data=this.isActive(n.startElement),e):(e.data=this.isRangeActive(n),e)}},{key:"execute",value:function(t){var e,n=this.getRange(),r=this.getModel();r.enabled=0===arguments.length?!(null!==(e=this.getState())&&void 0!==e&&e.data):!!t,n.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(nu);function cu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var uu=function(t){d()(n,t);var e=cu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"font-weight",value:"bold"}]}}}]),n}(au);function lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var su=function(t){d()(n,t);var e=lu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"font-style",value:"italic"}]}}}]),n}(au);function fu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var pu=function(t){d()(n,t);var e=fu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){var e=this.commandManager,n=t.element,r=t.style,o=t.attrs,i=t.resize,a=void 0!==i&&i,c=this.getRange().startOffset,u=n;if(u||(u=this.createElement()),a){var l={rotate:t.rotate};a&&"boolean"!=typeof a&&(l.resizeModes=a);var s=this.createBehaviorElement(l);s.appendChild(u),u=s}return mr(u,{style:r,attrs:o}),e.execCommand("input",{element:u,offset:c,endOffset:c}),u}}]),n}(gt);function hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var vu=O.getElementType(L),du=function(t){d()(n,t);var e=hu(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=vu,r}return p()(n,[{key:"isEnabled",value:function(){return!0}},{key:"createLinkElement",value:function(){var t=this.getModel(),e=this.createElement(),n=t.value;return n&&Object.keys(n).forEach((function(t){var r=n[t];r&&"text"!==t&&e.setAttribute(t,r)})),e}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=t,e.collapsed||e.extractContents();var r=this.createLinkElement(),o=null==t?void 0:t.text;r.setAttribute("target","_blank"),r.setAttribute("href",t.href);var i=ur();i.textContent=o,r.appendChild(i),_()(x()(n.prototype),"execute",this).call(this,{element:r})}}]),n}(pu);function yu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}function mu(t,e){return zr(t,Fr,e)}var gu=function(t){d()(n,t);var e=yu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"backspaceUntilNextTextElement",value:function(t){var e=this.commandManager.editor,n=t.startElement;if(n&&!Fr(n)){var r=Br(n);r&&(n=r)}var o,i=mu(n,e.getContainer()),a=0;i&&(Wr(i)?(o=i,a=i.textContent.length):hr(o=ur(),i),Vr({start:n,containStart:!0,end:o}),(t=t.new()).startElement=o,t.startOffset=a,_r(o.parentElement,{match:Wr,range:t}),t.select())}},{key:"backspaceTextNormal",value:function(t,e){var n=this.commandManager.editor,o=t.startElement,i=t.startOffset,a=(e||{}).count,c=void 0===a?1:a,u=Li((function(){return mu(o,n.getContainer())})),l=Li((function(){return Ir(u(),n.getContainer())})),s=Li((function(){return Ir(o,n.getContainer())})),f=o.textContent,p=f.slice(0,i),h=f.slice(i),v=vr(p);if(v&&p&&(o.textContent=h),!v){var d=(p=p.slice(0,Math.max(0,p.length-c)))+h,y=o,m=p.length;o.textContent=d;var g=vr(p),x=g;if(g){var b=u();if(b)l()===s()&&(Wr(b)?(y=b,m=b.textContent.length,Vr({start:o,containStart:vr(d),end:b}),x=!0):b&&Vr({start:o,end:b}));else if(vr(d)){if(Wr(y.nextElementSibling)){var w=y.nextElementSibling;fr(y),y=w,m=0}x=!0}}return(t=t.new()).startElement=y,t.startOffset=m,x&&yr(t),void t.select()}var C=u(),k=this.findNearestMatch(C,(function(t){return O.isElementInstanceOf(t,E)}));k&&(k!==this.findNearestMatch(o,(function(t){return O.isElementInstanceOf(t,E)}))&&(C=null));if(C){var _,S,R=l(),A=s();if(R===A||A.contains(R)){var M=o,T=0,P=Wr(C);!P&&Wr(C.previousElementSibling)&&(C=C.previousElementSibling,P=!0);var j=P;if(Vr({start:o,containStart:P&&vr(o),end:C,containEnd:!P,container:n.getContainer()}),P){M=C;var N=C.textContent||"";T=N.length,j=vr(N)}return(t=t.new()).startElement=M,t.startOffset=T,j&&yr(t),void t.select()}for(var z=document.createDocumentFragment(),B=A.firstElementChild,I=0;B;){var L=B.nextElementSibling;O.isHelpElement(B)||0==I++&&Wr(B)&&vr(B)?(fr(B),B=L):(z.appendChild(B),B=L)}var D=C,V=0,H=!1;if(Wr(D)){var W=C.textContent||"";V=W.length,H=vr(W)}else Wr(z.firstElementChild)?D=D.nextElementSibling:hr(D=ur(),C);var F=A.parentElement;Vr({start:A,containStart:!0,end:D,container:n.getContainer()}),F===C.parentElement?hr(z,D):C.parentNode.appendChild(z),(t=t.new()).startElement=D,t.startOffset=V,H&&yr(t),t.select()}else{var U=r.findUpUtil(o,(function(t){return O.isElementInstanceOf(t,E)}),(function(t){return t===n.getContainer()}));if(vr(o)&&(_=o).getAttributeNames().forEach((function(t){S&&S.hasOwnProperty(t)||_.removeAttribute(t)})),U){var Z=s();if(Z&&!O.isElementInstanceOf(Z,q)){var K,Y=document.createDocumentFragment();dr(Z,Y),null===(K=Z.parentElement)||void 0===K||K.replaceChild(Y,Z)}}t.select()}}},{key:"backspaceWhileCollapsed",value:function(t,e){Wr(t.startElement)?this.backspaceTextNormal(t,e):this.backspaceUntilNextTextElement(t)}},{key:"backspaceAtRange",value:function(t){var e=this.commandManager.editor,n=t.startElement,r=t.startOffset,o=t.endElement,i=t.endOffset;if(n===o){var a=n.textContent;n.textContent=a.slice(0,r)+a.slice(i)}else{var c={start:o,containStart:!Wr(o),end:n,containEnd:!Wr(n)};c.containEnd||(n.textContent=n.textContent.slice(0,r)),c.containStart||(o.textContent=o.textContent.slice(i),c.containStart=vr(o)),Vr(c)}if(Wr(n))(t=t.new()).startElement=n,t.startOffset=r,yr(t),t.select();else{var u=e.getContainer();if(u.firstElementChild)Wr(o)&&((t=t.new()).startElement=o,t.startOffset=0,yr(t),t.select());else{var l=cr(),s=ur();l.appendChild(s),u.appendChild(l),(t=t.new()).startElement=s,t.startOffset=0,t.select()}}}},{key:"execute",value:function(t){var e=this.getRange();if(e.collapsed)this.backspaceWhileCollapsed(e,t);else{if(!qr(e,this.getContainer()))return;this.backspaceAtRange(e)}}}]),n}(gt);function xu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var bu=function(t){d()(n,t);var e=xu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){var e=this.commandManager,n=e.editor,r=this.getRange();if(r.collapsed){var o=r.startElement,i=r.startOffset,a=(t||{}).count,c=void 0===a?1:a,u=Li((function(){return Nr(o,Fr,(function(t){return t===n.getContainer()||O.isElementInstanceOf(t,V)}))}));if(Wr(o)){var l=o.textContent||"",s=l.slice(0,i),f=l.slice(i);if(f.length>0){if(l=s+(f=f.slice(Math.max(0,c))),o.textContent=l,!l){var p=u();Wr(p)?((r=r.new()).startElement=p,r.startOffset=0,Vr({start:p,end:o,containEnd:!0}),yr(r)):yr(r)}return void r.select()}}var h=u();if(h)if(Wr(h)){var v=h.textContent||"";v=v.slice(1),h.textContent=v,(r=r.new()).startElement=h,r.startOffset=0,yr(r),r.select()}else Vr({start:h,containStart:!0,end:o}),yr(r),r.select()}else e.execCommand("backspace")}}]),n}(gt);function Eu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var wu=function(t){d()(n,t);var e=Eu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){var e=t||{},n=e.offset,r=e.endOffset,o=e.element,i=this.getRange();void 0===r&&(r=n);var a=i.startElement;if(Qc.isElementType(a)){var c=a.textContent||"",u=c.slice(0,n),l=c.slice(r),s=document.createDocumentFragment(),f=a.cloneNode();f.textContent=u,s.appendChild(f),s.appendChild(o);var p=a.cloneNode(),h=document.createTextNode(l);p.appendChild(h),s.appendChild(p),a.parentElement.replaceChild(s,a),i=i.new();var v=!1;if(Qc.isElementType(o))i.startContainer=o.lastChild||o,o.lastChild&&(i.startOffset=o.lastChild.textContent.length),v=!0;else{var d=Pr(o);!d&&Wr(o.nextElementSibling)?(d=o.nextElementSibling,i.startElement=d,i.startOffset=0,v=!0):Wr(d)&&(i.startElement=d,i.startOffset=d.textContent.length,v=!0)}kr(o.parentNode,{match:function(t){return Qc.isElementType(t)},range:i}),v&&i.select()}}}]),n}(gt);function Cu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Ou=function(t){d()(n,t);var e=Cu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){var e=this.getRange(),n=e.collapsed,r=e.startElement,o=e.startContainer,i=e.startOffset,a=this.findNearest(o);if(a){var c,u=function(t){return O.isElementInstanceOf(t,G)}(a)?cr():a.cloneNode();if(n){var l=a.lastChild,s=0,f=Wr(l);if(gt.isTextNode(l)||f){var p=l.textContent;s=p?p.length:0}(e=e.new()).startContainer=o,e.startOffset=i,f?e.endElement=l:e.endContainer=l,e.endOffset=s;var h=e.extractContents();Hr(h.lastElementChild)||h.appendChild(Wr(r)?r.cloneNode():(new N).create()),yr({startElement:r,startOffset:0});for(var v=h.firstChild;v;){var d=v.nextSibling;if(O.isValidElement(v))u.appendChild(v);else if(3===v.nodeType&&!vr(v)){var y=Wr(r)?r.cloneNode():Qc.createElement();y.appendChild(v),u.appendChild(y)}v=d}_r(u,{match:Wr,range:e}),e=e.new();var m=function(t){for(;t;){if(Wr(t))return t;t=t.firstElementChild}return null}(u);m||(m=Qc.createElement(),u.firstChild?u.insertBefore(m,u.firstChild):u.appendChild(m)),c=m}else{var g=this.findNearest(e.endContainer);if(e.extractContents(),g)for(var x=g.firstElementChild;x;){x=x.nextElementSibling}var b=Qc.createElement();u.appendChild(b),c=b,e=e.new()}!function(t){if(!t.firstElementChild){var e=Qc.createElement();t.appendChild(e)}}(a),hr(u,a),e.startElement=c,e.startOffset=0,e.select()}}}]),n}(so);function ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var _u=function(t){d()(n,t);var e=ku(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){if(t){var e=this.commandManager,n=e.pendingCommands,r=this.getRange(),o=r.startContainer,i=r.startOffset,a=r.startElement,c=0,u=null;if(O.isElementInstanceOf(a,B)||O.isElementInstanceOf(a.parentNode,B)){var l=i,s=a.textContent||"",f=(s=s.slice(0,l)+s.slice(l)).slice(0,l);(function(t){var e=t.parentNode;return!!e&&e.firstElementChild===t}(a)&&!f||function(t){var e=t.parentNode;return!!e&&e.lastElementChild===t}(a)&&f===s)&&(c=1,s&&!f&&(c=2),u=O.isElementInstanceOf(a,B)?a:a.parentElement)}if(n.isEnabled()){var p=n.range,h=p.startContainer,v=p.startOffset,d=p.startElement;if((h===o||d===a)&&(i===v||vr(a))){var y=n.element.cloneNode();return void(c?(y.textContent=t,1===c?hr(y,u):u.parentElement.insertBefore(y,u),(r=r.new()).startElement=y,r.startOffset=y.textContent.length,r.select()):(y.textContent=t,e.execCommand("input",{offset:i,endOffset:i,element:y})))}}if(c){var m=a.textContent,g=m.slice(0,i);if(!g||g===m){var x=Qc.createElement();x.textContent=t;var b=O.isElementInstanceOf(a,B)?a:a.parentNode;return 1===c?hr(x,b):b.parentElement.insertBefore(x,b),(r=r.new()).startElement=x,r.startOffset=t.length,void r.select()}}if(Qc.isElementType(a)){var E=a.textContent,w=E.slice(0,i);return vr(w)&&(i=0),E=w+t+E.slice(i),a.textContent=E,(r=r.new()).startElement=a,r.startOffset=i+t.length,kr(a.parentNode,{match:function(t){return Qc.isElementType(t)},range:r}),void r.select()}!function(t,e){var n=t.startContainer,r=Qc.createElement();r.textContent=e,n.parentNode.replaceChild(r,n),(t=t.new()).startElement=r,t.startOffset=e.length,_r(r.parentNode,{match:function(t){return Qc.isElementType(t)},range:t}),t.select()}(r,t)}}}]),n}(gt);function Su(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Ru=new R,Au=function(t){d()(n,t);var e=Su(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=Ru,r}return p()(n,[{key:"execute",value:function(t){return _()(x()(n.prototype),"execute",this).call(this,t)}}]),n}(pu);function Mu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Tu=O.getElementType(it),Pu=function(t){d()(n,t);var e=Mu(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=Tu,t))}return p()(n,[{key:"execute",value:function(t){var e=t||{},r=e.type,o=e.width,i=e.height,a=e.style,c=e.attrs,u=e.rotate,l=void 0===u||u,s=e.resize,f=void 0===s||s;if("string"!=typeof r&&"number"!=typeof r)throw new Error("params.type is invalid !");var p=this.elementType.create({innerHTML:null==t?void 0:t.innerHTML,type:r});mr(p,{style:a,attrs:c});var h={};f&&(o&&(h.width="number"==typeof o?"".concat(o,"px"):o),i&&(h.height="number"==typeof i?"".concat(i,"px"):i)),_()(x()(n.prototype),"execute",this).call(this,{element:p,rotate:l,resize:f,style:h}),this.commandManager.editor.mountCustomElement(p)}}]),n}(Au);function ju(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Nu=function(t){d()(n,t);var e=ju(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){var e=t||{},r=e.title,o=e.src,i=e.width,a=void 0===i?100:i,c=e.height,u=void 0===c?100:c;_()(x()(n.prototype),"execute",this).call(this,{resize:!0,type:"ky-image",width:a,height:u,attrs:{class:Yo("image"),src:o,title:r}})}}]),n}(Pu);function zu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Bu=function(t){d()(n,t);var e=zu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(){var t=this.getRange();if(!t.collapsed){var e=t.endContainer,n=t.endOffset;return(t=t.new()).startContainer=e,t.startOffset=n,void t.select()}var r=t.startElement,o=t.startOffset;if(Wr(r)){var i=r.textContent||"",a=i.slice(0,o),c=i.slice(o),u="".concat(a,"&nbsp;&nbsp;&nbsp;&nbsp;").concat(c);r.innerHTML=u,(t=t.new()).startElement=r,t.startOffset=a.length+4,t.select()}}}]),n}(gt);function Iu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}function Lu(t,e){for(;t&&t!==e&&(n=t,!O.isElementInstanceOf(n,V));)t=t.parentNode;var n;return t}var Du=function(t){d()(n,t);var e=Iu(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).commandType=dt,r}return p()(n,[{key:"initModel",value:function(){return{value:null}}},{key:"syncElementState",value:function(t){var e=this.getModel(),n=wr(t.getAttribute("style")),r=e.value;r&&Object.assign(n,r);var o=n.toString();return o?t.setAttribute("style",o):t.removeAttribute("style"),t}},{key:"isActive",value:function(t){if(1!==t.nodeType)return!1;var e=this.getModel(),n=wr(t.getAttribute("style")||""),r=e.value||{};return Object.keys(r).every((function(t){return!!n&&n[t]===r[t]}))}},{key:"executeAtRange",value:function(){!function(t){var e=t.container,n=t.command,r=t.range,o=r.startElement,i=r.endElement,a=o,c=[],u=function(t){-1===c.indexOf(t)&&(c.push(t),n.syncElementState(t))},l=function t(n){var r=Hr(n);if(n===i&&r)return u(Lu(n,e)),!1;if(!r){for(var o=n.firstElementChild;o;)if(-1===c.indexOf(o)){var a=o.nextElementSibling,l=t(o);if(!1===l)return l;o=a}return n!==i&&void 0}u(Lu(n,e))};t:for(;a&&a!==e;){for(var s=a.nextElementSibling,f=a.parentNode;s;){var p=s.nextElementSibling;if(!1===l(s))break t;s=p}a=f}Hr(o)?u(Lu(o,e)):l(o)}({range:this.getRange(),container:this.getContainer(),command:this})}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=br(t);var n=this.commandManager.editor;if(e.collapsed){var r=Lu(e.startContainer,n.getContainer());r&&this.syncElementState(r)}else this.executeAtRange();e.select()}}]),n}(gt);function Vu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}function Hu(t,e,n){Object.keys(n).forEach((function(n){var r=t.getAttribute(n);if(e.hasOwnProperty(n))e[n]=[r];else{var o=e[n];-1===o.indexOf(r)&&(o.push(r),e[n]=o)}}))}function Wu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}function Fu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var qu=function(t){d()(n,t);var e=Fu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"initModel",value:function(){return{name:"su",value:"0"}}},{key:"getAttributeValue",value:function(){return"1"}},{key:"isActive",value:function(t){if(!t||1!==t.nodeType)return!1;var e=this.getModel();return O.isElementInstanceOf(t,N)&&t.getAttribute(e.name)===this.getAttributeValue()}},{key:"isEnabled",value:function(){return this.getModel().value===this.getAttributeValue()}},{key:"execute",value:function(t){var e=this.getRange(),n=this.getModel(),r=0===arguments.length?!this.isEnabled():!!t;n.value=r?this.getAttributeValue():"0",e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(function(t){d()(n,t);var e=Wu(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"isActive",value:function(t){if(!t||1!==t.nodeType)return!1;var e=this.getModel();return _()(x()(n.prototype),"isActive",this).call(this,t)&&t.getAttribute(e.name)===pt}},{key:"isEnabled",value:function(){return this.getModel().value===pt}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange();return n.collapsed?(e.data=this.isActive(n.startElement),e):(e.data=this.isRangeActive(n),e)}},{key:"execute",value:function(t){var e=this.getRange();this.getModel().value=t?pt:ht,e.collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(function(t){d()(n,t);var e=Vu(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).commandType=vt,r}return p()(n,[{key:"getRangeAttrs",value:function(t,e){e=e||{};var n={};return this.visitRangeTextElement(t,(function(t){Hu(t,n,e)})),n}},{key:"getAttributes",value:function(t){var e=t.attrNames,n=[].concat(e).reduce((function(t,e){return t[e]=!0,t}),{}),r=this.getRange(),o={};return r.collapsed?(Hu(r.startElement,o,n),o):this.getRangeAttrs(r,n)}},{key:"syncElementState",value:function(t){var e=this.getModel();return this.isEnabled()?t.setAttribute(e.name,e.value):t.removeAttribute(e.name),t}}]),n}(Qc)));function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Zu=function(t){d()(n,t);var e=Uu(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"getAttributeValue",value:function(){return"2"}}]),n}(qu),Ku=function t(e){s()(this,t),this.time=(new Date).getTime(),this.data=String(e)},Yu=function(){function t(){s()(this,t),this.maxSize=50}return p()(t,[{key:"pushLog",value:function(t){var e=this.cursor;if(!e||e.data!==t){var n=new Ku(t);e&&(e.right&&(e.right.left=null),e.right=n,n.left=e),this.cursor=n,this._control()}}},{key:"_control",value:function(){for(var t=this.cursor,e=0;t&&e<this.maxSize-1;)t=t.left,e++;t&&(t.left=null)}},{key:"isEmpty",value:function(){return!!this.cursor}},{key:"isCancelEnabled",value:function(){var t=this.cursor;return!!t&&(!!t.left||!t.left&&!t.right)}},{key:"isRedoEnabled",value:function(){return this.isHasNextItem()}},{key:"isHasNextItem",value:function(){var t=this.cursor;return!(!t||!t.right)}},{key:"isHasPreviousItem",value:function(){var t=this.cursor;return!(!t||!t.left)}},{key:"nextItem",value:function(){if(this.isHasNextItem())return this.cursor=this.cursor.right}},{key:"previousItem",value:function(){if(this.isHasPreviousItem())return this.cursor=this.cursor.left}}]),t}();function Xu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Gu=function(t){d()(n,t);var e=Xu(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).logManager=new Yu,r.commandType=mt,r.pendingAutoFocus=null,r.isTopStack=!0,r}return p()(n,[{key:"autoFocus",value:function(){var t=this;this.pendingAutoFocus||(this.pendingAutoFocus=fo((function(){t.pendingAutoFocus=null;var e,n=t.getEditor(),r=n.getContainer(),o=Ea.START_CURSOR,i=Ea.END_CURSOR,a=r.querySelector("[".concat(o,"]")),c=r.querySelector("[".concat(i,"]"));if((a||c)&&(e=n.newRange(),a&&(e.startElement=a,e.startOffset=0|a.getAttribute(o),a.removeAttribute(o)),c&&(e.endElement=c,e.endOffset=0|c.getAttribute(i),c.removeAttribute(i)),e.select(),!e.collapsed)){var u=n.getContainer();null==u||u.focus()}n.cursor.update()})))}},{key:"cancel",value:function(){this.isTopStack&&(this.isTopStack=!1,this.push(!0)),console.time("popLog");var t=this.getEditor(),e=this.logManager.previousItem();e&&t.updater.update(e.data),console.timeEnd("popLog"),this.autoFocus()}},{key:"redo",value:function(){console.time("popLog");var t=this.getEditor(),e=this.logManager.nextItem();e&&t.updater.update(e.data),console.timeEnd("popLog"),this.autoFocus()}},{key:"push",value:function(t){console.time("pushLog");var e=this.getEditor().stringify();this.logManager.pushLog(e),console.timeEnd("pushLog"),t||(this.isTopStack=!0)}},{key:"getState",value:function(t){var e=this.createState(),n=this.logManager,r=n.isRedoEnabled(),o=n.isCancelEnabled();return e.data={cancel:o,redo:r},e}},{key:"execute",value:function(t){"cancel"===t?this.cancel():"redo"===t?this.redo():"push"===t&&this.push()}}]),n}(gt);function Ju(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var $u=function(t){d()(n,t);var e=Ju(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="",t))}return p()(n,[{key:"initModel",value:function(){return{enabled:!1,styles:[{name:"text-decoration",value:this.styleValue}]}}},{key:"isCompositionStyleValue",value:function(t,e){return!!e&&_()(x()(n.prototype),"isCompositionStyleValue",this).call(this,t,e)}},{key:"execute",value:function(t){var e,r=0===arguments.length?!(null!==(e=this.getState())&&void 0!==e&&e.data):!!t;return _()(x()(n.prototype),"execute",this).call(this,r)}}]),n}(au),Qu=function(t){d()(n,t);var e=Ju(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="line-through",t))}return n}($u),tl=function(t){d()(n,t);var e=Ju(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="underline",t))}return n}($u),el=function(t){d()(n,t);var e=Ju(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.styleValue="overline",t))}return n}($u),nl=function(t){d()(n,t);var e=Ju(n);function n(){return s()(this,n),e.apply(this,arguments)}return n}($u);function rl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}nl.Stroke=Qu,nl.Underline=tl,nl.Overline=el;var ol=function(t){d()(n,t);var e=rl(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"execute",value:function(t){var e=this.getRange(),n=e.startContainer,r=e.startOffset,o=Lr(n,this.commandManager.editor.getContainer());if(o){(e=e.new()).startContainer=n,e.startOffset=r,e.endContainer=o,e.endOffset=o.childElementCount;for(var i=e.extractContents().firstChild,a=document.createDocumentFragment(),c=cr(),u=c;i;){var l=i.nextSibling;if(O.isElementInstanceOf(i,q)){i.childElementCount>0&&(u=i,a.appendChild(i)),i=l}else{if(3!==i.nodeType||vr(i))O.isValidElement(i)&&u.appendChild(i);else{var s=ur();s.appendChild(i),u.appendChild(s)}i=l}}if(u===c){if(0===u.childElementCount){var f=ur();u.appendChild(f)}a.appendChild(u)}var p=Pr(a);hr(a,o),p&&((e=e.new()).startElement=p,e.startOffset=0,yr(e),e.select())}}}]),n}(gt);function il(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var al=function(t){d()(n,t);var e=il(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,G)}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange(),r=this.commandManager.editor,o=Lr(n.startElement,r.getContainer());if(!o)return e;if(this.isElementType(o)){var i=o.getAttribute("level")||1;e.data={level:i}}return e}},{key:"execute",value:function(t){var e=(t||{}).level;e=Number(e)||0;var n=this.commandManager.editor,r=this.getRange(),o=Lr(r.startElement,n.getContainer());if(o){if(O.isElementInstanceOf(o,G)){var i=o.getAttribute("level");(i=Number(i)||0)!==e&&o.setAttribute("level",e)}else{var a=O.createElement(G);a.setAttribute("level",e),this.extractContentNodes(o,a),o.parentElement.replaceChild(a,o)}r.select()}}}]),n}(so);function cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var ul=O.getElementType($),ll=function(t){d()(n,t);var e=cl(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=ul,t))}return p()(n,[{key:"execute",value:function(){var t=this.elementType.create();t.style["background-color"]="#ccc",_()(x()(n.prototype),"execute",this).call(this,{element:t,resize:!0,style:{width:"100%",height:"5px"}})}}]),n}(pu);function sl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sl(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var hl=O.getElementType(tt),vl=function(t){d()(n,t);var e=pl(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=hl,t))}return p()(n,[{key:"execute",value:function(t){var e=this.elementType.create(),r=this.createBehaviorElement();r.appendChild(e);r.style.width="".concat(16,"px"),r.style.height="".concat(16,"px"),_()(x()(n.prototype),"execute",this).call(this,fl(fl({},t),{},{element:r,resize:!1}))}}]),n}(pu);function dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var yl=O.getElementType(q),ml=function(t){d()(n,t);var e=dl(n);function n(t){var r;return s()(this,n),(r=e.call(this,t)).elementType=yl,r}return p()(n,[{key:"isElementMatched",value:function(t,e){return e?O.isElementInstanceOf(t,q,e):n.isElementType(t)}},{key:"isElementType",value:function(t,e){return O.isElementInstanceOf(t,q,e)}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange(),r=this.commandManager.editor,o=Lr(n.startElement,r.getContainer());return e.data=this.isElementType(o),e}},{key:"execute",value:function(){var t=this.getRange(),e=this.commandManager.editor,n=Lr(t.startElement,e.getContainer());if(n)if(this.isElementType(n,!0))t.select();else{var r=this.elementType.create();this.extractContentNodes(n,r),n.parentNode.replaceChild(r,n),t.select()}}}],[{key:"createElement",value:function(){return yl.create()}},{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,q)}}]),n}(so);function gl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var xl=O.getElementType(rt),bl=function(t){d()(n,t);var e=gl(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.elementType=xl,t))}return p()(n,[{key:"isElementType",value:function(t){return O.isElementInstanceOf(t,rt)}},{key:"getState",value:function(t){var e=this.createState(),n=this.getRange(),r=this.findNearest(n.startElement);return r?(e.data=O.isElementInstanceOf(r.parentElement,rt),e):e}},{key:"execute",value:function(t){var e=this.getRange(),n=this.findNearest(e.startElement);if(n){if(t){if(this.isElementType(n.parentElement))return void e.select();var r=this.elementType.create(),o=n.cloneNode();return this.extractContentNodes(n,o),r.appendChild(o),n.parentNode.replaceChild(r,n),void e.select()}if(this.isElementType(n.parentNode)){var i=n.parentNode,a=this.extractContentNodes(i);i.parentNode.replaceChild(a,i),e.select()}else e.select()}}}]),n}(ml);function El(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var wl=function(t){d()(n,t);var e=El(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"isActive",value:function(t){return!1}},{key:"syncElementState",value:function(t){return t.getAttributeNames().forEach((function(e){t.removeAttribute(e)})),t}},{key:"execute",value:function(){this.getRange().collapsed?this.executeWhileCollapse():this.execCommandAtRange()}}]),n}(Qc);function Cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Ol=function(t){d()(n,t);var e=Cl(n);function n(){return s()(this,n),e.apply(this,arguments)}return p()(n,[{key:"cancel",value:function(){this.formatAttrs=null,this.getRange().select()}},{key:"extractFormat",value:function(){var t=this.getRange(),e={};this.visitRangeTextElement(t,(function(t){t.getAttributeNames().forEach((function(n){e[n]=t.getAttribute(n)}))})),this.formatAttrs=e,t.select()}},{key:"isNeedSyncState",value:function(t){return!0}},{key:"syncElementState",value:function(t){var e=this.formatAttrs;return e&&Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])})),t}},{key:"applyFormat",value:function(){var t=this.formatAttrs,e=this.getRange();t&&!e.collapsed?(this.execCommandAtRange(),(e=this.getRange()).select()):e.select()}},{key:"execute",value:function(t){var e=t.type;return"extract"===e?this.extractFormat():"apply"===e?this.applyFormat():void("cancel"===e&&this.cancel())}}]),n}(Qc);function kl(){return document.documentElement.lang||navigator.language||navigator.userLanguage||""}wt.install("bold",uu),wt.install("italic",su),wt.install("link",du),wt.install("style",nu),wt.install("delete",bu),wt.install("backspace",gu),wt.install("enter",Ou),wt.install("input",wu),wt.install("textInput",_u),wt.install("list",Ro),wt.install("insertBox",Au),wt.install("insertImage",Nu),wt.install("tab",Bu),wt.install("blockStyle",Du),wt.install("sup",qu),wt.install("sub",Zu),wt.install("log",Gu),wt.install("textDecoration",nl),wt.install("stroke",nl.Stroke),wt.install("underline",nl.Underline),wt.install("overline",nl.Overline),wt.install("split",ol),wt.install("header",al),wt.install("paragraph",ml),wt.install("insertHr",ll),wt.install("insertCheckbox",vl),wt.install("quote",bl),wt.install("resetText",wl),wt.install("insertCustom",Pu),wt.install("format",Ol),wt.install("clipboard",Bo);var _l={get:function(t,e){var n=kl();return arguments.length>0?[].concat(t).indexOf(n)>=0?n:e||"":n},getSimple:function(t,e){var n=kl();return n=n.replace(/-[^-]*/g,"").toLowerCase(),arguments.length>0?[].concat(t).indexOf(n)>=0?n:e||"":n}},Sl=function(){function t(t){this._currentLang="",this._languages=Object.create(null),this._prefix="",t&&(t.lang&&(this._currentLang=t.lang),t.prefix&&(this._prefix=t.prefix))}return t.prototype.lang=function(t){if(0===arguments.length)return this._currentLang;this._currentLang=t||""},t.prototype.use=function(t){var e=t.lang,n=t.data,r=t.prefix,o=void 0===r?"":r;e=e||"default";var i=this._languages[e];if(i||(this._languages[e]=i={}),o){var a=n||{};Object.keys(a).forEach((function(t){i[o+t]=a[t]}))}else Object.assign(i,n)},t.prototype.get=function(t,e){e=e||this._currentLang;var n="";if(!t)return n;var r=this._languages[e];return"object"==typeof t&&(n=t.default||this._prefix+t,t=t.lid),this._prefix&&(t=this._prefix+t),r?r.hasOwnProperty(t)?r[t]:this._parent&&this._parent.get.apply(this._parent,arguments)||n:n},t.prototype.create=function(){var e=new t;return e._parent=this,e},t.prototype.forkWithPrefix=function(e){var n=new t;return n._currentLang=this._currentLang,n._languages=this._languages,n._parent=this._parent,n._prefix=this._prefix+(e||""),n},t}(),Rl=new Sl;Rl.lang(_l.get(["en","zh-CN"],"en")),function(t){t.use(n(32))}(Rl);var Al=Rl.forkWithPrefix("editor."),Ml=Array.prototype.slice;function Tl(t){return O.isElementInstanceOf(t,oi)}function Pl(t){return Ml.call(t.querySelector("colgroup").children)}function jl(t){for(var e=t;e;)if(Tl(e=e.parentNode))return e}function Nl(t,e,n){return n>=t&&n<=e}function zl(t,e){var n=oi.getElementModel(t),r=n.getCols();if(e){var o=e.cols.reduce((function(t,e){return t+e}),0);e.cols.forEach((function(t,e){var n=t/o*100;r[e].style.width="".concat(n,"%")})),e.needSyncTableSize&&(n.table.style.width="".concat(o,"px"))}else{var i=n.table.getBoundingClientRect().width,a=[],c=r.reduce((function(t,e){var n=oi.getColWidth(e,i);return a.push(n),t+n}),0),u=i/c;zl(t,{cols:a=a.map((function(t){return t*u}))})}}function Bl(t,e,n){if(2===arguments.length)return 0|(e.getAttribute(t)||1);1===n?e.hasAttribute(t)&&e.removeAttribute(t):e.setAttribute(t,String(n))}function Il(t,e){var n=Ml.call(arguments);return n.unshift("rowspan"),Bl.apply(null,n)}function Ll(t,e){var n=Ml.call(arguments);return n.unshift("colspan"),Bl.apply(null,n)}var Dl=function(t){function e(){return t.getProxyElement()}return{pushLog:function(){t.editor.saveLog()},getProxyElement:e,findCell:function(t){return r.findUpUtil(t.target,(function(t){return(e=t)&&"td"===(e.tagName||"").toLowerCase()&&Tl(null==e||null===(n=e.parentNode.parentNode)||void 0===n||null===(r=n.parentNode)||void 0===r?void 0:r.parentElement);var e,n,r}),(function(t){return Tl(t)||t===e()}))},isResizing:function(){},isSelectMoving:function(){}}},Vl=Array.prototype.slice,Hl=function(t){function e(t,e){var n=ni(Pl(t).length).tr;n.setAttribute("index",String(e));var r=oi.getElementModel(t),o=r.getRows(),i=r.tbody,a=o.length,c=o[e],u=Vl.call(n.children);t:for(var l=0;l<e;l++){var s=o[l];if(s)for(var f=Vl.call(s.children),p=f.length,h=function(t){var n=f[t],r=0|n.getAttribute("index"),o=Ll(n),i=r,a=r+o-1,c=Il(n),s=l,p=l+c-1,h=!1;if(u=u.filter((function(t){var n=0|(t.getAttribute("index")||1);return!Nl(s,p,e)||!Nl(i,a,n)||(fr(t),h=!0,!1)})),h&&Il(n,c+1),0===u.length)return"break|removeSomeCells"},v=0;v<p;v++){if("break|removeSomeCells"===h(v))break t}}for(var d=e;d<a;d++){var y=o[d],m=0|y.getAttribute("index");y.setAttribute("index",String(m+1))}c?i.insertBefore(n,c):i.appendChild(n)}function n(t,e){var n=oi.getElementModel(t),r=Pl(t)[e],o=document.createElement("col");o.style.width="80px";var i=!1;r?n.colgroup.insertBefore(o,r):(n.colgroup.appendChild(o),i=!0);for(var a=n.getRows(),c=a.length,u={},l=0;l<c;l++){var s=a[l];if(i){var f=ei().element;f.setAttribute("index",e),s.appendChild(f)}else for(var p=Vl.call(s.children),h=p.length,v=0;v<h;v++){var d=p[v],y=0|d.getAttribute("index"),m=Ll(d),g=y+m-1;if(!u["".concat(l,"-").concat(y)])if(Nl(y+1,g,e)){Ll(d,m+1);for(var x=Il(d),b=l;b<l+x;b++)for(var E=y;E<y+m;E++)u["".concat(b,"-").concat(E)]=!0}else if(y>=e){if(!u["".concat(l,"-").concat(e)]){var w=ei().element;w.setAttribute("index",e),s.insertBefore(w,d),u["".concat(l,"-").concat(e)]=!0}d.setAttribute("index",String(y+1))}}}zl(t)}return{addRowBefore:function(t,n){e(t,0|n.parentElement.getAttribute("index"))},addRowAfter:function(t,n){e(t,(0|n.parentElement.getAttribute("index"))+Il(n))},addColBefore:function(t,e){n(t,0|e.getAttribute("index"))},addColAfter:function(t,e){n(t,(0|e.getAttribute("index"))+Ll(e))},deleteCurrentCellRow:function(t,e){!function(t,e){for(var n=oi.getElementModel(t),r=n.getRows(),o=n.getCols(),i=r[e],a=i,c={};a;){for(var u=Vl.call(a.children),l=0|a.getAttribute("index"),s=0;s<u.length;s++){var f=u[s],p=0|f.getAttribute("index"),h=Ll(f);if(Nl(l,l+Il(f)-1,e))for(var v=p;v<p+h;v++)c[v]=f;if(Object.keys(c).length===o.length)break}a=a.previousElementSibling}for(var d=0;d<o.length;d++){var y=c[d];if(!y)return;var m=y.parentElement,g=0|m.getAttribute("index"),x=Il(y);if(g<e)Il(y,x-=1),d+=Ll(y)-1;else if(g===e&&x>1){Il(y,x-1);var b=0|y.getAttribute("index");d+=Ll(y)-1;for(var E=m.nextElementSibling,w=E.firstElementChild,C=void 0;w;){if((0|w.getAttribute("index"))>b){C=w;break}w=w.nextElementSibling}C?E.insertBefore(y,C):E.appendChild(y)}}var O=i.nextElementSibling;for(fr(i);O;){var k=0|O.getAttribute("index");O.setAttribute("index",String(k-1)),O=O.nextElementSibling}}(t,e.parentElement.getAttribute("index"))},deleteCurrentCell:function(t,e){!function(t,e){var n=oi.getElementModel(t),r=n.getRows();fr(n.getCols()[e]);for(var o={},i=0;i<r.length;i++)for(var a=r[i],c=Vl.call(a.children),u=c.length,l=0;l<u;l++){var s=c[l],f=0|s.getAttribute("index"),p=Ll(s),h=f+p-1,v="".concat(i,"-").concat(f);f>e?s.setAttribute("index",String(f-1)):Nl(f,h,e)&&(p>1?(o[v]||Ll(s,p-1),o[v]=!0):fr(s))}zl(t)}(t,e.getAttribute("index"))},deleteTable:function(e){t.editor.selectState.executeDelete()}}},Wl=Ko("select-none"),Fl=function(t,e){var n=e.getProxyElement,i=e.findCell,a=e.pushLog,c=function(t,e,n){return r.getScreenInfo(r.getPosition(t),e,n).position};function u(e){var n,o=t.editor.selectState.getTarget(),a=null==o||null===(n=o.firstElementChild)||void 0===n?void 0:n.firstElementChild;if(O.isElementInstanceOf(a,oi)){var u=i(e.native||e);if(u){var l={width:u.offsetWidth,height:u.offsetHeight},s=c(e,u,!0);if(s.x>5&&s.x<l.width-5)return}var f={};return[a].some((function(t){var n=t.firstElementChild;if(n){var o=r.getScreenInfo(r.getPosition(e),n,!0),i=o.position,a=o.points,c=n.offsetWidth,u=n.offsetHeight;if(!(i.x<5||i.x-c>5||i.y<5||i.y-u>-5)){var l=0,s=Pl(t);return s.pop(),s.some((function(e){var n=oi.getColWidth(e,c);if(l+=n,Math.abs(i.x-l)<=5)return f.colElement=e,f.x=l,f.table=t,f.tableWidth=c,f.colWidth=n,f.points=a,!0}))}}})),f.table?f:void 0}}var l={resizeLog:!1,resizeTarget:null,resizeInfo:null,startEventPos:null};!function(t){var e=function(){return t.getProxyElement()};t.register("mousedown:tableResizeStart",(function(t){if(0===t.button)return e()})),t.register("touchstart:tableResizeStart",e,o.simulateMouseDownEvent),t.register("mousemove:tableResizeMove",e),t.register("touchmove:tableResizeMove",e,o.simulateMouseDownEvent),t.register("mouseup:tableResizeEnd,mouseleave:tableResizeEnd",(function(t){if(0===t.button)return e()})),t.register("touchend:tableResizeEnd",e,o.simulateMouseDownEvent)}(t),t.on("tableResizeStart",(function(e){var n=u(e);n&&(e.preventDefault(),e.target=n,function(e){l.resizeLog||(l.resizeLog=!0,a());var n=(l.resizeTarget=e.target).table;l.startEventPos=c(e,n),function(e){if(!e)return;t.editor.getContainer().setAttribute(Wl,"")}(n)}(e))}));var s,f=(s=null,function(){return s||(s=(new ri).create())});function p(e){l.resizeLog=!1;var n=l.resizeTarget;if(n){var r=n.table;if(l.resizeInfo){var o=l.resizeInfo,i=o.colElement,a=o.colWidth,c=o.originColWidth,u=o.originTableWidth,s=i.nextElementSibling,p=a-c,h=oi.getElementModel(r).getCols(),v={cols:[],needSyncTableSize:!s};h.forEach((function(t){t===i?v.cols.push(a):t===s?v.cols.push(oi.getColWidth(t,u)-p):v.cols.push(oi.getColWidth(t,u))})),zl(r,v)}fr(f()),function(e){e&&t.editor.getContainer().removeAttribute(Wl)}(r),l.resizeTarget=null,l.resizeInfo=null}}return t.on("tableResizeMove",(function(o){if(l.resizeTarget||e.isSelectMoving())!function(t){var e=l.resizeTarget;if(e){t.preventDefault(),t.stopPropagation();var o=c(t,e.table),i=l.startEventPos,a=o.x-i.x,u=e.tableWidth,s=f(),p=n();if(s.parentElement!==p){var h=r.getCTM(e.table,p),v=e.table.offsetWidth,d=e.table.offsetHeight;r.select(s).css({left:-v/2+"px",top:-d/2+"px",width:v+"px",height:d+"px",transform:h}),p.appendChild(s)}var y=r.QRDeCompositionMatrix(r.getCTM(s,document.body)).scale;a/=(null==y?void 0:y.x)||1;var m=e.colElement.nextElementSibling,g=e.colWidth,x=-(g-10),b=m?oi.getColWidth(m,u)-10:0;a<x&&(a=x),m&&a>b&&(a=b);var E=u;s.style.width="".concat(E,"px");var w=e.x+a-e.table.scrollLeft;s.firstElementChild.style.left="".concat(w,"px");var C=e.colWidth+a;l.resizeInfo={colElement:e.colElement,originTableWidth:u,originColWidth:g,colWidth:C}}}(o);else{var i=u(o),a=t.editor.getWrapper();a.style.cursor=i?r.getCursorStyle({pointA:i.points[0],pointB:i.points[3]}):""}})),t.on("tableResizeEnd",(function(t){l.resizeTarget&&p()})),e.isResizing=function(){return!!l.resizeTarget},{}};var ql=function(){function t(e,n){s()(this,t),this.children=[],this.selector=e||"",this.content=n||""}return p()(t,[{key:"add",value:function(t){this.children.push(t)}},{key:"remove",value:function(t){var e=this.children.indexOf(t);-1!==e&&this.children.splice(e,1)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.selector||"",n=this.children.map((function(t){return t.toString(e)})).join("\n"),r="".concat(t).concat(e);if(r){var o="".concat(r,"{\n").concat(this.content||"","}\n");return o+n}return n||this.content?"\n".concat(this.content||"","\n").concat(n,"\n"):""}},{key:"toElement",value:function(){var e=t.createElement();return e.textContent=this.toString(),e}}],[{key:"createElement",value:function(){var t=document.createElement("style");return t.type="text/css",t}}]),t}(),Ul=Array.prototype.slice,Zl=Ko("select-none"),Kl=function(t){var e=document.createDocumentFragment();if(vr(t))return e;var n=t.firstElementChild;if(O.isElementInstanceOf(n,E))for(;n.firstElementChild;)e.appendChild(n.firstElementChild);return e},Yl=function(t,e){var n=e.getProxyElement,o=e.findCell;var i={selectionStartTarget:null,selectionMoveTarget:null};t.register("mousemove:tableSelectMove",(function(t){if(!e.isResizing())return r.findUpUtil(t.target,(function(t){return Tl(t)}),(function(t){return t===n()}))})),t.register("mousedown:tableSelectStart",(function(t){if(0===t.button&&!O.isElementInstanceOf(t.target,N)){var e=o(t);return e||void 0}})),t.register("mouseleave:tableSelectEnd",(function(t){if(0===t.button)return i.selectionStartTarget?t.target:void 0})),t.register("mouseup:tableSelectEnd",(function(t){if(0===t.button)return t.target})),t.on("tableSelectStart",(function(e){!function(e){var n=e.target;i.selectionStartTarget=n,i.selectionMoveTarget=n,a=function(){!function(e){if(!e)return;t.editor.getContainer().setAttribute(Zl,"")}(jl(n))}}(e)}));var a=null;var c,u,l=(u=1,function(){return c?{element:c,id:u++}:{element:c=ql.createElement(),id:u++}});function s(t,e){if(t){var n=oi.getElementModel(t),r=e||{},o=r.minRow,i=r.maxRow,a=r.minCol,c=r.maxCol;t._selectOptions=e;for(var u,s,f=Ko("style-id"),p=n.getRows(),h=p.length,v=l(),d=v.element,y=v.id,m=[],g=o;e&&g<=i&&g<h;g++)for(var x=g>=o&&g<=i,b=p[g],E=b.children,w=b.childElementCount,C="[".concat(f,'="').concat(y,'"]>table>tbody>tr[index="').concat(g,'"]'),O=0;O<w;O++){var k=E[O],_=0|k.getAttribute("index");if(_>c)break;if(x&&_>=a&&_<=c){var S=Ll(k),R=g===o,A=g+Il(k)-1===i,M=_===a,T=_+S-1===c,P='>td[index="'.concat(_,'"]'),j="".concat(C).concat(P),N=[],z="".concat(2,"px;");M&&N.push("\n              border-left-width:".concat(z,";\n            ")),T&&N.push("\n              border-right-width:".concat(z,";\n            ")),R&&N.push("\n              border-top-width:".concat(z,";\n            ")),A&&N.push("\n              border-bottom-width:".concat(z,";\n            ")),N.length>0&&(m.push("".concat(j,":before{\n              content:'';\n              ").concat(N.join("\n"),"\n            }")),m.push("".concat(j,":after{\n              content:'';\n              ").concat(N.join("\n"),"\n            }"))),u||(u=k),s=k}}0===m.length?(fr(d),d.textContent="",t.removeAttribute(f)):(t.setAttribute(f,"".concat(y)),d.parentElement!==t&&t.appendChild(d),d.textContent=m.join("\n")),e&&(e.cellSelection={startCell:u,endCell:s})}}function f(t,e,n){var r=0|t.getAttribute("index"),o=Ll(t),i=e,a=i+Il(t)-1,c=r+o-1,u={minRow:i,maxRow:a,minCol:r,maxCol:c},l=function(t,e){return Nl(t.minCol,t.maxCol,e.minCol)||Nl(t.minCol,t.maxCol,e.maxCol)?Nl(e.minRow,e.maxRow,t.minRow)||Nl(e.minRow,e.maxRow,t.maxRow):Nl(t.minRow,t.maxRow,e.minRow)||Nl(t.minRow,t.maxRow,e.maxRow)?Nl(e.minCol,e.maxCol,t.minCol)||Nl(e.minCol,e.maxCol,t.maxCol):void 0},s=Object.assign({},n),f=!1;return(l(n,u)||l(u,n))&&(s.minRow>i&&(s.minRow=i,s.updated=!0),s.minCol>r&&(s.minCol=r,s.updated=!0),s.maxRow<a&&(s.maxRow=a,s.updated=!0),s.maxCol<c&&(s.maxCol=c,s.updated=!0),f=!0),{area:s,success:f,point:{minRow:i,maxRow:a,minCol:r,maxCol:c}}}function p(t){var e=i.selectionStartTarget;if(e){var n=i.selectionMoveTarget,r=o(t.native);if(r&&(i.selectionMoveTarget=r,n!==e)){a&&(a(),a=null);var c={rowIndex:0|r.parentNode.getAttribute("index"),colIndex:0|r.getAttribute("index"),rowspan:Il(r),colspan:Ll(r)},u={rowIndex:0|e.parentNode.getAttribute("index"),colIndex:0|e.getAttribute("index"),rowspan:Il(e),colspan:Ll(e)},l=Math.min(c.rowIndex,u.rowIndex),p=Math.max(c.rowIndex+c.rowspan-1,u.rowIndex+u.rowspan-1),h=Math.min(c.colIndex,u.colIndex),v=Math.max(c.colIndex+c.colspan-1,u.colIndex+u.colspan-1),d=jl(e),y=jl(r);if(d!==y)return i.selectionStartTarget=i.selectionMoveTarget=r,void s(d);s(y,function t(e,n){for(var r=oi.getElementModel(e).getRows(),o=r.length,i=-1,a=-1,c=-1,u=-1,l=!1,s=0;s<o;s++){var p=r[s],h=p.children,v=p.childElementCount,d=0|p.getAttribute("index");if(d>n.maxRow)break;for(var y=0;y<v;y++){var m=f(h[y],d,n),g=m.area,x=m.success,b=m.point;if(g.updated)return g.updated=!1,t(e,g);if(x){var E=b.minRow,w=b.maxRow,C=b.minCol,O=b.maxCol;l?(C<i&&(i=C),O>a&&(a=O),E<c&&(c=E),w>u&&(u=w)):(i=C,a=O,c=E,u=w,l=!0)}}}return{minRow:c,maxRow:u,minCol:i,maxCol:a}}(y,{minRow:l,maxRow:p,minCol:h,maxCol:v}))}}}function h(e){return t.editor.commandManager.execCommand("tableSelection",e)}function v(){var e=jl(i.selectionStartTarget),n=h({type:"getSelection"});if(e){if(function(e){e&&t.editor.getContainer().removeAttribute(Zl)}(e),a)a=null,n&&n.table!==e?s(n.table):s(e),h({type:"setSelection",value:null});else if(i.selectionStartTarget){t.editor.removeRanges();var r=e._selectOptions;n&&n.table!==e&&s(n.table),r&&h({type:"setSelection",value:{table:e,selectOptions:r}})}i.selectionStartTarget=null,i.selectionMoveTarget=null}else n&&(h({type:"setSelection",value:null}),s(n.table))}return t.on("tableSelectMove",(function(t){p(t)})),t.on("tableSelectEnd",(function(t){v()})),e.isSelectMoving=function(){return!!i.selectionStartTarget},{mergeCells:function(t){var e=t._selectOptions;if(e){for(var n=oi.getElementModel(t),r=e.minRow,o=e.maxRow,i=e.minCol,a=e.maxCol,c=n.getRows(),u=[],l=null,s=r;s<=o;s++)for(var f=c[s],p=Ul.call(f.children),h=p.length,v=0;v<h;v++){var d=p[v],y=0|d.getAttribute("index");y<i||y>a||(s>r||y!==i?(u.push(Kl(d)),fr(d)):(l=d,Ll(d,a-i+1),Il(d,o-r+1)))}l&&O.isElementInstanceOf(l.firstElementChild,E)&&u.forEach((function(t){l.firstElementChild.appendChild(t)}))}},selectTableArea:s}},Xl=$e("ky-native"),Gl=Xl.prefixName,Jl=Xl.prefixClassName,$l=new Sl;$l.lang(_l.get(["en","zh-CN"],"en")),function(t){t.use(n(33)),t.use(n(34))}($l);var Ql=$l,ts=Ql.forkWithPrefix("component.colorPicker.");function es(){return ns('\n    <div class="'.concat(Jl("color-picker"),'" data-more="false" data-visible="true" spellcheck="false">\n      <div class="').concat(Jl("color-groups"),'">\n        <div class="').concat(Jl("default-colors"),'">\n          \n        </div>\n        <div class="').concat(Jl("basic-colors-wrapper"),'">\n          <header class="').concat(Jl("color-group-header"),'"><span>').concat(ts.get({lid:"baseColor",default:"baseColor"}),'</span></header>\n          <div class="').concat(Jl("basic-colors"),'"></div>\n        </div>\n        <div class="').concat(Jl("custom-colors-wrapper"),'">\n          <header class="').concat(Jl("color-group-header"),'"><span>').concat(ts.get({lid:"customColor",default:"custom color"}),'</span></header>\n          <div class="').concat(Jl("custom-colors"),'"></div>\n        </div>\n      </div>\n      <div class="').concat(Jl("more-colors"),'">\n        <div class="').concat(Jl("txt-btn"),'" data-click="onMoreColorClick">').concat(ts.get({lid:"moreColor",default:"more color"}),'</div>\n      </div>\n      <div class="').concat(Jl("custom-color-setting"),'">\n        <div data-click="onCvsClick" class="').concat(Jl("color-cvs"),'">\n          <div class="').concat(Jl("hsv-s"),'">\n            <div class="').concat(Jl("hsv-v"),'"></div>\n          </div>\n          <div data-click="onSliderClick" data-type="current" class="').concat(Jl("color-current")," ").concat(Jl("color-block-slider"),'"></div>\n        </div>\n        <div class="').concat(Jl("hsv-ha"),'">\n          <div>\n            <div class="').concat(Jl("color-item-preview")," ").concat(Jl("color-item"),'" data-click="onCurrentColorClick"></div>\n          </div>\n          <div>\n            <div data-click="onTrackClick" class="').concat(Jl("hsv-h"),'">\n              <div y="0" data-click="onSliderClick" data-type="hsv-h" class="').concat(Jl("color-block-slider"),'"></div>\n            </div>\n            <div data-type="sliderTrack" data-click="onTrackClick" class="').concat(Jl("hsv-a"),'">\n              <div y="0" data-click="onSliderClick" data-type="hsv-a" class="').concat(Jl("color-block-slider"),'"></div>\n            </div>\n          </div>\n        </div>\n        <div class="').concat(Jl("color-info"),'">\n          <table>\n            <colgroup>\n              <col>\n              <col style="width:32px">\n              <col style="width:32px">\n              <col style="width:32px">\n              <col style="width:32px">\n            </colgroup>\n            <tbody>\n              <tr>\n                <td>\n                  <div><input class="').concat(Jl("color-info-hex"),'" @change="onHexInputChange"/></div>\n                  <div>HEX</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Jl("color-info-r"),'" @change="onColorRInputChange"/></div>\n                  <div>R</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Jl("color-info-g"),'" @change="onColorGInputChange"/></div>\n                  <div>G</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Jl("color-info-b"),'" @change="onColorBInputChange"/></div>\n                  <div>B</div>\n                </td>\n                <td>\n                  <div><input class="').concat(Jl("color-info-a"),'" @change="onColorAlphaInputChange"/></div>\n                  <div>A</div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    '))}function ns(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function rs(t){(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)}function os(t){for(;t.firstChild;)rs(t.firstChild)}n(35);function is(t){return"#"===t[0]&&(t=t.slice(1)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)}}function as(t){var e=t.toString(16);return e.length<2&&(e="0"+e),e}function cs(t){return"".concat(as(t.r)).concat(as(t.g)).concat(as(t.b))}function us(t){var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.max(e,n,r),i=o-Math.min(e,n,r),a={h:0,s:0,v:0};return 0===i?a.h=0:o===e?a.h=60*(n-r)/i:o===n?a.h=60*((r-e)/i+2):o===r&&(a.h=60*((e-n)/i+4)),a.s=0===o?0:i/o,a.v=o,a}function ls(t){var e=t.h,n=t.s,r=t.v,o=n*r,i=o*(1-Math.abs(e/60%2-1)),a=r-o,c={r:0,g:0,b:0};return e<60?Object.assign(c,{r:o,g:i,b:0}):e>=60&&e<120?Object.assign(c,{r:i,g:o,b:0}):e>=120&&e<180?Object.assign(c,{r:0,g:o,b:i}):e>=180&&e<240?Object.assign(c,{r:0,g:i,b:o}):e>=240&&e<300?Object.assign(c,{r:i,g:0,b:o}):e>=300&&e<360&&Object.assign(c,{r:o,g:0,b:i}),c.r=255*(c.r+a)|0,c.g=255*(c.g+a)|0,c.b=255*(c.b+a)|0,c}function ss(t,e){return void 0===e&&(e=1),"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(e,")")}function fs(t){return"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")")}function ps(t){if(!t)return{type:"rgba",value:{r:255,g:255,b:255,a:0}};var e={type:"hex",value:"#000"};if("#"===(t=t.trim())[0])return e.value=t,e;var n=t.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d\.]+)\s*)?\)$/);return n?(void 0!==n[5]?e={type:"rgba",value:{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:Number(n[5])}}:void 0!==n[3]&&(e={type:"rgba",value:{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:1}}),e):e}function hs(t){var e=function(t){var e=ps(t);return"hex"===e.type?is(e.value):e.value}(t),n=us(e),r=Math.max(n.s,1-n.v)>.5?0:1;return n.h=(n.h+180)%360,n.v=1-r,n.s=r,ss(e=ls(n))}var vs=["@change","@click"];function ds(t,e){var n=function(t){vs.forEach((function(n){var r=t.getAttribute(n)||"";r&&(t.removeAttribute(n),t.addEventListener(n.slice(1),(function(t){e.emit(r,null,[t])})))}));for(var r=t.firstElementChild;r;)n(r),r=r.nextElementSibling};n(t)}var ys,ms=(ys=function(t,e){return(ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ys(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gs=function(t){function e(e){var n=t.call(this,e)||this;return n.init(),n}return ms(e,t),e.prototype.init=function(){var t=this,e={blockElement:null,startPoint:null,startPos:null},n=this;var o=".".concat(Jl("color-block-slider")),i=function(){return t.getProxyElement()};this.register("mousedown:blockDragStart",(function(t){return r.findUpUtil(t.target,(function(t){if(t.matches(o))return!!t}),(function(t){return t===i()}))})),this.register("mousemove:blockDragMove",(function(t){return e.blockElement})),this.register("mouseup:blockDragEnd,mouseleave:blockDragEnd",(function(){return e.blockElement})),this.register("click:itemClick",(function(t){return r.findUpUtil(t.target,(function(t){if(t.getAttribute("data-click"))return!!t}),(function(t){return t===i()}))}));var a={"hsv-h":function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width*6;n.emit("hueChange",null,[t,{h:Math.min(360,60*i|0)}])},"hsv-a":function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width;i=1*i.toFixed(2),n.emit("alphaChange",null,[t,{alpha:i}])},current:function(t,e,r){var o=e.parentElement.getBoundingClientRect(),i=r.x/o.width,a=r.y/o.height,c=1*i.toFixed(2),u=1*a.toFixed(2);n.emit("selectChange",null,[t,{s:c,v:1-u}])}};this.on("blockDragStart",(function(t){t.stopPropagation();var n=t.target;e.startPos=r.getPosition(t,n.parentElement);var o=n.getBoundingClientRect(),i=n.parentElement.getBoundingClientRect();e.blockElement=n,e.startPoint={x:o.x-i.x,y:o.y-i.y}})),this.on("blockDragMove",(function(t){var n=t.target,o=e.startPos,i=e.startPoint,c=r.getPosition(t,t.target.parentElement),u=n.parentElement.getBoundingClientRect(),l=c.x-o.x,s=c.y-o.y,f=i.x+l;f=Math.max(0,f),f=Math.min(f,u.width),n.style.left="".concat(f,"px");var p={x:f,y:0};if("0"!==n.getAttribute("y")){var h=i.y+s;h=Math.max(0,h),h=Math.min(h,u.height),n.style.top="".concat(h,"px"),p.y=h}var v=n.getAttribute("data-type");a[v]&&a[v](t,n,p)})),this.on("blockDragEnd",(function(t){t.stopPropagation(),e.blockElement=null,e.startPoint=null,e.startPos=null}));var c={onSliderClick:function(t){t.stopPropagation()},onTrackClick:function(t){this.onCvsClick(t)},onCvsClick:function(t){var e=t.target,n=r.getPosition(t,e),i=e.querySelector(o),c=e.getBoundingClientRect();n.x=Math.max(0,n.x),n.x=Math.min(c.width,n.x),i&&(i.style.left="".concat(n.x,"px")),"0"!==i.getAttribute("y")&&(n.y=Math.max(0,n.y),n.y=Math.min(c.height,n.y),i.style.top="".concat(n.y,"px"));var u=i.getAttribute("data-type");a[u]&&a[u](t,i,n)},onColorInfoClick:function(t){return function(t){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(t)}(t.target.textContent)},onCurrentColorClick:function(t){n.emit("previewColorClick",null,[t])},onMoreColorClick:function(t){t.stopPropagation(),n.emit("toggleCustomPanel",null,[t])},onColorItemClick:function(t){n.emit("colorClick",null,[t])}};this.on("itemClick",(function(t){var e=t.target.getAttribute("data-click");e&&c[e]&&c[e](t)}))},e.prototype.mount=function(e){t.prototype.mount.call(this,e),ds(this.getProxyElement(),this)},e}(Dt),xs={read:function(t){try{var e=localStorage.getItem(t);if(e){var n=JSON.parse(e);if(Array.isArray(n))return n}}catch(t){console.warn(t)}return[]},write:function(t,e){try{localStorage.setItem(t,JSON.stringify(e.filter((function(t){return!!t}))))}catch(t){console.warn(t)}}},bs=function(){function t(t){void 0===t&&(t=30),this._items=[],this._map={},this._maxSize=30,this._storage=xs,this.key=Gl("__COLOR_PICKER__"),this._maxSize=t,this.setItems(this._storage.read(this.key))}return t.prototype.setStorage=function(t){this._storage=t},t.prototype.validateSize=function(){for(var t=this._map,e=this._items,n=this._maxSize;n<e.length;n++){delete t[e[n]]}e.length=this._maxSize},t.prototype.setItems=function(t){if(void 0===t&&(t=[]),t){var e=[],n={};t.slice(0,30).forEach((function(t){n.hasOwnProperty(t)||(e.push(t),n[t]=!0)})),this._items=e,this._map=n,this._storage.write(this.key,this._items)}},t.prototype.addColor=function(t){var e=this._map,n=this._items;if(e.hasOwnProperty(t)){var r=n.indexOf(t);n.splice(r,1),n.unshift(t)}else n.unshift(t),e[t]=!0;this.validateSize(),this._storage.write(this.key,this._items)},t.prototype.removeColor=function(t){var e=this._map,n=this._items;if(e.hasOwnProperty(t)){var r=n.indexOf(t);n.splice(r,1),delete e[t]}this._storage.write(this.key,this._items)},t.prototype.getItems=function(){return[].concat(this._items)},t}(),Es=function(){function t(t){this.hex="",this.rgb={r:255,g:255,b:255},this.hsv={h:1,s:0,v:0},this.alpha=1,t?this.setColor(t):this.setHsv({h:0,s:0,v:1})}return t.equalsWith=function(e,n){var r=new t(e),o=new t(n);return r.equalsWith(o)},t.prototype.equalsWith=function(e){return e instanceof t||(e=new t(e)),e.alpha===this.alpha&&e.hex===this.hex},t.prototype.setColor=function(t){var e=ps(t);if("hex"===e.type)this.setHex(e.value);else if("rgba"===e.type){var n=e.value;this.setRgb(n),this.setAlpha(n.a)}},t.prototype.setHex=function(t){this.hex=t,Object.assign(this.rgb,is(t))},t.prototype.setRgb=function(t,e,n){var r=this.rgb;"object"==typeof t?(r.r=t.r,r.g=t.g,r.b=t.b):(r.r=t,r.g=e,r.b=n),this.hex=cs(r),Object.assign(this.hsv,us(r))},t.prototype.setHsv=function(t){var e=ls(t);Object.assign(this.rgb,e),this.hex=cs(e),Object.assign(this.hsv,t)},t.prototype.setAlpha=function(t){this.alpha=t},t}(),ws=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Cs(){var t=document.createElement("div");return t.className=Jl("color-row"),t}function Os(){var t=document.createElement("div"),e=ns('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M417.185185 768c-9.481481 0-18.962963-3.792593-26.548148-11.377778l-246.518518-246.518518c-15.17037-15.17037-15.17037-37.925926 0-53.096297 15.17037-15.17037 37.925926-15.17037 53.096296 0L417.185185 676.977778l409.6-409.6c15.17037-15.17037 37.925926-15.17037 53.096296 0 15.17037 15.17037 15.17037 37.925926 0 53.096296l-436.148148 436.148148c-7.585185 7.585185-17.066667 11.377778-26.548148 11.377778z"></path></svg>');return t.className=Jl("color-item"),t.setAttribute("data-click","onColorItemClick"),t.appendChild(e),t._icon=e,t}function ks(t){for(var e=t&&t.nextElementSibling;e;){var n=e.nextElementSibling;rs(e),e=n}}function _s(t,e){var n;if(!e||0===e.length){(n=t.firstElementChild)?(os(n),ks(n)):(n=Cs(),t.appendChild(n));var r=document.createElement("span");return r.className=Jl("empty-text"),r.innerText="暂无",n.appendChild(r),void(n._empty=!0)}var o=null;e.forEach((function(e,r){r%10==0?((n=n?n.nextElementSibling:t.firstElementChild)?n._empty&&(os(n),n._empty=!1):(n=Cs(),t.appendChild(n)),o&&ks(o),(o=n.firstElementChild)||(o=Os(),n.appendChild(o))):o&&o.nextElementSibling?o=o.nextElementSibling:(o=Os(),n.appendChild(o)),o._icon.style.fill=hs(e),o.style.background="transparent"===e?"":e})),ks(n),ks(o)}var Ss=function(t){function e(e){var n=t.call(this,e)||this;return n.relElements={},n}return ws(e,t),e.prototype.initRelElements=function(t){var e=this.relElements;["hex","r","g","b","a"].forEach((function(n){var r=".".concat(Jl("color-info-"+n));e[n]=t.querySelector(r)})),e.cvs=t.querySelector(".".concat(Jl("color-cvs"))),e.preview=t.querySelector(".".concat(Jl("color-item-preview"))),e.sliderH=t.querySelector(".".concat(Jl("hsv-h")," .").concat(Jl("color-block-slider"))),e.sliderA=t.querySelector(".".concat(Jl("hsv-a")," .").concat(Jl("color-block-slider"))),e.sliderCvs=t.querySelector(".".concat(Jl("color-cvs")," .").concat(Jl("color-block-slider")))},e.prototype.syncRelElementsState=function(){var t=this.relElements,e=this.hsv,n=t.sliderH;if(n){var r=n.parentElement.getBoundingClientRect(),o=e.h/360*r.width;n.style.left="".concat(o,"px");var i=t.sliderA,a=i.parentElement.getBoundingClientRect().width*this.alpha;i.style.left="".concat(a,"px");var c=t.sliderCvs,u=c.parentElement.getBoundingClientRect(),l=e.s*u.width,s=(1-e.v)*u.height;c.style.left="".concat(l,"px"),c.style.top="".concat(s,"px")}},e.prototype.syncPreview=function(){var t=this.relElements,e=this.alpha;t.preview.style.backgroundColor=ss(this.rgb,e)},e.prototype.syncCvsElementBgColor=function(){var t=this.relElements.cvs,e=this.hsv;if(t){var n=e.h/60,r=Math.floor(n),o=Math.ceil(n),i=function(t,e){return{r:(t.r+e.r)/2,g:(t.g+e.g)/2,b:(t.b+e.b)/2}}(Rs[r],Rs[o]);t.style.backgroundColor=fs(i)}},e.prototype.sync=function(t){var e=this.hex,n=this.rgb,r=n.r,o=n.g,i=n.b,a=this.alpha,c=[{key:"hex",value:"#".concat(e)},{key:"r",value:r},{key:"g",value:o},{key:"b",value:i},{key:"a",value:a}],u=this.relElements;c.forEach((function(e){var n=u[e.key];n&&(t&&-1===t.indexOf(e.key)||(n.value=String(e.value).toUpperCase()))})),this.syncPreview()},e}(Es),Rs=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"].map((function(t){return is(t)})),As=function(){function t(){this._colorInfo=new Ss,this._customColors=new bs,this._customPanelVisible=!1,this._syncCustomTimeout=null,this.eventManager=new gs,this.bindEvents()}return t.prototype.getContainer=function(){return this._container},t.prototype._renderDefaultColorItems=function(t){_s(t.querySelector(".".concat(Jl("default-colors"))),[this.getActiveColor()||"#000"])},t.prototype._renderBasicColorItems=function(t){_s(t.querySelector(".".concat(Jl("basic-colors"))),["transparent","rgb(0, 0, 0)","rgb(38, 38, 38)","rgb(89, 89, 89)","rgb(140, 140, 140)","rgb(191, 191, 191)","rgb(217, 217, 217)","rgb(233, 233, 233)","rgb(245, 245, 245)","rgb(255, 255, 255)","rgb(245, 34, 45)","rgb(250, 84, 28)","rgb(250, 140, 22)","rgb(250, 219, 20)","rgb(82, 196, 26)","rgb(19, 194, 194)","rgb(24, 144, 255)","rgb(47, 84, 235)","rgb(114, 46, 209)","rgb(235, 47, 150)","rgb(255, 232, 230)","rgb(255, 236, 224)","rgb(255, 239, 209)","rgb(252, 252, 202)","rgb(228, 247, 210)","rgb(211, 245, 240)","rgb(212, 238, 252)","rgb(222, 232, 252)","rgb(239, 225, 250)","rgb(250, 225, 235)","rgb(255, 163, 158)","rgb(255, 187, 150)","rgb(255, 213, 145)","rgb(255, 251, 143)","rgb(183, 235, 143)","rgb(135, 232, 222)","rgb(145, 213, 255)","rgb(173, 198, 255)","rgb(211, 173, 247)","rgb(255, 173, 210)","rgb(255, 77, 79)","rgb(255, 122, 69)","rgb(255, 169, 64)","rgb(255, 236, 61)","rgb(115, 209, 61)","rgb(54, 207, 201)","rgb(64, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 171)","rgb(207, 19, 34)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 6)","rgb(56, 158, 13)","rgb(8, 151, 156)","rgb(9, 109, 217)","rgb(29, 57, 196)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(130, 0, 20)","rgb(135, 20, 0)","rgb(135, 56, 0)","rgb(97, 71, 0)","rgb(19, 82, 0)","rgb(0, 71, 79)","rgb(0, 58, 140)","rgb(6, 17, 120)","rgb(34, 7, 94)","rgb(120, 6, 80)"])},t.prototype._renderCustomColorItems=function(t){var e=this._customColors;_s(t.querySelector(".".concat(Jl("custom-colors"))),e.getItems())},t.prototype._renderColorItems=function(t){this._renderDefaultColorItems(t),this._renderBasicColorItems(t),this._renderCustomColorItems(t)},t.prototype.bindEvents=function(){var t=this,e=this.eventManager;e.on("hueChange",(function(e,n){var r=n.h;t.setCustomHsv({h:r})})),e.on("selectChange",(function(e,n){var r=n.s,o=n.v;t.setCustomHsv({s:r,v:o})})),e.on("alphaChange",(function(e,n){var r=n.alpha;t.setCustomAlpha(r)})),e.on("toggleCustomPanel",(function(){var e=!t.isCustomPanelVisible();t.setCustomPanelVisible(e)})),e.on("onHexInputChange",(function(e){var n=us(is(e.target.value));t.setCustomHsv(n)}));var n=function(e,n){var r;n=n||0;var o=t._colorInfo,i=us(Object.assign({},o.rgb,((r={})[e]=n,r)));o.setHsv(Object.assign({},o.hsv,i)),o.syncRelElementsState(),o.syncPreview(),o.syncCvsElementBgColor()};e.on("onColorRInputChange",(function(t){n("r",t.target.value)})),e.on("onColorGInputChange",(function(t){n("g",t.target.value)})),e.on("onColorBInputChange",(function(t){n("b",t.target.value)})),e.on("onColorAlphaInputChange",(function(e){var n=e.target.value||1,r=t._colorInfo;r.setAlpha(n),r.syncPreview(),r.syncRelElementsState()})),e.on("previewColorClick",(function(n){var r=t._customColors,o=n.target.style.backgroundColor||"transparent";r.addColor(o),t._renderCustomColorItems(t.getContainer()),t.setActiveColor(o),t._renderDefaultColorItems(t.getContainer()),e.emit("change",null,[o])})),e.on("colorClick",(function(n){var r=n.target.style.backgroundColor||"transparent";t.setActiveColor(r),t._renderDefaultColorItems(t.getContainer()),e.emit("change",null,[r])}))},t.prototype.setCustomHex=function(t){var e=is(t);this.setCustomRgb(e.r,e.g,e.b)},t.prototype.setCustomColor=function(t){this._colorInfo.setColor(t)},t.prototype.getRgbaColor=function(){return ss(this._colorInfo.rgb)},t.prototype.getCustomRgbColor=function(){return fs(this._colorInfo.rgb)},t.prototype.getCustomHexColor=function(){return this._colorInfo.hex},t.prototype.getCustomRgb=function(){return Object.assign({},this._colorInfo.rgb)},t.prototype.setCustomRgb=function(t,e,n){var r=us("object"==typeof t?t:{r:t,g:e,b:n});this.setCustomHsv(r)},t.prototype.setCustomHsv=function(t){void 0===t&&(t={});var e=this._colorInfo;e.setHsv(Object.assign({},e.hsv,t)),t.hasOwnProperty("h")&&e.syncCvsElementBgColor(),e.sync()},t.prototype.setCustomAlpha=function(t){void 0===t&&(t=1);var e=this._colorInfo;e.setAlpha(t),e.sync(["a"])},t.prototype.isCustomPanelVisible=function(){return this._customPanelVisible},t.prototype.setCustomPanelVisible=function(t){void 0===t&&(t=!1),this._customPanelVisible=!!t;var e=this.getContainer();e&&e.setAttribute("data-more",String(t))},t.prototype.setVisible=function(t){void 0===t&&(t=!1);var e=this.getContainer();e&&(e.setAttribute("data-visible",String(t)),this.setCustomPanelVisible(!1))},t.prototype.setActiveColor=function(t){this.getContainer()&&function(t,e){for(var n=t.querySelectorAll(".".concat(Jl("color-groups")," .").concat(Jl("color-item"))),r=e?new Es(e):null,o=Jl("active-item"),i=n.length,a=0;a<i;a++){var c=n[a];r&&r.equalsWith(c.style.backgroundColor)?c.setAttribute(o,"true"):c.removeAttribute(o)}}(this.getContainer(),t),this._activeColor=t},t.prototype.getActiveColor=function(){return this._activeColor},t.prototype.createContainerNode=function(){var t=es();return this._container=t,this._renderColorItems(t),this._colorInfo.initRelElements(t),this.eventManager.mount(t),this._activeColor&&this.setActiveColor(this._activeColor),this._colorInfo.sync(),t},t.prototype.getContainerNode=function(){return this._container||(this._container=this.createContainerNode()),this._container},t.prototype.render=function(){return this.getContainerNode(),this._container},t}();function Ms(){return t='\n    <div class="'.concat(Jl("dropdown"),'">\n      <div class="').concat(Jl("dropdown-selection-wrapper"),'" @click="togglePopupVisible">\n        <div class="').concat(Jl("dropdown-selection"),'" @click="selectionClick"></div>\n        <div class="').concat(Jl("dropdown-tri"),'" tabindex="-1">\n          ').concat('<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 640l170.666667-213.333333H341.333333z"></path></svg>','\n        </div>\n      </div>\n      <div class="').concat(Jl("dropdown-popup"),'" @click="popupClick"></div>\n    </div>\n  '),(new DOMParser).parseFromString(t,"text/html").body.firstElementChild;var t}n(36);var Ts=Ql.forkWithPrefix("component.dropdown."),Ps=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),js=jt("data");function Ns(t,e){if(1===arguments.length)return t[js];2===arguments.length&&(t[js]=e)}function zs(t){var e=document.createElement("span");return e.className=Jl("text-wrapper"),e.textContent=t,e}var Bs=function(t){function e(e){var n=t.call(this)||this;return n.props=Object.assign({},e),n.init(),n}return Ps(e,t),e.prototype.init=function(){var t=this.props,e=Ms();e.className=e.className+" "+(t.className||"");var n=e.querySelector(".".concat(Jl("dropdown-selection"))),r=e.querySelector(".".concat(Jl("dropdown-popup")));this._selection=n,this._popup=r,this._container=e,ds(e,this),this.bindEvents()},e.prototype.updateProps=function(t){Object.assign(this.props,t),this.refresh()},e.prototype.bindEvents=function(){var t=this,e=!1,n=function(){e?e=!1:(document.removeEventListener("click",n),t.props.popupVisible&&t.updateProps({popupVisible:!1}))};this.on("togglePopupVisible",(function(r){!function(r){e=!0;var o=!t.props.popupVisible;o?document.addEventListener("click",n):document.removeEventListener("click",n),t.updateProps({popupVisible:o})}()})),this.on("popupClick",(function(e){var n=r.findUpUtil(e.target,(function(t){if(Ns(t))return!!t}),(function(t){return t===e.currentTarget}));if(n){var o=Ns(n),i=t.props.value;t.emit("itemClick",null,[o.key]),i!==o.key&&(t.updateProps({value:o.key,popupVisible:!1}),t.emit("change",null,[o.key]))}}))},e.prototype.refresh=function(){var t=this.props,e=this._selection;os(e);var n=function(t){if(t.renderSelection)return t.renderSelection(t);var e;if(t.value){var n=t.items.find((function(e){return e.key===t.value}));return n?"string"==typeof(e=n.render())&&(e=zs(e)):e=zs(t.value),e}return zs(Ts.get({lid:"placeholder",default:"please select"}))}(t);n&&e.appendChild(n);var r=this._container,o=this._popup;if(os(o),t.popupVisible){var i=function(t){var e=t.items;if(t.renderItems)return t.renderItems(t);"function"==typeof e&&(e=e());var n=document.createElement("div");if(n.className=Jl("dropdown-popup-items"),!e||0===e.length){var r=document.createElement("div");return r.className=Jl("dropdown-empty-pop-item"),r.innerText=Ts.get({lid:"emptyText",default:"no data"}),n.appendChild(r),n}return e&&e.forEach((function(e){var r,o=document.createElement("div");o.className="".concat(Jl("dropdown-pop-item")," ").concat(t.value===e.key?Jl("dropdown-pop-item-active"):""),!1!==t.selectable&&Ns(o,e),"string"==typeof(r=e.render?e.render(t):e.key)&&(r=zs(r)),o.appendChild(r),n.appendChild(o)})),n}(this.props);i&&o.appendChild(i),r.setAttribute("data-visible","")}else r.removeAttribute("data-visible");r.setAttribute("mode",t.mode||"vertical"),r.setAttribute("align",t.align||"left")},e.prototype.render=function(){return this.refresh(),this._container},e}(Dt),Is=(n(37),Ql.forkWithPrefix("component.linkSetting.")),Ls=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ds=function(t){function e(e){return t.call(this)||this}return Ls(e,t),e.prototype.createDomNode=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div");e.className=Jl("link-setting");var n=document.createElement("div"),r=Jl("link-setting-row"),o=document.createElement("div");o.className=r;var i=document.createElement("label");i.innerText=Is.get("text"),o.appendChild(i);var a=document.createElement("input");a.type="text",o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).className=r,(i=document.createElement("label")).innerText=Is.get({lid:"link",default:"link"}),o.appendChild(i);var c=document.createElement("textarea");o.appendChild(c),n.appendChild(o),n.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(n);var u=document.createElement("footer"),l=document.createElement("div");return l.className=Jl("native-btn"),l.textContent=Is.get({lid:"ok",default:"ok"}),l.addEventListener("click",(function(){var e=a.value,n=c.value;t.emit("change",null,[{text:e,href:n}])})),u.appendChild(l),e.appendChild(u),this._container=e,e},e.prototype.render=function(){return this.createDomNode()},e}(Dt),Vs=(n(38),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Hs=1,Ws=function(t){function e(e){var n=t.call(this)||this;return n.props={},Object.assign(n.props,e),n}return Vs(e,t),e.prototype.createDom=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div"),n=document.createElement("style");n.setAttribute("rel","stylesheet"),e.appendChild(n);for(var o=document.createElement("div"),i=0;i<10;i++){var a=document.createElement("div");a.className=Jl("setting-row");for(var c=0;c<10;c++){var u=document.createElement("div");u.className=Jl("setting-cell"),u.setAttribute("row",String(i)),u.setAttribute("col",String(c)),a.appendChild(u)}o.appendChild(a)}e.appendChild(o);var l=document.createElement("div"),s=Hs++,f=Jl("table-setting");l.className=f,l.setAttribute("index",String(s)),l.appendChild(e);var p=document.createElement("footer");p.textContent="0 * 0",l.appendChild(p);var h={rows:0,cols:0},v=function(t,e){var r="";if(arguments.length>0){for(var o=[],i=0;i<=t;i++)for(var a=0;a<=e;a++)o.push(".".concat(f,'[index="').concat(s,'"] [row="').concat(i,'"][col="').concat(a,'"]{background-color:#eee;}'));r=o.join("\n"),h.rows=t+1,h.cols=e+1,p.innerText="".concat(h.rows," * ").concat(h.cols)}else h.rows=0,h.cols=0,p.innerText="0 * 0";n.textContent=r};return e.addEventListener("mousemove",(function(t){var n=r.getPosition(t,e),o=r.getElementScale(e),i=o.x,a=o.y,c=n.x/(i||1),u=n.y/(a||1),l=Math.ceil(u/24)-1,s=Math.ceil(c/24)-1;v(l,s)})),e.addEventListener("mouseleave",(function(t){v()})),e.addEventListener("click",(function(){h.rows&&h.cols&&t.emit("change",null,[{rows:h.rows,cols:h.cols}])})),this._container=l,l},e.prototype.render=function(){return this.createDom(),this._container},e}(Dt),Fs=(n(39),Ql.forkWithPrefix("component.imageSetting.")),qs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Us=function(t){function e(e){return t.call(this)||this}return qs(e,t),e.prototype.createDomNode=function(){var t=this;if(this._container)return this._container;var e=document.createElement("div");e.className=Jl("image-setting");var n=document.createElement("div"),r=Jl("image-setting-row"),o=document.createElement("div");o.className=r;var i=document.createElement("label");i.innerText=Fs.get({lid:"imageTitle",default:"image title"}),o.appendChild(i);var a=document.createElement("input");a.type="text",o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).className=r,(i=document.createElement("label")).innerText=Fs.get({lid:"src",default:"image src"}),o.appendChild(i);var c=document.createElement("textarea");o.appendChild(c),n.appendChild(o),n.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(n);var u=document.createElement("footer"),l=document.createElement("div");return l.className=Jl("native-btn"),l.textContent=Fs.get({lid:"ok",default:"ok"}),l.addEventListener("click",(function(){var e=a.value,n=c.value;t.emit("change",null,[{title:e,src:n}])})),u.appendChild(l),e.appendChild(u),this._container=e,e},e.prototype.render=function(){return this.createDomNode()},e}(Dt),Zs=Gl("disabled"),Ks=Gl("hide"),Ys=function(){function t(t){this.name="",this._enabled=!0,this._visible=!0,this.name=t.name,t.hasOwnProperty("visible")&&(this._visible=!!t.visible),t.hasOwnProperty("enabled")&&(this._enabled=!!t.enabled)}return t.prototype.connect=function(t){this.toolbar=t},t.prototype.onSelect=function(t){this.toolbar&&this.toolbar.onToolbarItemValueApply(t)},t.prototype.setValue=function(t){this._value=t},t.prototype.getValue=function(){return this._value},t.prototype.isEnabled=function(){return this._enabled},t.prototype.setEnabled=function(t){this._enabled=t;var e=this._container;e&&(t?e.removeAttribute(Zs):e.setAttribute(Zs,""))},t.prototype.setVisible=function(t){this._visible=t;var e=this._container;e&&(t?e.removeAttribute(Ks):e.setAttribute(Ks,""))},t.prototype.isVisible=function(){return this._visible},t.prototype.renderBody=function(){return null},t.prototype.getClassName=function(){return Jl("toolbar-item")},t.prototype._createContainer=function(){var t=document.createElement("div");return t.className=this.getClassName(),this.name&&t.setAttribute("type",this.name),this.isEnabled()||t.setAttribute(Zs,""),this.isVisible()||t.setAttribute(Ks,""),t},t.prototype.getContainer=function(){return this._container?this._container:this._container=this._createContainer()},t.prototype.render=function(){var t=this.renderBody(),e=this.getContainer();return t&&e.appendChild(t),e},t}(),Xs=Object.create(null),Gs=function(t){Object.assign(Xs,t)},Js=function(t){var e=Xs[t];if(!e)return null;var n=e();if(n&&!(n instanceof Ys))throw new TypeError("invalid toolbar item type!");return n},$s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qs=function(t){function e(e){var n=t.call(this,e)||this;return n._options={},n._value=!1,Object.assign(n._options,e),n}return $s(e,t),e.prototype.getClassName=function(){return"".concat(t.prototype.getClassName.call(this)," ").concat(Jl("toolbar-item-icon"))},e.prototype.setValue=function(e){if(t.prototype.setValue.call(this,e),!1!==this._options.stateless){var n=this.getContainer(),r=Jl("active");e?n.setAttribute(r,""):n.removeAttribute(r)}},e.prototype._createContainer=function(){var e=this,n=t.prototype._createContainer.call(this);return n.addEventListener("click",(function(){e.setValue(!e.getValue()),e.onSelect({type:e.name,data:e.getValue()})})),n},e.prototype.renderBody=function(){return this._options.icon},e}(Ys);function tf(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}function ef(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M288.581818 209.454545v530.618182h530.618182V209.454545H288.581818z m484.072727 484.072728H335.127273v-65.163637L456.145455 512l74.472727 97.745455 148.945454-148.945455 97.745455 121.018182v111.709091z m0-186.181818l-97.745454-116.363637-144.290909 144.290909-69.818182-93.090909-125.672727 125.672727V256h437.527272v251.345455z"></path></svg>')}function nf(){return tf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M547.84 549.622519l-61.933037-184.32-65.839407 184.32h127.772444zM457.007407 303.407407h62.501926l148.062815 417.185186h-60.567704l-41.377185-124.965926h-161.374815L360.068741 720.592593H303.407407l153.6-417.185186zM799.819852 508.207407c21.010963 0 38.343111 5.802667 52.072296 17.521778 13.425778 11.643259 20.138667 26.510222 20.138667 45.207704 0 18.090667-7.319704 34.436741-21.352296 49.303704-8.533333 8.760889-23.779556 19.835259-45.093926 33.564444-22.224593 13.994667-35.65037 26.244741-40.504889 36.788148H872.296296V720.592593h-151.703703c0-21.276444 7.016296-39.670519 21.617777-55.409778 7.926519-8.760889 24.727704-21.579852 49.986371-38.229334 13.994667-9.329778 23.779556-17.180444 29.885629-23.36237 9.443556-10.202074 14.260148-21.276444 14.260149-32.919704 0-11.415704-3.337481-19.873185-9.443556-25.41037-6.409481-5.537185-15.815111-8.154074-28.368593-8.154074-13.349926 0-23.438222 4.361481-30.113185 13.12237-6.712889 8.116148-10.353778 20.707556-10.998518 37.015704h-35.650371c0.341333-23.324444 7.319704-41.984 21.352297-56.282074 14.298074-15.17037 33.223111-22.755556 56.699259-22.755556z"></path></svg>')}function rf(){return tf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M547.84 549.622519l-61.933037-184.32-65.839407 184.32h127.772444zM457.007407 303.407407h62.501926l148.062815 417.185186h-60.567704l-41.377185-124.965926h-161.374815L360.068741 720.592593H303.407407l153.6-417.185186zM799.819852 303.407407c21.010963 0 38.343111 5.802667 52.072296 17.521778 13.425778 11.643259 20.138667 26.510222 20.138667 45.207704 0 18.090667-7.319704 34.436741-21.352296 49.303704-8.533333 8.760889-23.779556 19.835259-45.093926 33.564444-22.224593 13.994667-35.65037 26.244741-40.504889 36.788148H872.296296v29.999408h-151.703703c0-21.276444 7.016296-39.670519 21.617777-55.409778 7.888593-8.760889 24.689778-21.579852 49.948445-38.229334 13.994667-9.329778 23.779556-17.180444 29.885629-23.36237 9.443556-10.202074 14.260148-21.276444 14.260149-32.919704 0-11.415704-3.337481-19.873185-9.443556-25.41037-6.371556-5.537185-15.777185-8.154074-28.330667-8.154074-13.349926 0-23.438222 4.361481-30.113185 13.12237-6.712889 8.116148-10.353778 20.707556-10.998518 37.015704h-35.650371c0.341333-23.324444 7.319704-41.946074 21.352297-56.282074 14.298074-15.17037 33.223111-22.755556 56.699259-22.755556z"></path></svg>')}n(40);var of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),af=function(t){function e(e){var n=t.call(this,e)||this;return n._options={name:""},Object.assign(n._options,e),n}return of(e,t),e.prototype.getClassName=function(){return"".concat(t.prototype.getClassName.call(this)," ").concat(Jl("toolbar-item-dropdown"))},e.prototype.getDropdownProps=function(){var t=this._options;return{mode:t.mode,align:t.align,value:this.getValue(),items:t.items}},e.prototype.createDropdown=function(){var t=this,e=new Bs(this.getDropdownProps());return e.on("change",(function(e){t.setValue(e),t.onSelect({type:t.name,data:e})})),e},e.prototype.setValue=function(e){t.prototype.setValue.call(this,e),this._dropdown&&this._dropdown.updateProps({value:e})},e.prototype.renderBody=function(){var t=this._dropdown;return t||(t=this.createDropdown(),this._dropdown=t),t.render()},e}(Ys),cf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uf=function(t){function e(e){var n=t.call(this,Object.assign({mode:"horizontal",align:"center",items:[{key:"left",render:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M283.461818 590.941091h335.732364v52.689454H283.461818v-52.689454z m0-210.618182h335.732364v52.642909H283.461818V380.322909z m503.575273 157.975273H283.508364v-52.689455h503.528727v52.689455z m0 210.618182H283.508364V696.32h503.528727v52.642909zM283.508364 327.68V274.990545h503.528727V327.68H283.508364z"></path></svg>')}},{key:"center",render:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M378.212174 592.317217v53.515131h267.575652v-53.515131h-267.575652zM271.137391 752.862609h481.636174v-53.515131H271.181913v53.515131z m0-214.060522h481.636174V485.286957H271.181913v53.51513z m107.030261-160.545391v53.51513h267.575652V378.256696h-267.575652zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}},{key:"right",render:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M271.137391 752.862609H752.862609v-53.515131H271.181913v53.515131z m160.589913-107.030261h321.090783v-53.515131H431.727304v53.515131zM271.137391 538.802087h481.636174V485.286957H271.181913v53.51513z m160.545392-107.030261h321.090782V378.256696H431.727304v53.51513zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}},{key:"justify",render:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M378.212174 592.317217v53.515131h267.575652v-53.515131h-267.575652zM271.137391 752.862609h481.636174v-53.515131H271.181913v53.515131z m0-214.060522h481.636174V485.286957H271.181913v53.51513z m107.030261-160.545391v53.51513h267.575652V378.256696h-267.575652zM271.137391 271.226435v53.51513h481.636174V271.226435H271.181913z"></path></svg>')}}]},e))||this;return n._value="left",n}return cf(e,t),e}(af),lf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var sf=function(t){function e(e){var n=t.call(this,Object.assign({items:["12px","13px","14px","15px","16px","20px","22px","24px","30px","32px","40px","48px"].map((function(t){return{key:t,render:function(){return t}}}))},e))||this;return n._value="14px",n}return lf(e,t),e}(af),ff=(n(41),Ql.forkWithPrefix("toolbar.")),pf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function hf(t,e){var n=document.createElement("div");return n.className=Jl("toolbar-txt-type"),n.textContent=t,e&&Object.keys(e).forEach((function(t){n.style[t]=e[t]})),n}var vf=function(t){function e(e){var n=t.call(this,Object.assign({items:[{key:"normal",render:function(){return hf(ff.get({lid:"textType.normal",default:"normal"}))}},{key:"h1",render:function(){return hf(ff.get({lid:"textType.h1",default:"h1"}),{fontSize:"30px",fontWeight:"bold"})}},{key:"h2",render:function(){return hf(ff.get({lid:"textType.h2",default:"h2"}),{fontSize:"24px",fontWeight:"bold"})}},{key:"h3",render:function(){return hf(ff.get({lid:"textType.h3",default:"h3"}),{fontSize:"20px",fontWeight:"bold"})}},{key:"h4",render:function(){return hf(ff.get({lid:"textType.h4",default:"h4"}),{fontSize:"18px",fontWeight:"bold"})}}]},e))||this;return n._value="normal",n}return pf(e,t),e}(af),df=(n(42),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),yf=Jl("toolbar-color-current");var mf=function(t){function e(e){return t.call(this,e)||this}return df(e,t),e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)+" "+Jl("toolbar-picker")},e.prototype.createDropdown=function(){var e=t.prototype.createDropdown.call(this);return e.on("popupClick",(function(t){t.stopPropagation()})),e},e.prototype.setValue=function(e){t.prototype.setValue.call(this,e),this._dropdown&&(this._dropdown.updateProps({value:e}),this._picker&&this._picker.setActiveColor(e))},e.prototype._syncCurrentColor=function(t){t=t||this.getContainer();var e=this.getValue();if(e){var n=t.querySelector(".".concat(yf));n&&(n.style.backgroundColor=e)}},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this),r=this._options;return n.renderSelection=function(){var t=function(t){var e=document.createElement("div");e.className=Jl("toolbar-color-selection"),e.appendChild(t);var n=document.createElement("div");return n.className=yf,e.appendChild(n),e}(r.getIcon());return e._syncCurrentColor(t),t},n.renderItems=function(){return e._picker||(e._picker=new As,e._picker.eventManager.on("change",(function(t){e.setValue(t),e.onSelect({type:e.name,data:t}),e._dropdown.updateProps({popupVisible:!1})}))),e._picker.render()},n},e}(af),gf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xf=function(t){function e(e){var n={getIcon:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M503.156364 139.636364L312.133818 625.198545h59.857455L423.563636 489.192727h223.045819l51.665454 136.005818h60.555636L567.854545 139.636364H503.156364zM441.344 442.274909l93.184-242.781091h2.699636l91.834182 242.781091H441.250909z"></path></svg>')}};return t.call(this,Object.assign(n,e))||this}return gf(e,t),e}(mf),bf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ef=function(t){function e(e){var n=this,r={getIcon:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M707.490909 358.4l-181.527273-181.527273-69.818181-69.818182-32.581819 32.581819 69.818182 69.818181-218.763636 218.763637 251.345454 251.345454 251.345455-251.345454-69.818182-69.818182zM339.781818 428.218182l186.181818-186.181818 148.945455 148.945454 37.236364 37.236364h-372.363637zM772.654545 623.709091c27.927273 0 46.545455-23.272727 46.545455-55.854546 0-27.927273-46.545455-93.090909-46.545455-93.090909s-46.545455 60.509091-46.545454 93.090909 18.618182 55.854545 46.545454 55.854546z"></path></svg>')}};return(n=t.call(this,Object.assign(r,e))||this).setValue("#fff"),n}return bf(e,t),e}(mf),wf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var Cf=function(t){function e(e){return t.call(this,e)||this}return wf(e,t),e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){return function(t){var e=document.createElement("div");e.className=Jl("toolbar-table"),e.appendChild(t);var n=document.createElement("div");return e.appendChild(n),e}(tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M913.988 173.68H110.05c-25.671 0-46.676 21.007-46.676 46.679v665.897c0 25.651 20.987 46.638 46.637 46.638H913.95c25.671 0 46.676-21.004 46.676-46.676V220.32c0-25.651-20.988-46.64-46.638-46.64zM339.796 896.142c0 12.016-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.337-21.303-21.353V768.023c0-12.014 9.338-21.353 21.303-21.353h213.627c11.965 0 21.305 9.34 21.305 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.338-21.303-21.353V543.029c0-12.013 9.338-21.354 21.303-21.354h213.627c11.965 0 21.305 9.34 21.305 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.305 21.353H104.864c-11.965 0-21.303-9.337-21.303-21.353V319.596c0-12.013 9.338-21.353 21.303-21.353h213.627c11.965 0 21.305 9.34 21.305 21.353v128.118zM639.269 896.14c0 12.016-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.337-21.305-21.353V768.023c0-12.014 9.34-21.353 21.305-21.353h213.626c11.966 0 21.306 9.34 21.306 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.338-21.305-21.353V543.029c0-12.013 9.34-21.354 21.305-21.354h213.626c11.966 0 21.306 9.34 21.306 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.306 21.353H404.337c-11.966 0-21.305-9.337-21.305-21.353V319.596c0-12.013 9.34-21.353 21.305-21.353h213.626c11.966 0 21.306 9.34 21.306 21.353v128.118zM941.864 896.14c0 12.016-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.337-21.304-21.353V768.023c0-12.014 9.338-21.353 21.304-21.353h213.626c11.966 0 21.304 9.34 21.304 21.353v128.118z m0-224.995c0 12.015-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.338-21.304-21.353V543.029c0-12.013 9.338-21.354 21.304-21.354h213.626c11.966 0 21.304 9.34 21.304 21.354v128.117z m0-223.432c0 12.016-9.34 21.353-21.304 21.353H706.933c-11.966 0-21.304-9.337-21.304-21.353V319.596c0-12.013 9.338-21.353 21.304-21.353h213.626c11.966 0 21.304 9.34 21.304 21.353v128.118z"></path></svg>'))},n.renderItems=function(){var t=new Ws;return t.on("change",(function(t){e.onSelect({type:e.name,data:t})})),t.render()},n},e}(af),Of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var kf=function(t){function e(e){return t.call(this,e)||this}return Of(e,t),e.prototype.getIcon=function(){return""},e.prototype.renderSelectionNode=function(t){return function(t){"string"==typeof t&&(t=document.createTextNode(t));var e=document.createElement("div");e.className=Jl("toolbar-icon"),e.appendChild(t);var n=document.createElement("div");return e.appendChild(n),e}(this.getIcon())},e.prototype.renderDropdownItems=function(t){return""},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(t){return e.renderSelectionNode(t)},n.renderItems=function(t){return e.renderDropdownItems(t)},n},e}(af),_f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sf=function(t){function e(e){return t.call(this,e)||this}return _f(e,t),e.prototype.getIcon=function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M243.293091 313.623273a69.818182 69.818182 0 0 0 0 98.769454l91.648 91.601455a23.272727 23.272727 0 0 0 32.907636-32.907637L276.247273 379.438545a23.272727 23.272727 0 0 1 0-32.907636l110.964363-110.964364a23.272727 23.272727 0 0 1 32.907637 0l183.249454 183.20291a23.272727 23.272727 0 0 1 0 32.907636l-55.482182 55.528727a23.272727 23.272727 0 1 0 32.907637 32.907637l55.482182-55.482182a69.818182 69.818182 0 0 0 0-98.769455L453.073455 202.612364a69.818182 69.818182 0 0 0-98.769455 0L243.293091 313.623273z m574.091636 352.023272a69.818182 69.818182 0 0 0 0-98.722909l-91.601454-91.648a23.272727 23.272727 0 0 0-32.907637 32.907637l91.601455 91.648a23.272727 23.272727 0 0 1 0 32.907636l-111.010909 111.010909a23.272727 23.272727 0 0 1-32.907637 0l-183.249454-183.249454a23.272727 23.272727 0 0 1 0-32.907637l55.528727-55.528727a23.272727 23.272727 0 1 0-32.907636-32.907636l-55.528727 55.528727a69.818182 69.818182 0 0 0 0 98.722909l183.249454 183.249455a69.818182 69.818182 0 0 0 98.722909 0l111.010909-111.01091z"></path></svg>')},e.prototype.renderDropdownItems=function(t){var e=this,n=new Ds;return n.on("change",(function(t){e.onSelect({type:e.name,data:t})})),n.render()},e}(kf),Rf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Af=function(t){function e(e){return t.call(this,e)||this}return Rf(e,t),e.prototype.getIcon=function(){return ef()},e.prototype.renderDropdownItems=function(t){var e=this,n=new Us;return n.on("change",(function(t){e.onSelect({type:e.name,data:t})})),n.render()},e}(kf),Mf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tf=function(t){function e(e){var n={mode:"horizontal",align:"center",items:[{key:"sub",render:nf},{key:"sup",render:rf}]};return t.call(this,Object.assign(n,e))||this}return Mf(e,t),e.prototype.createDropdown=function(){var t=this,e=new Bs(this.getDropdownProps());return e.on("itemClick",(function(e){var n=t.getValue()!==e;t.setValue(n?e:null),t.onSelect({type:e,data:n})})),e},e.prototype.getDropdownProps=function(){var e=t.prototype.getDropdownProps.call(this);return e.renderSelection=function(){var t=document.createElement("div");return t.style.width="6px",t},e},e}(af),Pf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jf=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Nf=function(t){function e(e){var n=t.call(this,Object.assign({align:"left"},e))||this;return n._customItems=[],n._customItemMap={},n}return Pf(e,t),e.prototype.createDropdown=function(){return new Bs(this.getDropdownProps())},e.prototype.addItem=function(t,e){var n=this._customItemMap;if(n.hasOwnProperty(t))throw new Error("item that key is ".concat(t," has been existed!"));var r=n[t]={key:t,render:e};this._customItems.push(r)},e.prototype.hasItem=function(t){return this._customItemMap.hasOwnProperty(t)},e.prototype.removeItem=function(t){var e=this._customItemMap,n=e[t];if(n){delete e[t];var r=this._customItems,o=r.indexOf(n);-1!==o&&r.splice(o,1)}},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){var t=document.createElement("div"),e=tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z" p-id="8144"></path><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path></svg>');return t.appendChild(e),t},n.items=function(){return jf([],e._customItems,!0)},n},e}(af),zf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bf=function(t){function e(e){var n={items:[{key:"addIndent",render:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519c4.5-3.5 4.5-10.3 0-13.9L142.4 381.9c-5.8-4.6-14.4-0.5-14.4 6.9v246.3c0 7.4 8.5 11.6 14.4 7z"></path></svg>')}},{key:"minusIndent",render:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4 0.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1c-4.5 3.5-4.5 10.3 0 13.8z"></path></svg>')}}]};return t.call(this,Object.assign(n,e))||this}return zf(e,t),e.prototype.getDropdownProps=function(){var e=t.prototype.getDropdownProps.call(this),n=e.items[0];return e.renderSelection=function(){return n.render()},e},e.prototype.createDropdown=function(){var t=this,e=new Bs(this.getDropdownProps());return e.on("itemClick",(function(e){t.onSelect({type:t.name,data:e})})),e},e}(af),If=(n(43),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());var Lf=function(t){function e(e){var n=t.call(this,Object.assign({items:["16px","20px","24px","28px","32px","36px","40px","44px","48px","52px","56px","60px"].map((function(t){return{key:t,render:function(){return t}}}))},e))||this;return n._value="24px",n}return If(e,t),e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)+" "+Jl("toolbar-icon-content")},e.prototype.getDropdownProps=function(){var e=this,n=t.prototype.getDropdownProps.call(this);return n.renderSelection=function(){var t=document.createElement("div");t.className=Jl("toolbar-item-icon-selection"),t.appendChild(tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M648 160H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8z m272.8 546H856V318h64.8c6 0 9.4-7 5.7-11.7L825.7 178.7c-2.9-3.7-8.5-3.7-11.3 0L713.6 306.3c-3.7 4.7-0.4 11.7 5.7 11.7H784v388h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.8-4.7 0.4-11.7-5.6-11.7z"></path></svg>'));var n=document.createElement("span");return n.textContent=e._value,t.appendChild(n),t},n},e}(af),Df={cancel:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M412.253091 254.138182L232.727273 392.378182l179.525818 138.24V415.557818h179.525818a176.221091 176.221091 0 1 1 0 352.395637h-123.019636v46.545454h123.019636a222.766545 222.766545 0 1 0 0-445.486545H412.253091V254.138182z"></path></svg>')},redo:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M611.746909 254.138182L791.272727 392.378182l-179.525818 138.24V415.557818H432.221091a176.221091 176.221091 0 1 0 0 352.395637h123.019636v46.545454H432.221091a222.766545 222.766545 0 1 1 0-445.486545h179.525818V254.138182z"></path></svg>')},bold:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M372.363636 279.272727v465.454546h210.571637c48.779636 0 87.319273-9.122909 114.269091-27.368728 31.464727-22.155636 47.522909-56.738909 47.522909-103.656727 0-31.278545-7.68-56.738909-22.481455-74.938182-15.36-18.944-37.888-31.325091-68.049454-37.236363 23.133091-9.076364 40.494545-21.457455 52.642909-38.4 12.194909-18.292364 18.618182-40.448 18.618182-66.513455 0-35.188364-12.194909-63.255273-35.933091-84.107636C663.831273 290.350545 627.898182 279.272727 582.283636 279.272727H372.363636z m75.124364 62.603637h116.177455c30.813091 0 52.642909 5.213091 66.792727 15.639272 12.846545 9.774545 19.874909 26.065455 19.874909 48.221091 0 24.110545-7.028364 41.704727-19.874909 52.829091-13.498182 10.426182-35.979636 16.290909-68.049455 16.290909h-114.967272V341.876364z m0 195.537454h126.464c33.373091 0 57.762909 5.864727 73.169455 17.594182 14.801455 11.776 22.481455 30.673455 22.481454 57.390545 0 26.065455-10.24 44.311273-30.813091 56.040728-16.058182 9.122909-38.493091 13.684364-66.746182 13.684363H447.488v-144.709818z"></path></svg>')},italic:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M606.068364 279.272727h66.466909V232.727273h-194.280728v46.545454h79.639273l-105.192727 392.610909H381.067636v46.545455h194.327273v-46.545455h-74.472727L606.068364 279.272727z"></path></svg>')},stroke:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M443.112727 265.355636C475.089455 243.618909 516.561455 232.727273 566.923636 232.727273c54.365091 0 97.885091 12.241455 129.163637 37.422545 32.674909 25.832727 51.013818 64.605091 55.808 115.572364H696.785455c-6.144-35.374545-19.735273-61.207273-40.820364-78.196364-21.736727-17.687273-52.363636-25.832727-91.787636-25.832727-36.026182 0-63.906909 5.445818-84.340364 17.687273-23.133091 13.591273-34.676364 33.978182-34.676364 61.905454 0 24.436364 13.591273 44.218182 41.472 59.112727 8.098909 4.514909 23.924364 10.519273 47.243637 17.966546h351.418181v46.545454h-209.92c11.264 4.701091 20.200727 9.076364 26.856728 13.032728 40.122182 24.482909 60.509091 58.507636 60.509091 102.679272 0 42.170182-16.989091 76.194909-51.013819 100.677819-33.978182 23.784727-79.546182 36.026182-137.30909 36.026181-57.157818 0-102.027636-12.241455-134.702546-36.724363-38.074182-29.230545-59.159273-73.448727-63.255273-133.306182h55.109819c4.747636 42.170182 19.735273 73.448727 44.218181 93.184 22.434909 17.687273 55.063273 27.229091 98.583273 27.229091 39.470545 0 72.098909-7.493818 96.581818-22.481455 24.482909-14.941091 36.724364-35.374545 36.724364-61.207272 0-30.580364-16.290909-54.365091-48.314182-71.400728-13.591273-8.145455-48.267636-19.688727-102.679273-35.374545a2104.645818 2104.645818 0 0 1-39.563636-12.334546H253.812364v-46.545454h165.469091c-20.014545-19.688727-29.882182-44.497455-29.882182-74.379636 0-42.170182 17.687273-75.496727 53.713454-98.629819z"></path></svg>')},underline:function(){return tf('<svg viewBox="0 0 1070 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M371.432727 489.192727V232.727273h47.755637v257.070545c0 40.820364 8.750545 71.68 27.415272 92.672 19.223273 21.550545 49.524364 32.628364 90.949819 32.628364 40.773818 0 71.074909-11.077818 90.903272-32.581818 18.106182-21.038545 27.415273-51.944727 27.415273-92.718546V232.727273h47.802182v256.465454c0 54.225455-13.963636 95.604364-41.425455 124.183273-28.532364 29.137455-69.911273 43.752727-124.741818 43.752727-54.784 0-96.162909-14.615273-124.136727-43.194182-27.973818-29.137455-41.984-70.516364-41.984-124.741818z m-97.186909 277.876364h534.341818v-46.545455H274.245818v46.545455z"></path></svg>')},overline:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M512 890.88A238.933333 238.933333 0 0 1 273.066667 651.946667v-361.813334a34.133333 34.133333 0 1 1 68.266666 0v361.813334a170.666667 170.666667 0 1 0 341.333334 0v-361.813334a34.133333 34.133333 0 1 1 68.266666 0v361.813334a238.933333 238.933333 0 0 1-238.933333 238.933333z m273.066667-761.173333h-546.133334a27.306667 27.306667 0 0 1 0-54.613334h546.133334a27.306667 27.306667 0 1 1 0 54.613334z"></path></svg>')},ol:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M330.666667 192h640a42.666667 42.666667 0 0 0 0-85.333333h-640a42.666667 42.666667 0 0 0 0 85.333333zM970.666667 469.333333h-640a42.666667 42.666667 0 1 0 0 85.333334h640a42.666667 42.666667 0 0 0 0-85.333334zM970.666667 832h-640a42.666667 42.666667 0 0 0 0 85.333333h640a42.666667 42.666667 0 0 0 0-85.333333zM94.378667 735.914667a85.333333 85.333333 0 0 0-82.474667 63.317333 32 32 0 1 0 61.866667 16.469333 21.333333 21.333333 0 1 1 20.608 26.88 32 32 0 1 0 0 64 21.333333 21.333333 0 1 1-20.565334 27.093334 32 32 0 1 0-61.653333 17.066666 85.333333 85.333333 0 1 0 153.130667-70.314666 10.709333 10.709333 0 0 1 0-11.861334 85.333333 85.333333 0 0 0-70.912-132.736zM181.333333 458.581333a85.333333 85.333333 0 0 0-170.666666 0 32 32 0 0 0 64 0 21.333333 21.333333 0 0 1 42.666666 0 43.989333 43.989333 0 0 1-9.685333 27.52L17.664 598.570667A32 32 0 0 0 42.666667 650.581333h106.666666a32 32 0 0 0 0-64h-17.877333a10.624 10.624 0 0 1-8.32-17.322666L157.866667 526.08a108.544 108.544 0 0 0 23.466666-67.498667zM170.666667 223.914667h-10.666667A10.666667 10.666667 0 0 1 149.333333 213.333333V69.248A58.752 58.752 0 0 0 90.666667 10.581333H64a32 32 0 0 0 0 64h10.666667A10.666667 10.666667 0 0 1 85.333333 85.333333v128a10.666667 10.666667 0 0 1-10.666666 10.666667H64a32 32 0 0 0 0 64H170.666667a32 32 0 0 0 0-64z"></path></svg>')},ul:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M106.666667 170.581333m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" p-id="914"></path><path d="M362.666667 213.333333H981.333333a42.666667 42.666667 0 0 0 0-85.333333H362.666667a42.666667 42.666667 0 0 0 0 85.333333z"></path><path d="M106.666667 511.914667m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z"></path><path d="M981.333333 469.333333H362.666667a42.666667 42.666667 0 0 0 0 85.333334H981.333333a42.666667 42.666667 0 0 0 0-85.333334z" p-id="917"></path><path d="M106.666667 853.248m-106.666667 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" p-id="918"></path><path d="M981.333333 810.666667H362.666667a42.666667 42.666667 0 0 0 0 85.333333H981.333333a42.666667 42.666667 0 0 0 0-85.333333z"></path></svg>')},hr:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M213.333333 554.666667a42.666667 42.666667 0 0 1 0-85.333334h597.333334a42.666667 42.666667 0 0 1 0 85.333334H213.333333z"></path></svg>')},image:ef,quote:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M195.541333 739.029333C151.594667 692.352 128 640 128 555.136c0-149.333333 104.832-283.178667 257.28-349.354667l38.101333 58.794667c-142.293333 76.970667-170.112 176.853333-181.205333 239.829333 22.912-11.861333 52.906667-16 82.304-13.269333 76.970667 7.125333 137.642667 70.314667 137.642667 148.864a149.333333 149.333333 0 0 1-149.333334 149.333333 165.162667 165.162667 0 0 1-117.248-50.304z m426.666667 0C578.261333 692.352 554.666667 640 554.666667 555.136c0-149.333333 104.832-283.178667 257.28-349.354667l38.101333 58.794667c-142.293333 76.970667-170.112 176.853333-181.205333 239.829333 22.912-11.861333 52.906667-16 82.304-13.269333 76.970667 7.125333 137.642667 70.314667 137.642666 148.864a149.333333 149.333333 0 0 1-149.333333 149.333333 165.162667 165.162667 0 0 1-117.248-50.304z"></path></svg>')},checkbox:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M466.346667 722.346667l-199.68-182.613334a3.84 3.84 0 0 1 0-5.973333l51.2-55.466667a4.693333 4.693333 0 0 1 5.973333 0l139.946667 119.466667a3.84 3.84 0 0 0 5.973333 0l223.146667-241.066667a4.693333 4.693333 0 0 1 6.4 0l54.186666 54.186667a4.266667 4.266667 0 0 1 0 5.973333l-280.32 305.066667a4.266667 4.266667 0 0 1-6.4 0.853333zM806.4 213.333333H217.6a3.84 3.84 0 0 0-4.266667 4.266667v588.8a3.84 3.84 0 0 0 4.266667 4.266667h588.8a3.84 3.84 0 0 0 4.266667-4.266667V217.6a3.84 3.84 0 0 0-4.266667-4.266667zM853.333333 849.066667a4.693333 4.693333 0 0 1-4.693333 4.693333H174.506667a4.693333 4.693333 0 0 1-4.693334-4.693333V174.933333A4.693333 4.693333 0 0 1 174.933333 170.666667h674.133334a4.693333 4.693333 0 0 1 4.693333 4.693333z"></path></svg>')},formatFill:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M840 192h-56v-72c0-13.3-10.7-24-24-24H168c-13.3 0-24 10.7-24 24v272c0 13.3 10.7 24 24 24h592c13.3 0 24-10.7 24-24V256h32v200H465c-22.1 0-40 17.9-40 40v136h-44c-4.4 0-8 3.6-8 8v228c0 0.6 0.1 1.3 0.2 1.9-0.1 2-0.2 4.1-0.2 6.1 0 46.4 37.6 84 84 84s84-37.6 84-84c0-2.1-0.1-4.1-0.2-6.1 0.1-0.6 0.2-1.2 0.2-1.9V640c0-4.4-3.6-8-8-8h-44V520h351c22.1 0 40-17.9 40-40V232c0-22.1-17.9-40-40-40zM720 352H208V160h512v192zM477 876c0 11-9 20-20 20s-20-9-20-20V696h40v180z"></path></svg>')},formatClean:function(){return tf('<svg viewBox="0 0 1137 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M599.22963 682.666667h-170.666667l-128.948148-128.948148L606.814815 246.518519l227.555555 227.555555-204.8 208.592593h-30.34074z m11.377777-37.925926l53.096297-53.096297-174.45926-174.459259-136.533333 132.740741 94.814815 94.814815h163.081481z m-273.066666 75.851852h493.037037v37.925926h-493.037037v-37.925926z"></path></svg>')}},Vf={cancel:!0,redo:!0,hr:!0,checkbox:!0,formatClean:!0};var Hf={};Object.keys(Df).forEach((function(t){var e;Hf[t]=(e=t,function(){return new Qs({icon:Df[e](),name:e,stateless:!Vf[e]})})})),Hf.subSup=function(){return new Tf({name:"subSup"})},Hf.textAlign=function(){return new uf({name:"textAlign"})},Hf.indent=function(){return new Bf({name:"indent"})},Hf.fontSize=function(){return new sf({name:"fontSize"})},Hf.lineHeight=function(){return new Lf({name:"lineHeight"})},Hf.textType=function(){return new vf({name:"textType"})},Hf.fontColor=function(){return new xf({name:"fontColor"})},Hf.textBgColor=function(){return new Ef({name:"textBgColor",getIcon:function(){return tf('<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg"><path d="M849.838 62h-675.675c-61.819 0-112.162 50.231-112.162 112.219v675.619c0 61.819 50.231 112.162 112.162 112.162h675.675c61.875 0 112.162-50.231 112.162-112.162v-675.619c0-61.875-50.231-112.219-112.162-112.219zM689.75 849.5l-53.831-168.75h-247.725l-53.887 168.75h-103.556l226.181-618.75h110.194l226.125 618.75h-103.5z"></path><path d="M510.819 343.25l-93.656 281.25h189.787l-92.813-281.25z"></path></svg>')}})},Hf.blockBgColor=function(){return new Ef({name:"blockBgColor"})},Hf.table=function(){return new Cf({name:"table"})},Hf.link=function(){return new Sf({name:"link"})},Hf.image=function(){return new Af({name:"image",align:"right"})},Hf.custom=function(){return new Nf({name:"custom",align:"left"})},Gs(Hf);n(44);var Wf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ff=Gl("disabled"),qf=(function(t){function e(e){var n=t.call(this)||this;return n._options={groups:[{items:["custom"]},{items:["cancel","redo"]},{items:["formatFill","formatClean"]},{items:["textType","fontSize","bold","italic","stroke","underline","overline","subSup"]},{items:["fontColor","textBgColor","blockBgColor"]},{items:["textAlign","ol","ul","indent","lineHeight"]},{items:["link","table","image","hr","checkbox","quote"]}]},n._toolbarItemMap={},n._enabled=!0,n._hidden=!1,Object.assign(n._options,e),n}Wf(e,t),e.prototype.onToolbarItemValueApply=function(t){this.emit("itemSelect",null,[t])},e.prototype.getToolbarItems=function(){return Object.values(this._toolbarItemMap)},e.prototype.setToolbarItemValue=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setValue(e)},e.prototype.setToolbarItemEnabled=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setEnabled(e)},e.prototype.setToolbarItemVisible=function(t,e){var n=this._toolbarItemMap;n.hasOwnProperty(t)&&n[t].setVisible(e)},e.prototype.addCustomToolbarItem=function(t,e){var n=this._customToolbarItem;n&&n.addItem(t,e)},e.prototype.removeCustomToolbarItem=function(t){var e=this._customToolbarItem;e&&e.removeItem(t)},e.prototype.setEnabled=function(t){this._enabled=!!t;var e=this._container;e&&(this.isEnabled()?e.removeAttribute(Ff):e.setAttribute(Ff,""))},e.prototype.isEnabled=function(){return this._enabled},e.prototype.getContainer=function(){if(this._container)return this._container;var t=document.createElement("div");return this._container=t,t.className=Jl("toolbar"),this.isEnabled()||t.setAttribute(Ff,""),this._hidden&&this.hide(),this._container},e.prototype.hide=function(){this._container?(this._container.setAttribute("data-hidden",""),this._hidden=!0):this._hidden=!0},e.prototype.show=function(){this._container?(this._container.removeAttribute("data-hidden"),this._hidden=!1):this._hidden=!1},e.prototype.render=function(){var t=this._options.groups,e=this.getContainer();os(e);var n=this,r=this._toolbarItemMap,o=this._options.groupSplitLine,i=void 0===o||o;return t.forEach((function(o,a){var c=o.wrapper,u=c?document.createElement("div"):null;if(u&&(u.className=Jl("toolbar-group-wrapper")),o.items.forEach((function(t){var o=Js(t);o&&(r[t]=o,o instanceof Nf&&(n._customToolbarItem=o),o.connect(n),c?null==u||u.appendChild(o.render()):e.appendChild(o.render()))})),c&&e.appendChild(u),i&&t.length>1&&a!==t.length-1){var l=document.createElement("div");l.className=Jl("toolbar-group-split"),e.appendChild(l)}})),e}}(Dt),function(t){var e=function(t){var e,n,r=function(t){for(var e=t.firstElementChild;e;){if("style"===String(e.tagName).toLowerCase()&&e.hasAttribute("style-setting"))return e;e=e.nextElementSibling}return e||((e=ql.createElement()).setAttribute("style-setting",""),t.appendChild(e)),e}(t),o=r.getAttribute("style-setting"),i={};if(o)try{n={},i=(e=o)?(e.split(";").forEach((function(t){var e=t.split(":");2===e.length&&(n[e[0]]=e[1])})),n):n}catch(t){}return{table:t,setting:i,element:r}},n=function(t){var e=t.setting,n=t.element,r=t.table,o=r.getAttribute("tid");o||(o="id_"+Date.now(),r.setAttribute("tid",o));var i,a=[],c="".concat(oi.tagName,"[").concat("tid",'="').concat(o,'"]>table'),u="".concat(c,">tbody>tr>td");e.borderColor&&(a.push("".concat(c,"{border-color:").concat(e.borderColor,";}")),a.push("".concat(u,"{border-color:").concat(e.borderColor,";}"))),e.borderSize&&(a.push("".concat(c,"{border-width:").concat(e.borderSize,";}")),a.push("".concat(u,"{border-width:").concat(e.borderSize,";}"))),e.bgColor&&a.push("".concat(c,"{background-color:").concat(e.bgColor,";}")),n.textContent=a.join("\n"),n.setAttribute("style-setting",(i=e,Object.keys(i).map((function(t){return"".concat(t,":").concat(i[t])})).join(";")))},r=function(t,r,o){var i=e(t);i.setting[r]=o,n(i)};return{setTableBorderColor:function(t,e){r(t,"borderColor",e)},setTableBorderSize:function(t,e){r(t,"borderSize",e)},setTableBgColor:function(t,e){r(t,"bgColor",e)}}});n(45);var Uf={apply:function(t){var e=Hl(t),n=e.addRowBefore,o=e.addRowAfter,i=e.addColBefore,a=e.addColAfter,c=e.deleteCurrentCellRow,u=e.deleteCurrentCell,l=e.deleteTable,s=Dl(t),f=s.getProxyElement,p=s.pushLog,h=s.findCell,v=Yl(t,s),d=v.selectTableArea,y=v.mergeCells,m=qf(),g=m.setTableBorderColor,x=m.setTableBorderSize,b=m.setTableBgColor;function E(){var e=t.editor.getWrapper();e._contextMenu&&fr(e._contextMenu),e._contextMenu=null}function w(e,n){var o=n.items,i=t.editor.getWrapper(),a=r.getPosition(e),c=document.createElement("div");c.className=Yo("context-menu"),o.forEach((function(t){c.appendChild(function(t){var e=document.createElement("div");return e.className=Yo("context-menu-item"),e.innerHTML=t.html,t.handler&&e.addEventListener("click",(function(e){p(),t.handler(e)})),t.create&&(e.setAttribute("ext",""),e.appendChild(t.create())),e}(t))}));var u=a.x,l=a.y;c.style.left="".concat(u,"px"),c.style.top="".concat(l,"px"),c.addEventListener("click",(function(t){t.stopPropagation()}));var s=document.createElement("div");s.className=Yo("context-menu-wrapper"),s.appendChild(c),s.addEventListener("contextmenu",(function(t){return t.preventDefault()})),i._contextMenu=s,s.addEventListener("click",E),document.body.appendChild(s)}function C(t){var e=document.createElement("div");e.className=Yo("ctx-sub-menu-item"),e.setAttribute("type","color-picker");var n=new As;return n.eventManager.on("change",(function(e){p(),t(e)})),e.appendChild(n.render()),e.addEventListener("click",(function(t){return t.stopPropagation()})),e}t.register("contextmenu:tableContextMenu",(function(e){var n,o=r.findUpUtil(e.target,(function(t){return Tl(t)}),(function(t){return t===f()})),i=(null===(n=o.parentElement)||void 0===n?void 0:n.parentElement)===t.editor.selectState.getTarget();if(o&&i)return o})),t.onNative("mousedown",(function(t){0===t.button&&E()})),t.on("tableContextMenu",(function(e){e.stopPropagation(),e.preventDefault(),E();var s=h(e.native),f=e.target,v={items:[]},m=t.editor.getNormalizedRange(),O=function(){E(),d(f),m&&m.select()};if(s&&(v.items=[{html:Al.get({lid:"table.insertRowBefore",default:"insert row before current"}),handler:function(){n(f,s),O()}},{html:Al.get({lid:"table.insertRowAfter",default:"insert row after current"}),handler:function(){o(f,s),O()}},{html:Al.get({lid:"table.insertColBefore",default:"insert column before current"}),handler:function(){i(f,s),O()}},{html:Al.get({lid:"table.insertColAfter",default:"insert column after current"}),handler:function(){a(f,s),O()}},{html:Al.get({lid:"table.deleteCurrentRow",default:"delete current row"}),handler:function(){c(f,s),O()}},{html:Al.get({lid:"table.deleteCurrentCol",default:"delete current column"}),handler:function(){u(f,s),O()}}]),f._selectOptions){var k=f._selectOptions,_=k.minCol,S=k.maxCol,R=k.minRow,A=k.maxRow,M=s.getAttribute("index"),T=s.parentNode.getAttribute("index");if(Nl(_,S,M)&&Nl(R,A,T)){var P=[{html:Al.get({lid:"table.mergeCells",default:"merge cells"}),handler:function(){y(f),O()}}];v.items=v.items.concat(P)}}v.items.push({html:Al.get({lid:"table.deleteTable",default:"delete table"}),handler:function(){l(f),O()}}),v.items.push({html:Al.get({lid:"table.borderSize",default:"border size"}),handler:function(){O()},create:function(){return function(t){var e=document.createElement("div");e.className=Yo("ctx-sub-menu-item"),e.setAttribute("type","dropdown");var n=jt("dataKey");return Array(8).fill(0).forEach((function(t,r){var o=document.createElement("div");o[n]=!0;var i=8-r-1;o.setAttribute("key",String(i)),o.textContent="".concat(i,"px"),e.appendChild(o)})),e.addEventListener("click",(function(o){var i=r.findUpUtil(o.target,(function(t){if(t[n])return!!t}),(function(t){return t===e}));i&&(p(),t(i.getAttribute("key")+"px"))})),e}((function(t){x(f,t)}))}}),v.items.push({html:Al.get({lid:"table.borderColor",default:"border color"}),handler:function(){O()},create:function(){return C((function(t){g(f,t)}))}}),v.items.push({html:Al.get({lid:"table.bgColor",default:"background color"}),handler:function(){O()},create:function(){return C((function(t){b(f,t)}))}}),w(e,v)}))},applyBase:function(t){var e=Dl(t);Fl(t,e)}};function Zf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Kf=function(t){d()(n,t);var e=Zf(n);function n(t){var r;return s()(this,n),(r=e.call(this,t))._tables=Object.create(null),r}return p()(n,[{key:"putTable",value:function(t,e){this._tables[t]=e}},{key:"removeTable",value:function(t){delete this._tables[t]}},{key:"getTables",value:function(){return Object.values(this._tables)}}]),n}(Ca);function Yf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x()(t);if(e){var o=x()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var Xf=function(t){d()(n,t);var e=Yf(n);function n(t){return s()(this,n),e.call(this,t)}return p()(n,[{key:"execute",value:function(t){if(this.getRange().collapsed){var e=t.cols,r=void 0===e?3:e,o=t.rows,i=void 0===o?3:o;_()(x()(n.prototype),"execute",this).call(this,{attrs:{meta:"".concat(i,",").concat(r)},innerHTML:!0,type:"table"})}}}]),n}(Pu),Gf=Array.prototype.slice,Jf=function(t){d()(n,t);var e=Yf(n);function n(){var t,r;s()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return m()(r,(t=r=e.call.apply(e,[this].concat(i)),r.commandType=mt,r._selection=null,t))}return p()(n,[{key:"setCellBgColor",value:function(t){var e=this._selection;if(e)for(var n=e.table,r=e.selectOptions,o=r.minCol,i=r.maxCol,a=r.minRow,c=r.maxRow,u=oi.getElementModel(n),l=Gf.call(u.getRows()),s=a;s<=c&&s<l.length;s++){var f=l[s];if(!(s<a||s>c))for(var p=f.firstElementChild;p;){var h=0|p.getAttribute("index");if(h>=o&&h<=i){var v=wr(p);v["background-color"]=t,p.setAttribute("style",v.toString())}p=p.nextElementSibling}}}},{key:"getStyle",value:function(t){var e=t.styleNames,n=[].concat(e).reduce((function(t,e){return t[e]=!0,t}),{}),r={},o=this._selection;if(!o)return r;for(var i=o.table,a=o.selectOptions,c=a.minCol,u=a.maxCol,l=a.minRow,s=a.maxRow,f=oi.getElementModel(i),p=Gf.call(f.getRows()),h=l;h<=s&&h<p.length;h++){var v=p[h];if(!(h<l||h>s))for(var d=v.firstElementChild;d;){var y=0|d.getAttribute("index");y>=c&&y<=u&&nu.fillStyleValues(d,r,n),d=d.nextElementSibling}}return r}},{key:"getState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.createState();return"style"===t.type&&(e.data=this.getStyle.apply(this,arguments)),e}},{key:"execute",value:function(t){var e=(t||{}).type;return"getSelection"===e?this._selection:"setSelection"!==e?"setCellBgColor"===e?this.setCellBgColor(t.value):void 0:void(this._selection=t.value)}}]),n}(gt),$f=jt("TableEvents"),Qf=jt("BaseTableEvents"),tp=1;O.register(new oi),wt.install("insertTable",Xf),wt.install("tableSelection",Jf),Gc.defineCustomMount("table",(function(t,e){var n="".concat(tp++),r=e.get($f),o=e.get(Qf);o||(o=new Kf(e),Uf.applyBase(o),e.put(Qf,o)),r||(r=new Kf(e),Uf.apply(r),e.events.on("editModeChange",(function(t){t?r.mount(e.getWrapper()):r.unmount()})),e.put($f,r));var i=t.firstElementChild;if(i){var a=Gc.getElementsByElementType(i,it);null==a||a.forEach((function(t){e.mountCustomElement(t)}))}else{var c=t.getAttribute("meta"),u=3,l=3;if(c){var s=c.split(","),f=parseInt(s[0]||""),p=parseInt(s[1]||"");f&&(u=f),p&&(l=p)}i=O.createElement(oi,{cols:l,rows:u}),t.appendChild(i)}return t.style.width="100%",r.putTable(n,i),o.putTable(n,i),o.mount(e.getWrapper()),e.isEditMode()&&r.mount(e.getWrapper()),function(){r.removeTable(n),o.removeTable(n),0===r.getTables().length&&r.unmount(),0===o.getTables().length&&o.unmount()}}));var ep=Gc,np=function(){function t(e){s()(this,t),this.editor=e}return p()(t,[{key:"getState",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this.editor.commandManager,i=o.getCommand(t);return i&&this.editor.execute((function(){return i.getState.apply(i,n)}))||{data:null}}}]),t}(),rp=["ol","ul","option"],op=function(t){var e=new np(t),n={style:{},list:{},block:{}},r=e.getState("style",{styleNames:["font-weight","font-size","font-style","text-decoration","color","background-color"]}).data;r||(r={});var o=e.getState("style",{type:"block",styleNames:["text-align","background-color","line-height"]}).data;o||(o={});var i=e.getState("header").data;if(i){var a=i.level,c=void 0===a?1:a;n.block.textType="h".concat(c)}else n.block.textType="normal";var u=r["font-size"];if(u&&1===u.length){var l=u[0]||"14px";n.style.fontSize=l}else n.style.fontSize="14px";var s=(u=r["font-weight"])&&1===u.length&&"bold"===u[0];n.style.bold=!!s;var f=(u=r["font-style"])&&1===u.length&&"italic"===u[0];n.style.italic=!!f;var p=(u=r["text-decoration"])&&1===u.length&&-1!==String(u[0]).indexOf("line-through");n.style.stroke=!!p;var h=(u=r["text-decoration"])&&1===u.length&&-1!==String(u[0]).indexOf("underline");n.style.underline=!!h;var v=(u=r["text-decoration"])&&1===u.length&&-1!==String(u[0]).indexOf("overline");n.style.overline=!!v;var d=e.getState("sub").data;n.style.sub=!!d;var y=e.getState("sup").data;if(n.style.sup=!!y,(u=r.color)&&1===u.length){var m=u[0];n.style.fontColor=m||""}else n.style.fontColor="";if((u=r["background-color"])&&1===u.length){var g=u[0];n.style.fontBgColor=g||"#fff"}else n.style.fontBgColor="#fff";if((u=o["text-align"])&&1===u.length){var x=u[0]||"left";n.block.textAlign=x}else n.block.textAlign="left";if((u=o["line-height"])&&1===u.length){var b=u[0]||"24px";n.block.lineHeight=b}else n.block.lineHeight="24px";var E=e.getState("list").data;E?rp.forEach((function(t){n.list[t]=E.type===t})):rp.forEach((function(t){n.list[t]=!1}));var w=e.getState("quote").data;n.block.quote=w;var C=t.commandManager.execCommand("tableSelection",{type:"getSelection"}),O=(o["background-color"]||[])[0]||"#fff";if(C){var k=e.getState("tableSelection",{type:"style",styleNames:["background-color"]}).data["background-color"]||[];O=1===k.length?k[0]:"#fff"}return n.block.bgColor=O||"#fff",n};n(46);function ip(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ap(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ip(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cp=document.createElement("div");cp.style.height="100%",cp.style.border="1px solid #ccc",document.body.appendChild(cp);var up=new ep;up.cursor.enableInputEventListener=!1,up.render({el:cp,content:""});var lp=function(t,e){var n,r,o=null===(n=window.$MobileRuntime)||void 0===n?void 0:n.messageType,i=function(t){try{return JSON.stringify(t)}catch(t){}}(ap(ap({},t),{},{type:o,token:e}));null===(r=window.ReactNativeWebView)||void 0===r||r.postMessage(i)};up.on("selectStateChange",(function(){var t=a.getEditorState(up);lp({cmd:"syncEditorState",data:t})}));var sp={closeKeyboard:function(){up.cursor.input.blur()},showKeyboard:function(){up.cursor.input.focus()},execCommand:function(t){var e=t.data||{},n=e.cmd,r=e.options;n&&(void 0!==r?up.execCommand(n,r):up.execCommand(n))}};window.addEventListener("message",(function(t){var e,n=t.data,r=null===(e=window.$MobileRuntime)||void 0===e?void 0:e.messageType,o=function(t){try{return JSON.parse(t)}catch(t){}}(n);if(o&&o.type&&o.type===r){var i=o,a=sp[i.cmd];a&&(a(i),lp({cmd:i.cmd},i.token))}}))}]);